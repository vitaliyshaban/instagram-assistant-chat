import{$ as tt,$a as hi,$b as _0,A as Kt,Aa as Pe,Ab as _t,Ac as Es,B as Qo,Ba as wl,Bb as vt,Bc as wf,C as vl,Ca as Ne,Cb as hn,Cc as Fl,D as Tr,Da as re,Db as B,E as Qy,Ea as pf,Eb as yt,F as af,Fa as Re,Fb as Jt,G as Xy,Ga as Zo,Gb as En,H as Li,Ha as s0,Hb as ge,I as ze,Ia as Il,Ib as Ut,J as cf,Ja as o0,Jb as Al,K as Ui,Ka as bn,Kb as d0,L as Bi,La as wn,Lb as ws,M as yl,Ma as ea,Mb as f0,N as lf,Na as Cr,Nb as Sl,O as At,Oa as a0,Ob as Rl,P as Jy,Pa as ta,Pb as yf,Q as uf,Qa as V,Qb as Dl,R as hf,Ra as F,Rb as Ar,S as _s,Sa as El,Sb as xl,T as ji,Ta as zi,Tb as p0,U as df,Ua as c0,Ub as Bt,V as Zy,Va as na,Vb as m0,W as e0,Wa as Tl,Wb as g0,X as bl,Xa as $i,Xb as jt,Y as Yt,Ya as Fn,Yb as kl,Z as st,Za as mf,Zb as oa,_ as Lt,_a as gf,_b as Un,a as M,aa as Be,ab as St,ac as v0,b as ee,ba as Xo,bb as l0,bc as Is,ca as G,cb as In,cc as y0,d as Vi,da as Me,db as u0,dc as b0,e as v,ea as t0,eb as _f,ec as he,f as cn,fa as K,fb as ae,fc as w0,g as Hy,ga as ff,gb as h0,gc as aa,h as Wt,ha as O,hb as Ln,hc as I0,i as tf,ia as N,ib as Ze,ic as E0,j as nf,ja as ot,jb as L,jc as di,k as ue,ka as n0,kb as ia,kc as Pl,l as Ft,la as Jo,lb as Xt,lc as Ml,m as gl,ma as me,mb as Cl,mc as Bn,n as Wy,na as Oe,nb as ra,nc as dt,o as Ky,oa as Se,ob as w,oc as T0,p as Fi,pa as Ot,pb as C,pc as $e,q as rf,qa as i0,qb as j,qc as C0,r as sf,ra as li,rb as vs,rc as A0,s as of,sa as ln,sb as Te,sc as Ol,t as qe,ta as Qt,tb as vf,tc as S0,u as J,ua as se,ub as Q,uc as Nl,v as Er,va as oe,vb as H,w as _l,wa as te,wb as sa,x as Yy,xa as Ie,xb as ys,xc as bf,y as ve,ya as ui,yb as bs,yc as Vl,z as gs,za as r0,zb as un}from"./chunk-NQCBXXS3.js";var la=class{},Ul=class{},fi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ef=class{encodeKey(e){return R0(e)}encodeValue(e){return R0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function cS(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var lS=/%(\d[a-f0-9])/gi,uS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function R0(n){return encodeURIComponent(n).replace(lS,(e,t)=>uS[t]??e)}function Ll(n){return`${n}`}var Gi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ef,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=cS(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Ll):[Ll(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ll(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Ll(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Tf=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function hS(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function D0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function x0(n){return typeof Blob<"u"&&n instanceof Blob}function k0(n){return typeof FormData<"u"&&n instanceof FormData}function dS(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ca=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(hS(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new fi,this.context??=new Tf,!this.params)this.params=new Gi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||D0(this.body)||x0(this.body)||k0(this.body)||dS(this.body)?this.body:this.body instanceof Gi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||k0(this.body)?null:x0(this.body)?this.body.type||null:D0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Gi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,f=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((_,E)=>_.set(E,e.setHeaders[E]),h)),e.setParams&&(f=Object.keys(e.setParams).reduce((_,E)=>_.set(E,e.setParams[E]),f)),new n(t,i,o,{params:f,headers:h,context:m,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},Hi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Hi||{}),ua=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new fi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Bl=class n extends ua{constructor(e={}){super(e),this.type=Hi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ha=class n extends ua{constructor(e={}){super(e),this.type=Hi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},qi=class extends ua{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},N0=200,fS=204;function If(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Tn=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof ca)s=t;else{let l;r.headers instanceof fi?l=r.headers:l=new fi(r.headers);let h;r.params&&(r.params instanceof Gi?h=r.params:h=new Gi({fromObject:r.params})),s=new ca(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:h,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=J(s).pipe(Bi(l=>this.handler.handle(l)));if(t instanceof ca||r.observe==="events")return o;let c=o.pipe(ze(l=>l instanceof ha));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ve(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ve(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ve(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ve(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Gi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,If(r,i))}post(t,i,r={}){return this.request("POST",t,If(r,i))}put(t,i,r={}){return this.request("PUT",t,If(r,i))}static{this.\u0275fac=function(i){return new(i||n)(O(la))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),pS=/^\)\]\}',?\n/,mS="X-Request-URL";function P0(n){if(n.url)return n.url;let e=mS.toLocaleLowerCase();return n.headers.get(e)}var gS=(()=>{class n{constructor(){this.fetchImpl=N(Cf,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=N(re)}handle(t){return new Wt(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(Af,s=>i.error(new qi({error:s}))),()=>r.abort()})}doRequest(t,i,r){return v(this,null,function*(){let s=this.createRequestInit(t),o;try{let E=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,M({signal:i},s)));_S(E),r.next({type:Hi.Sent}),o=yield E}catch(E){r.error(new qi({error:E,status:E.status??0,statusText:E.statusText,url:t.urlWithParams,headers:E.headers}));return}let c=new fi(o.headers),l=o.statusText,h=P0(o)??t.urlWithParams,f=o.status,m=null;if(t.reportProgress&&r.next(new Bl({headers:c,status:f,statusText:l,url:h})),o.body){let E=o.headers.get("content-length"),k=[],P=o.body.getReader(),D=0,Y,Z,q=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){let{done:De,value:fe}=yield P.read();if(De)break;if(k.push(fe),D+=fe.length,t.reportProgress){Z=t.responseType==="text"?(Z??"")+(Y??=new TextDecoder).decode(fe,{stream:!0}):void 0;let T=()=>r.next({type:Hi.DownloadProgress,total:E?+E:void 0,loaded:D,partialText:Z});q?q.run(T):T()}}}));let ie=this.concatChunks(k,D);try{let De=o.headers.get("Content-Type")??"";m=this.parseBody(t,ie,De)}catch(De){r.error(new qi({error:De,headers:new fi(o.headers),status:o.status,statusText:o.statusText,url:P0(o)??t.urlWithParams}));return}}f===0&&(f=m?N0:0),f>=200&&f<300?(r.next(new ha({body:m,headers:c,status:f,statusText:l,url:h})),r.complete()):r.error(new qi({error:m,headers:c,status:f,statusText:l,url:h}))})}parseBody(t,i,r){switch(t.responseType){case"json":let s=new TextDecoder().decode(i).replace(pS,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>i[s]=o.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),s=0;for(let o of t)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Cf=class{};function Af(){}function _S(n){n.then(Af,Af)}function vS(n,e){return e(n)}function yS(n,e,t){return(i,r)=>ln(t,()=>e(i,s=>n(s,r)))}var V0=new K(""),bS=new K(""),wS=new K("",{providedIn:"root",factory:()=>!0});var M0=(()=>{class n extends la{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=N(wl),this.contributeToStability=N(wS)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(V0),...this.injector.get(bS,[])]));this.chain=i.reduceRight((r,s)=>yS(r,s,this.injector),vS)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(_s(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(O(Ul),O(li))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();var IS=/^\)\]\}',?\n/;function ES(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var O0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Be(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?qe(i.\u0275loadImpl()):J(null)).pipe(st(()=>new Wt(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((P,D)=>o.setRequestHeader(P,D.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let P=t.detectContentTypeHeader();P!==null&&o.setRequestHeader("Content-Type",P)}if(t.responseType){let P=t.responseType.toLowerCase();o.responseType=P!=="json"?P:"text"}let c=t.serializeBody(),l=null,h=()=>{if(l!==null)return l;let P=o.statusText||"OK",D=new fi(o.getAllResponseHeaders()),Y=ES(o)||t.url;return l=new Bl({headers:D,status:o.status,statusText:P,url:Y}),l},f=()=>{let{headers:P,status:D,statusText:Y,url:Z}=h(),q=null;D!==fS&&(q=typeof o.response>"u"?o.responseText:o.response),D===0&&(D=q?N0:0);let ie=D>=200&&D<300;if(t.responseType==="json"&&typeof q=="string"){let De=q;q=q.replace(IS,"");try{q=q!==""?JSON.parse(q):null}catch(fe){q=De,ie&&(ie=!1,q={error:fe,text:q})}}ie?(s.next(new ha({body:q,headers:P,status:D,statusText:Y,url:Z||void 0})),s.complete()):s.error(new qi({error:q,headers:P,status:D,statusText:Y,url:Z||void 0}))},m=P=>{let{url:D}=h(),Y=new qi({error:P,status:o.status||0,statusText:o.statusText||"Unknown Error",url:D||void 0});s.error(Y)},_=!1,E=P=>{_||(s.next(h()),_=!0);let D={type:Hi.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(D.total=P.total),t.responseType==="text"&&o.responseText&&(D.partialText=o.responseText),s.next(D)},k=P=>{let D={type:Hi.UploadProgress,loaded:P.loaded};P.lengthComputable&&(D.total=P.total),s.next(D)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",E),c!==null&&o.upload&&o.upload.addEventListener("progress",k)),o.send(c),s.next({type:Hi.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",E),c!==null&&o.upload&&o.upload.removeEventListener("progress",k)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(O(Nl))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),F0=new K(""),TS="XSRF-TOKEN",CS=new K("",{providedIn:"root",factory:()=>TS}),AS="X-XSRF-TOKEN",SS=new K("",{providedIn:"root",factory:()=>AS}),jl=class{},RS=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pl(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(O(he),O(bn),O(CS))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function DS(n,e){let t=n.url.toLowerCase();if(!N(F0)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=N(jl).getToken(),r=N(SS);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function L0(...n){let e=[Tn,O0,M0,{provide:la,useExisting:M0},{provide:Ul,useFactory:()=>N(gS,{optional:!0})??N(O0)},{provide:V0,useValue:DS,multi:!0},{provide:F0,useValue:!0},{provide:jl,useClass:RS}];for(let t of n)e.push(...t.\u0275providers);return Ot(e)}var Df=class extends b0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xf=class n extends Df{static makeCurrent(){y0(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=kS();return t==null?null:PS(t)}resetBaseElement(){da=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pl(document.cookie,e)}},da=null;function kS(){return da=da||document.querySelector("base"),da?da.getAttribute("href"):null}function PS(n){return new URL(n,document.baseURI).pathname}var MS=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),$l=new K(""),j0=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Be(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(O($l),O(re))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),fa=class{constructor(e){this._doc=e}},Sf="ng-app-id",z0=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ol(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Sf}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Sf),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(Sf,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(O(he),O(Il),O(ea,8),O(bn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Rf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pf=/%COMP%/g,$0="%COMP%",OS=`_nghost-${$0}`,NS=`_ngcontent-${$0}`,VS=!0,FS=new K("",{providedIn:"root",factory:()=>VS});function LS(n){return NS.replace(Pf,n)}function US(n){return OS.replace(Pf,n)}function q0(n,e){return e.map(t=>t.replace(Pf,n))}var ql=(()=>{class n{constructor(t,i,r,s,o,c,l,h=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Ol(c),this.defaultRenderer=new pa(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jo.ShadowDom&&(i=ee(M({},i),{encapsulation:Jo.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Gl?r.applyToHost(t):r instanceof ma&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Jo.Emulated:s=new Gl(l,h,i,this.appId,f,o,c,m);break;case Jo.ShadowDom:return new kf(l,h,t,i,o,c,this.nonce,m);default:s=new ma(l,h,i,f,o,c,m);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(O(j0),O(z0),O(Il),O(FS),O(he),O(bn),O(re),O(ea))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),pa=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Rf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(U0(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(U0(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Be(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Rf[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Rf[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ta.DashCase|ta.Important)?e.style.setProperty(t,i,r&ta.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ta.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Is().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function U0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var kf=class extends pa{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=q0(r.id,r.styles);for(let f of h){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ma=class extends pa{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?q0(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gl=class extends ma{constructor(e,t,i,r,s,o,c,l){let h=r+"-"+i.id;super(e,t,i,s,o,c,l,h),this.contentAttr=LS(h),this.hostAttr=US(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},BS=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),jS=(()=>{class n extends fa{constructor(t){super(t),this.delegate=N(g0,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,i,r){return this.delegate.addEventListener(t,i,r)}removeEventListener(t,i,r){return this.delegate.removeEventListener(t,i,r)}static{this.\u0275fac=function(i){return new(i||n)(O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),B0=["alt","control","meta","shift"],zS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$S={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},qS=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Is().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),o="code."),B0.forEach(h=>{let f=i.indexOf(h);f>-1&&(i.splice(f,1),o+=h+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=zS[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),B0.forEach(o=>{if(o!==r){let c=$S[o];c(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function G0(n,e){return m0(M({rootComponent:n},GS(e)))}function GS(n){return{appProviders:[...QS,...n?.providers??[]],platformProviders:YS}}function HS(){xf.makeCurrent()}function WS(){return new pf}function KS(){return s0(document),document}var YS=[{provide:bn,useValue:C0},{provide:o0,useValue:HS,multi:!0},{provide:he,useFactory:KS,deps:[]}];var QS=[{provide:i0,useValue:"root"},{provide:pf,useFactory:WS,deps:[]},{provide:$l,useClass:BS,multi:!0,deps:[he,re,bn]},{provide:$l,useClass:qS,multi:!0,deps:[he]},{provide:$l,useClass:jS,multi:!0},ql,z0,j0,{provide:Tl,useExisting:ql},{provide:Nl,useClass:MS,deps:[]},[]];var H0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _e="primary",xa=Symbol("RouteTitle"),Ff=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ds(n){return new Ff(n)}function JS(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ZS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jn(n[t],e[t]))return!1;return!0}function jn(n,e){let t=n?Lf(n):void 0,i=e?Lf(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!ib(n[r],e[r]))return!1;return!0}function Lf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ib(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function rb(n){return n.length>0?n[n.length-1]:null}function Yi(n){return _l(n)?n:Rl(n)?qe(Promise.resolve(n)):J(n)}var eR={exact:ob,subset:ab},sb={exact:tR,subset:nR,ignored:()=>!0};function W0(n,e,t){return eR[t.paths](n.root,e.root,t.matrixParams)&&sb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tR(n,e){return jn(n,e)}function ob(n,e,t){if(!Rr(n.segments,e.segments)||!Kl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!ob(n.children[i],e.children[i],t))return!1;return!0}function nR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ib(n[t],e[t]))}function ab(n,e,t){return cb(n,e,e.segments,t)}function cb(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Rr(r,t)||e.hasChildren()||!Kl(r,t,i))}else if(n.segments.length===t.length){if(!Rr(n.segments,t)||!Kl(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!ab(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Rr(n.segments,r)||!Kl(n.segments,r,i)||!n.children[_e]?!1:cb(n.children[_e],e,s,i)}}function Kl(n,e,t){return e.every((i,r)=>sb[t](n[r].parameters,i.parameters))}var mi=class{constructor(e=new xe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ds(this.queryParams),this._queryParamMap}toString(){return sR.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yl(this)}},Sr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ds(this.parameters),this._parameterMap}toString(){return ub(this)}};function iR(n,e){return Rr(n,e)&&n.every((t,i)=>jn(t.parameters,e[i].parameters))}function Rr(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function rR(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===_e&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==_e&&(t=t.concat(e(r,i)))}),t}var ka=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>new xs,providedIn:"root"})}}return n})(),xs=class{parse(e){let t=new Bf(e);return new mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ga(e.root,!0)}`,i=cR(e.queryParams),r=typeof e.fragment=="string"?`#${oR(e.fragment)}`:"";return`${t}${i}${r}`}},sR=new xs;function Yl(n){return n.segments.map(e=>ub(e)).join("/")}function ga(n,e){if(!n.hasChildren())return Yl(n);if(e){let t=n.children[_e]?ga(n.children[_e],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==_e&&i.push(`${r}:${ga(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=rR(n,(i,r)=>r===_e?[ga(n.children[_e],!1)]:[`${r}:${ga(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[_e]!=null?`${Yl(n)}/${t[0]}`:`${Yl(n)}/(${t.join("//")})`}}function lb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hl(n){return lb(n).replace(/%3B/gi,";")}function oR(n){return encodeURI(n)}function Uf(n){return lb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ql(n){return decodeURIComponent(n)}function K0(n){return Ql(n.replace(/\+/g,"%20"))}function ub(n){return`${Uf(n.path)}${aR(n.parameters)}`}function aR(n){return Object.entries(n).map(([e,t])=>`;${Uf(e)}=${Uf(t)}`).join("")}function cR(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Hl(t)}=${Hl(r)}`).join("&"):`${Hl(t)}=${Hl(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lR=/^[^\/()?;#]+/;function Mf(n){let e=n.match(lR);return e?e[0]:""}var uR=/^[^\/()?;=#]+/;function hR(n){let e=n.match(uR);return e?e[0]:""}var dR=/^[^=?&#]+/;function fR(n){let e=n.match(dR);return e?e[0]:""}var pR=/^[^&#]+/;function mR(n){let e=n.match(pR);return e?e[0]:""}var Bf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[_e]=new xe(e,t)),i}parseSegment(){let e=Mf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Be(4009,!1);return this.capture(e),new Sr(Ql(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hR(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Mf(this.remaining);r&&(i=r,this.capture(i))}e[Ql(t)]=Ql(i)}parseQueryParam(e){let t=fR(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=mR(this.remaining);o&&(i=o,this.capture(i))}let r=K0(t),s=K0(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Mf(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Be(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=_e);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[_e]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Be(4011,!1)}};function hb(n){return n.segments.length>0?new xe([],{[_e]:n}):n}function db(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=db(r);if(i===_e&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new xe(n.segments,e);return gR(t)}function gR(n){if(n.numberOfChildren===1&&n.children[_e]){let e=n.children[_e];return new xe(n.segments.concat(e.segments),e.children)}return n}function Dr(n){return n instanceof mi}function _R(n,e,t=null,i=null){let r=fb(n);return pb(r,e,t,i)}function fb(n){let e;function t(s){let o={};for(let l of s.children){let h=t(l);o[l.outlet]=h}let c=new xe(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=hb(i);return e??r}function pb(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Of(r,r,r,t,i);let s=vR(e);if(s.toRoot())return Of(r,r,new xe([],{}),t,i);let o=yR(s,r,n),c=o.processChildren?ya(o.segmentGroup,o.index,s.commands):gb(o.segmentGroup,o.index,s.commands);return Of(r,o.segmentGroup,c,t,i)}function Xl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ia(n){return typeof n=="object"&&n!=null&&n.outlets}function Of(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,h])=>{s[l]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=mb(n,e,t);let c=hb(db(o));return new mi(c,s,r)}function mb(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=mb(s,e,t)}),new xe(n.segments,i)}var Jl=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Xl(i[0]))throw new Be(4003,!1);let r=i.find(Ia);if(r&&r!==rb(i))throw new Be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vR(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Jl(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Jl(t,e,i)}var As=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function yR(n,e,t){if(n.isAbsolute)return new As(e,!0,0);if(!t)return new As(e,!1,NaN);if(t.parent===null)return new As(t,!0,0);let i=Xl(n.commands[0])?0:1,r=t.segments.length-1+i;return bR(t,r,n.numberOfDoubleDots)}function bR(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Be(4005,!1);r=i.segments.length}return new As(i,!1,r-s)}function wR(n){return Ia(n[0])?n[0].outlets:{[_e]:n}}function gb(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return ya(n,e,t);let i=IR(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,i.pathIndex),{});return s.children[_e]=new xe(n.segments.slice(i.pathIndex),n.children),ya(s,0,r)}else return i.match&&r.length===0?new xe(n.segments,{}):i.match&&!n.hasChildren()?jf(n,e,t):i.match?ya(n,0,r):jf(n,e,t)}function ya(n,e,t){if(t.length===0)return new xe(n.segments,{});{let i=wR(t),r={};if(Object.keys(i).some(s=>s!==_e)&&n.children[_e]&&n.numberOfChildren===1&&n.children[_e].segments.length===0){let s=ya(n.children[_e],e,t);return new xe(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=gb(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new xe(n.segments,r)}}function IR(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(Ia(c))break;let l=`${c}`,h=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!Q0(l,h,o))return s;i+=2}else{if(!Q0(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function jf(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Ia(s)){let l=ER(s.outlets);return new xe(i,l)}if(r===0&&Xl(t[0])){let l=n.segments[e];i.push(new Sr(l.path,Y0(t[0]))),r++;continue}let o=Ia(s)?s.outlets[_e]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Xl(c)?(i.push(new Sr(o,Y0(c))),r+=2):(i.push(new Sr(o,{})),r++)}return new xe(i,{})}function ER(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=jf(new xe([],{}),0,i))}),e}function Y0(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Q0(n,e,t){return n==t.path&&jn(e,t.parameters)}var ba="imperative",ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ft||{}),dn=class{constructor(e,t){this.id=e,this.url=t}},ks=class extends dn{constructor(e,t,i="imperative",r=null){super(e,t),this.type=ft.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},An=class extends dn{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(tn||{}),Zl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Zl||{}),pi=class extends dn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wi=class extends dn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ft.NavigationSkipped}},Ea=class extends dn{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eu=class extends dn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zf=class extends dn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$f=class extends dn{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qf=class extends dn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gf=class extends dn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hf=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wf=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kf=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yf=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qf=class{constructor(e){this.snapshot=e,this.type=ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xf=class{constructor(e){this.snapshot=e,this.type=ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tu=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ta=class{},Ps=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TR(n,e){return n.providers&&!n._injector&&(n._injector=_f(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cn(n){return n.outlet||_e}function CR(n,e){let t=n.filter(i=>Cn(i)===e);return t.push(...n.filter(i=>Cn(i)!==e)),t}function Pa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Jf=class{get injector(){return Pa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ma(this.rootInjector),this.attachRef=null}},Ma=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Jf(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(O(li))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Zf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ep(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ep(e,this._root).map(t=>t.value)}};function Zf(n,e){if(n===e.value)return e;for(let t of e.children){let i=Zf(n,t);if(i)return i}return null}function ep(n,e){if(n===e.value)return[e];for(let t of e.children){let i=ep(n,t);if(i.length)return i.unshift(e),i}return[]}var en=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var iu=class extends nu{constructor(e,t){super(e),this.snapshot=t,lp(this,e)}toString(){return this.snapshot.toString()}};function _b(n){let e=AR(n),t=new Ft([new Sr("",{})]),i=new Ft({}),r=new Ft({}),s=new Ft({}),o=new Ft(""),c=new Ki(t,i,s,o,r,_e,n,e.root);return c.snapshot=e.root,new iu(new en(c,[]),e)}function AR(n){let e={},t={},i={},r="",s=new Ss([],e,i,r,t,_e,n,null,{});return new su("",new en(s,[]))}var Ki=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ve(h=>h[xa]))??J(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ve(e=>Ds(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ve(e=>Ds(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ru(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),r?.data),n._resolvedData)}:i={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},r&&yb(r)&&(i.resolve[xa]=r.title),i}var Ss=class{get title(){return this.data?.[xa]}constructor(e,t,i,r,s,o,c,l,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ds(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ds(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},su=class extends nu{constructor(e,t){super(t),this.url=e,lp(this,t)}toString(){return vb(this._root)}};function lp(n,e){e.value._routerState=n,e.children.forEach(t=>lp(n,t))}function vb(n){let e=n.children.length>0?` { ${n.children.map(vb).join(", ")} } `:"";return`${n.value}${e}`}function Nf(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jn(e.params,t.params)||n.paramsSubject.next(t.params),ZS(e.url,t.url)||n.urlSubject.next(t.url),jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tp(n,e){let t=jn(n.params,e.params)&&iR(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||tp(n.parent,e.parent))}function yb(n){return typeof n.title=="string"||n.title===null}var Oa=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new Ne,this.deactivateEvents=new Ne,this.attachEvents=new Ne,this.detachEvents=new Ne,this.parentContexts=N(Ma),this.location=N(Fn),this.changeDetector=N(Bt),this.inputBinder=N(lu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Be(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Be(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new np(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Se({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Qt]})}}return n})(),np=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ki?this.route:e===Ma?this.childContexts:this.parent.get(e,t)}},lu=new K(""),X0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=gs([i.queryParams,i.params,i.data]).pipe(st(([s,o,c],l)=>(c=M(M(M({},s),o),c),l===0?J(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=v0(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function SR(n,e,t){let i=Ca(n,e._root,t?t._root:void 0);return new iu(i,e)}function Ca(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=RR(n,e,t);return new en(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Ca(n,c)),o}}let i=DR(e.value),r=e.children.map(s=>Ca(n,s));return new en(i,r)}}function RR(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ca(n,i,r);return Ca(n,i)})}function DR(n){return new Ki(new Ft(n.url),new Ft(n.params),new Ft(n.queryParams),new Ft(n.fragment),new Ft(n.data),n.outlet,n.component,n)}var Aa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},bb="ngNavigationCancelingError";function ou(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Dr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=wb(!1,tn.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function wb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[bb]=!0,t.cancellationCode=e,t}function xR(n){return Ib(n)&&Dr(n.url)}function Ib(n){return!!n&&n[bb]}var kR=(n,e,t,i)=>ve(r=>(new ip(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),ip=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Nf(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Cs(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Cs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Cs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Cs(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Xf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Yf(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Nf(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Nf(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},au=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rs=class{constructor(e,t){this.component=e,this.route=t}};function PR(n,e,t){let i=n._root,r=e?e._root:null;return _a(i,r,t,[i.value])}function MR(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ns(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!t0(n)?n:e.get(n):i}function _a(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Cs(e);return n.children.forEach(o=>{OR(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>wa(c,t.getContext(o),r)),r}function OR(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=NR(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new au(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_a(n,e,c?c.children:null,i,r):_a(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Rs(c.outlet.component,o))}else o&&wa(e,c,r),r.canActivateChecks.push(new au(i)),s.component?_a(n,null,c?c.children:null,i,r):_a(n,null,t,i,r);return r}function NR(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rr(n.url,e.url)||!jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tp(n,e)||!jn(n.queryParams,e.queryParams);case"paramsChange":default:return!tp(n,e)}}function wa(n,e,t){let i=Cs(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?wa(o,e.children.getContext(s),t):wa(o,null,t):wa(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rs(e.outlet.component,r)):t.canDeactivateChecks.push(new Rs(null,r)):t.canDeactivateChecks.push(new Rs(null,r))}function Na(n){return typeof n=="function"}function VR(n){return typeof n=="boolean"}function FR(n){return n&&Na(n.canLoad)}function LR(n){return n&&Na(n.canActivate)}function UR(n){return n&&Na(n.canActivateChild)}function BR(n){return n&&Na(n.canDeactivate)}function jR(n){return n&&Na(n.canMatch)}function Eb(n){return n instanceof Yy||n?.name==="EmptyError"}var Wl=Symbol("INITIAL_VALUE");function Ms(){return st(n=>gs(n.map(e=>e.pipe(At(1),Yt(Wl)))).pipe(ve(e=>{for(let t of e)if(t!==!0){if(t===Wl)return Wl;if(t===!1||zR(t))return t}return!0}),ze(e=>e!==Wl),At(1)))}function zR(n){return Dr(n)||n instanceof Aa}function $R(n,e){return Kt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?J(ee(M({},t),{guardsResult:!0})):qR(o,i,r,n).pipe(Kt(c=>c&&VR(c)?GR(i,s,n,e):J(c)),ve(c=>ee(M({},t),{guardsResult:c})))})}function qR(n,e,t,i){return qe(n).pipe(Kt(r=>QR(r.component,r.route,t,e,i)),ji(r=>r!==!0,!0))}function GR(n,e,t,i){return qe(e).pipe(Bi(r=>vl(WR(r.route.parent,i),HR(r.route,i),YR(n,r.path,t),KR(n,r.route,t))),ji(r=>r!==!0,!0))}function HR(n,e){return n!==null&&e&&e(new Qf(n)),J(!0)}function WR(n,e){return n!==null&&e&&e(new Kf(n)),J(!0)}function KR(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return J(!0);let r=i.map(s=>Tr(()=>{let o=Pa(e)??t,c=Ns(s,o),l=LR(c)?c.canActivate(e,n):ln(o,()=>c(e,n));return Yi(l).pipe(ji())}));return J(r).pipe(Ms())}function YR(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>MR(o)).filter(o=>o!==null).map(o=>Tr(()=>{let c=o.guards.map(l=>{let h=Pa(o.node)??t,f=Ns(l,h),m=UR(f)?f.canActivateChild(i,n):ln(h,()=>f(i,n));return Yi(m).pipe(ji())});return J(c).pipe(Ms())}));return J(s).pipe(Ms())}function QR(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(c=>{let l=Pa(e)??r,h=Ns(c,l),f=BR(h)?h.canDeactivate(n,e,t,i):ln(l,()=>h(n,e,t,i));return Yi(f).pipe(ji())});return J(o).pipe(Ms())}function XR(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return J(!0);let s=r.map(o=>{let c=Ns(o,n),l=FR(c)?c.canLoad(e,t):ln(n,()=>c(e,t));return Yi(l)});return J(s).pipe(Ms(),Tb(i))}function Tb(n){return Hy(tt(e=>{if(typeof e!="boolean")throw ou(n,e)}),ve(e=>e===!0))}function JR(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return J(!0);let s=r.map(o=>{let c=Ns(o,n),l=jR(c)?c.canMatch(e,t):ln(n,()=>c(e,t));return Yi(l)});return J(s).pipe(Ms(),Tb(i))}var Sa=class{constructor(e){this.segmentGroup=e||null}},Ra=class extends Error{constructor(e){super(),this.urlTree=e}};function Ts(n){return Er(new Sa(n))}function ZR(n){return Er(new Be(4e3,!1))}function e1(n){return Er(wb(!1,tn.GuardRejected))}var rp=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return J(i);if(r.numberOfChildren>1||!r.children[_e])return ZR(`${e.redirectTo}`);r=r.children[_e]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:h,routeConfig:f,url:m,outlet:_,params:E,data:k,title:P}=r,D=ln(s,()=>c({params:E,data:k,queryParams:l,fragment:h,routeConfig:f,url:m,outlet:_,title:P}));if(D instanceof mi)throw new Ra(D);t=D}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Ra(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new mi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new xe(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Be(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},sp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t1(n,e,t,i,r){let s=Cb(n,e,t);return s.matched?(i=TR(e,i),JR(i,e,t,r).pipe(ve(o=>o===!0?s:M({},sp)))):J(s)}function Cb(n,e,t){if(e.path==="**")return n1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},sp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||JS)(t,n,e);if(!r)return M({},sp);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?M(M({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function n1(n){return{matched:!0,parameters:n.length>0?rb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function J0(n,e,t,i){return t.length>0&&s1(n,t,i)?{segmentGroup:new xe(e,r1(i,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&o1(n,t,i)?{segmentGroup:new xe(n.segments,i1(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function i1(n,e,t,i){let r={};for(let s of t)if(uu(n,e,s)&&!i[Cn(s)]){let o=new xe([],{});r[Cn(s)]=o}return M(M({},i),r)}function r1(n,e){let t={};t[_e]=e;for(let i of n)if(i.path===""&&Cn(i)!==_e){let r=new xe([],{});t[Cn(i)]=r}return t}function s1(n,e,t){return t.some(i=>uu(n,e,i)&&Cn(i)!==_e)}function o1(n,e,t){return t.some(i=>uu(n,e,i))}function uu(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function a1(n,e,t){return e.length===0&&!n.children[t]}var op=class{};function c1(n,e,t,i,r,s,o="emptyOnly"){return new ap(n,e,t,i,r,o,s).recognize()}var l1=31,ap=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new rp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Be(4002,`'${e.segmentGroup}'`)}recognize(){let e=J0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ve(({children:t,rootSnapshot:i})=>{let r=new en(i,t),s=new su("",r),o=_R(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ss([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,t).pipe(ve(i=>({children:i,rootSnapshot:t})),Ui(i=>{if(i instanceof Ra)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Sa?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ve(o=>o instanceof en?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return qe(s).pipe(Bi(o=>{let c=i.children[o],l=CR(t,o);return this.processSegmentGroup(e,l,c,o,r)}),e0((o,c)=>(o.push(...c),o)),lf(null),Zy(),Kt(o=>{if(o===null)return Ts(i);let c=Ab(o);return u1(c),J(c)}))}processSegment(e,t,i,r,s,o,c){return qe(t).pipe(Bi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,c).pipe(Ui(h=>{if(h instanceof Sa)return J(null);throw h}))),ji(l=>!!l),Ui(l=>{if(Eb(l))return a1(i,r,s)?J(new op):Ts(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,l){return Cn(i)!==o&&(o===_e||!uu(r,s,i))?Ts(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Ts(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:l,parameters:h,consumedSegments:f,positionalParamSegments:m,remainingSegments:_}=Cb(t,r,s);if(!l)return Ts(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>l1&&(this.allowRedirects=!1));let E=new Ss(s,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Z0(r),Cn(r),r.component??r._loadedComponent??null,r,eb(r)),k=ru(E,c,this.paramsInheritanceStrategy);E.params=Object.freeze(k.params),E.data=Object.freeze(k.data);let P=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,m,E,e);return this.applyRedirects.lineralizeSegments(r,P).pipe(Kt(D=>this.processSegment(e,i,t,D.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=t1(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(st(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(st(({routes:h})=>{let f=i._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:E}=l,k=new Ss(_,m,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Z0(i),Cn(i),i.component??i._loadedComponent??null,i,eb(i)),P=ru(k,o,this.paramsInheritanceStrategy);k.params=Object.freeze(P.params),k.data=Object.freeze(P.data);let{segmentGroup:D,slicedSegments:Y}=J0(t,_,E,h);if(Y.length===0&&D.hasChildren())return this.processChildren(f,h,D,k).pipe(ve(q=>new en(k,q)));if(h.length===0&&Y.length===0)return J(new en(k,[]));let Z=Cn(i)===s;return this.processSegment(f,h,D,Y,Z?_e:s,!0,k).pipe(ve(q=>new en(k,q instanceof en?[q]:[])))}))):Ts(t)))}getChildConfig(e,t,i){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):XR(e,t,i,this.urlSerializer).pipe(Kt(r=>r?this.configLoader.loadChildren(e,t).pipe(tt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):e1(t))):J({routes:[],injector:e})}};function u1(n){n.sort((e,t)=>e.value.outlet===_e?-1:t.value.outlet===_e?1:e.value.outlet.localeCompare(t.value.outlet))}function h1(n){let e=n.value.routeConfig;return e&&e.path===""}function Ab(n){let e=[],t=new Set;for(let i of n){if(!h1(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Ab(i.children);e.push(new en(i.value,r))}return e.filter(i=>!t.has(i))}function Z0(n){return n.data||{}}function eb(n){return n.resolve||{}}function d1(n,e,t,i,r,s){return Kt(o=>c1(n,e,t,i,o.extractedUrl,r,s).pipe(ve(({state:c,tree:l})=>ee(M({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function f1(n,e){return Kt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return J(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let h of Sb(l))o.add(h);let c=0;return qe(o).pipe(Bi(l=>s.has(l)?p1(l,i,n,e):(l.data=ru(l,l.parent,n).resolve,J(void 0))),tt(()=>c++),df(1),Kt(l=>c===o.size?J(t):Fi))})}function Sb(n){let e=n.children.map(t=>Sb(t)).flat();return[n,...e]}function p1(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!yb(r)&&(s[xa]=r.title),m1(s,n,e,i).pipe(ve(o=>(n._resolvedData=o,n.data=ru(n,n.parent,t).resolve,null)))}function m1(n,e,t,i){let r=Lf(n);if(r.length===0)return J({});let s={};return qe(r).pipe(Kt(o=>g1(n[o],e,t,i).pipe(ji(),tt(c=>{if(c instanceof Aa)throw ou(new xs,c);s[o]=c}))),df(1),Jy(s),Ui(o=>Eb(o)?Fi:Er(o)))}function g1(n,e,t,i){let r=Pa(e)??i,s=Ns(n,r),o=s.resolve?s.resolve(e,t):ln(r,()=>s(e,t));return Yi(o)}function Vf(n){return st(e=>{let t=n(e);return t?qe(t).pipe(ve(()=>e)):J(e)})}var Rb=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===_e);return i}getResolvedTitleForRoute(t){return t.data[xa]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>N(_1),providedIn:"root"})}}return n})(),_1=(()=>{class n extends Rb{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(O(H0))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Va=new K("",{providedIn:"root",factory:()=>({})}),v1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=me({type:n,selectors:[["ng-component"]],standalone:!0,features:[ge],decls:1,vars:0,template:function(i,r){i&1&&j(0,"router-outlet")},dependencies:[Oa],encapsulation:2})}}return n})();function up(n){let e=n.children&&n.children.map(up),t=e?ee(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_e&&(t.component=v1),t}var Da=new K(""),hp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(xl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Yi(t.loadComponent()).pipe(ve(Db),tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),_s(()=>{this.componentLoaders.delete(t)})),r=new nf(i,()=>new ue).pipe(tf());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return J({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=y1(i,this.compiler,t,this.onLoadEndListener).pipe(_s(()=>{this.childrenLoaders.delete(i)})),o=new nf(s,()=>new ue).pipe(tf());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function y1(n,e,t,i){return Yi(n.loadChildren()).pipe(ve(Db),Kt(r=>r instanceof u0||Array.isArray(r)?J(r):qe(e.compileModuleAsync(r))),ve(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(Da,[],{optional:!0,self:!0}).flat()),{routes:o.map(up),injector:s}}))}function b1(n){return n&&typeof n=="object"&&"default"in n}function Db(n){return b1(n)?n.default:n}var dp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>N(w1),providedIn:"root"})}}return n})(),w1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xb=new K(""),kb=new K("");function I1(n,e,t){let i=n.get(kb),r=n.get(he);return n.get(re).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=r.startViewTransition(()=>(s(),E1(n))),{onViewTransitionCreated:l}=i;return l&&ln(n,()=>l({transition:c,from:e,to:t})),o})}function E1(n){return new Promise(e=>{Ln({read:()=>setTimeout(e)},{injector:n})})}var T1=new K(""),fp=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ue,this.transitionAbortSubject=new ue,this.configLoader=N(hp),this.environmentInjector=N(li),this.urlSerializer=N(ka),this.rootContexts=N(Ma),this.location=N(di),this.inputBindingEnabled=N(lu,{optional:!0})!==null,this.titleStrategy=N(Rb),this.options=N(Va,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(dp),this.createViewTransition=N(xb,{optional:!0}),this.navigationErrorHandler=N(T1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Hf(r)),i=r=>this.events.next(new Wf(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ee(M(M({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Ft({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ba,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ze(s=>s.id!==0),ve(s=>ee(M({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),st(s=>{let o=!1,c=!1;return J(s).pipe(st(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",tn.SupersededByNewNavigation),Fi;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ee(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!h&&f!=="reload"){let m="";return this.events.next(new Wi(l.id,this.urlSerializer.serialize(l.rawUrl),m,Zl.IgnoredSameUrlNavigation)),l.resolve(!1),Fi}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return J(l).pipe(st(m=>{let _=this.transitions?.getValue();return this.events.next(new ks(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?Fi:Promise.resolve(m)}),d1(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ee(M({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let _=new eu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:_,source:E,restoredState:k,extras:P}=l,D=new ks(m,this.urlSerializer.serialize(_),E,k);this.events.next(D);let Y=_b(this.rootComponentType).snapshot;return this.currentTransition=s=ee(M({},l),{targetSnapshot:Y,urlAfterRedirects:_,extras:ee(M({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,J(s)}else{let m="";return this.events.next(new Wi(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Zl.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Fi}}),tt(l=>{let h=new zf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ve(l=>(this.currentTransition=s=ee(M({},l),{guards:PR(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),$R(this.environmentInjector,l=>this.events.next(l)),tt(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw ou(this.urlSerializer,l.guardsResult);let h=new $f(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ze(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",tn.GuardRejected),!1)),Vf(l=>{if(l.guards.canActivateChecks.length)return J(l).pipe(tt(h=>{let f=new qf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),st(h=>{let f=!1;return J(h).pipe(f1(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",tn.NoDataFromResolver)}}))}),tt(h=>{let f=new Gf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),Vf(l=>{let h=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(tt(_=>{f.component=_}),ve(()=>{})));for(let _ of f.children)m.push(...h(_));return m};return gs(h(l.targetSnapshot.root)).pipe(lf(null),At(1))}),Vf(()=>this.afterPreactivation()),st(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return f?qe(f).pipe(ve(()=>s)):J(s)}),ve(l=>{let h=SR(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ee(M({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),tt(()=>{this.events.next(new Ta)}),kR(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),At(1),tt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new An(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Lt(this.transitionAbortSubject.pipe(tt(l=>{throw l}))),_s(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",tn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ui(l=>{if(c=!0,Ib(l))this.events.next(new pi(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),xR(l)?this.events.next(new Ps(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let h=new Ea(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let f=ln(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(f instanceof Aa){let{message:m,cancellationCode:_}=ou(this.urlSerializer,f);this.events.next(new pi(s.id,this.urlSerializer.serialize(s.extractedUrl),m,_)),this.events.next(new Ps(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(h);let m=t.errorHandler(l);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Fi}))}))}cancelNavigationTransition(t,i,r){let s=new pi(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C1(n){return n!==ba}var A1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>N(S1),providedIn:"root"})}}return n})(),cp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},S1=(()=>{class n extends cp{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ui(n)))(r||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pb=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>N(R1),providedIn:"root"})}}return n})(),R1=(()=>{class n extends Pb{constructor(){super(...arguments),this.location=N(di),this.urlSerializer=N(ka),this.options=N(Va,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(dp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=_b(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof ks)this.stateMemento=this.createStateMemento();else if(t instanceof Wi)this.rawUrlTree=i.initialUrl;else if(t instanceof eu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Ta?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof pi&&(t.code===tn.GuardRejected||t.code===tn.NoDataFromResolver)?this.restoreHistory(i):t instanceof Ea?this.restoreHistory(i,!0):t instanceof An&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof mi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=M(M({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ui(n)))(r||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),va=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(va||{});function Mb(n,e){n.events.pipe(ze(t=>t instanceof An||t instanceof pi||t instanceof Ea||t instanceof Wi),ve(t=>t instanceof An||t instanceof Wi?va.COMPLETE:(t instanceof pi?t.code===tn.Redirect||t.code===tn.SupersededByNewNavigation:!1)?va.REDIRECTING:va.FAILED),ze(t=>t!==va.REDIRECTING),At(1)).subscribe(()=>{e()})}function D1(n){throw n}var x1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},k1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},at=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=N(Sl),this.stateManager=N(Pb),this.options=N(Va,{optional:!0})||{},this.pendingTasks=N(wl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(fp),this.urlSerializer=N(ka),this.location=N(di),this.urlHandlingStrategy=N(dp),this._events=new ue,this.errorHandler=this.options.errorHandler||D1,this.navigated=!1,this.routeReuseStrategy=N(A1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(Da,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(lu,{optional:!0}),this.eventsSubscription=new cn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof pi&&i.code!==tn.Redirect&&i.code!==tn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof An)this.navigated=!0;else if(i instanceof Ps){let o=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=M({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||C1(r.source)},o);this.scheduleNavigation(c,ba,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}M1(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ba,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=M({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(up),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=r?r.snapshot:this.routerState.snapshot.root;m=fb(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return pb(m,t,f,h??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Dr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ba,null,i)}navigate(t,i={skipLocationChange:!1}){return P1(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=M({},x1):i===!1?r=M({},k1):r=i,Dr(t))return W0(this.currentUrlTree,t,r);let s=this.parseUrl(t);return W0(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,h;o?(c=o.resolve,l=o.reject,h=o.promise):h=new Promise((m,_)=>{c=m,l=_});let f=this.pendingTasks.add();return Mb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P1(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Be(4008,!1)}function M1(n){return!(n instanceof Ta)&&!(n instanceof Ps)}var Os=(()=>{class n{constructor(t,i,r,s,o,c){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof An&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Dr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:a0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Dr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(F(at),F(Ki),r0("tabindex"),F($i),F(Re),F(aa))}}static{this.\u0275dir=Se({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Q("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Ze("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",jt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",jt],replaceUrl:[2,"replaceUrl","replaceUrl",jt],routerLink:"routerLink"},standalone:!0,features:[In,Qt]})}}return n})(),Ob=(()=>{class n{get isActive(){return this._isActive}constructor(t,i,r,s,o){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ne,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof An&&this.update()})}ngAfterContentInit(){J(this.links.changes,J(null)).pipe(Qo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=qe(t).pipe(Qo()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=O1(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let s=r.urlTree;return s?t.isActive(s,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(i){return new(i||n)(F(at),F(Re),F($i),F(Bt),F(Os,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,s){if(i&1&&bs(s,Os,5),i&2){let o;_t(o=vt())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Qt]})}}return n})();function O1(n){return!!n.paths}var cu=class{};var N1=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ze(t=>t instanceof An),Bi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=_f(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return qe(r).pipe(Qo())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=J(null);let s=r.pipe(Kt(o=>o===null?J(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return qe([s,o]).pipe(Qo())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(O(at),O(xl),O(li),O(cu),O(hp))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nb=new K(""),V1=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof An?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Wi&&t.code===Zl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new tu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){El()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function Vb(n,...e){return Ot([{provide:Da,multi:!0,useValue:n},[],{provide:Ki,useFactory:Fb,deps:[at]},{provide:Dl,multi:!0,useFactory:Lb},e.map(t=>t.\u0275providers)])}function Fb(n){return n.routerState.root}function Fa(n,e){return{\u0275kind:n,\u0275providers:e}}function Lb(){let n=N(Pe);return e=>{let t=n.get(Ar);if(e!==t.components[0])return;let i=n.get(at),r=n.get(Ub);n.get(pp)===1&&i.initialNavigation(),n.get(Bb,null,ff.Optional)?.setUpPreloading(),n.get(Nb,null,ff.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Ub=new K("",{factory:()=>new ue}),pp=new K("",{providedIn:"root",factory:()=>1});function F1(){return Fa(2,[{provide:pp,useValue:0},{provide:yf,multi:!0,deps:[Pe],useFactory:e=>{let t=e.get(w0,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(at),s=e.get(Ub);Mb(r,()=>{i(!0)}),e.get(fp).afterPreactivation=()=>(i(!0),s.closed?J(void 0):s),r.initialNavigation()}))}}])}function L1(){return Fa(3,[{provide:yf,multi:!0,useFactory:()=>{let e=N(at);return()=>{e.setUpLocationChangeListener()}}},{provide:pp,useValue:2}])}var Bb=new K("");function U1(n){return Fa(0,[{provide:Bb,useExisting:N1},{provide:cu,useExisting:n}])}function B1(){return Fa(8,[X0,{provide:lu,useExisting:X0}])}function j1(n){let e=[{provide:xb,useValue:I1},{provide:kb,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return Fa(9,e)}var tb=new K("ROUTER_FORROOT_GUARD"),z1=[di,{provide:ka,useClass:xs},at,Ma,{provide:Ki,useFactory:Fb,deps:[at]},hp,[]],hu=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[z1,[],{provide:Da,multi:!0,useValue:t},{provide:tb,useFactory:H1,deps:[[at,new ot,new n0]]},{provide:Va,useValue:i||{}},i?.useHash?q1():G1(),$1(),i?.preloadingStrategy?U1(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?W1(i):[],i?.bindToComponentInputs?B1().\u0275providers:[],i?.enableViewTransitions?j1().\u0275providers:[],K1()]}}static forChild(t){return{ngModule:n,providers:[{provide:Da,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(O(tb,8))}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({})}}return n})();function $1(){return{provide:Nb,useFactory:()=>{let n=N(S0),e=N(re),t=N(Va),i=N(fp),r=N(ka);return t.scrollOffset&&n.setOffset(t.scrollOffset),new V1(r,i,n,e,t)}}}function q1(){return{provide:aa,useClass:E0}}function G1(){return{provide:aa,useClass:I0}}function H1(n){return"guarded"}function W1(n){return[n.initialNavigation==="disabled"?L1().\u0275providers:[],n.initialNavigation==="enabledBlocking"?F1().\u0275providers:[]]}var nb=new K("");function K1(){return[{provide:nb,useFactory:Lb},{provide:Dl,multi:!0,useExisting:nb}]}var zb=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Y1=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,h=l?n[r+2]:0,f=s>>2,m=(s&3)<<4|c>>4,_=(c&15)<<2|h>>6,E=h&63;l||(E=64,o||(_=64)),i.push(t[f],t[m],t[_],t[E])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Y1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let m=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||m==null)throw new _p;let _=s<<2|c>>4;if(i.push(_),h!==64){let E=c<<4&240|h>>2;if(i.push(E),m!==64){let k=h<<6&192|m;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_p=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Q1=function(n){let e=zb(n);return $b.encodeByteArray(e,!0)},La=function(n){return Q1(n).replace(/\./g,"")},yp=function(n){try{return $b.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function X1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var J1=()=>X1().__FIREBASE_DEFAULTS__,Z1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&yp(n[1]);return e&&JSON.parse(e)},fu=()=>{try{return J1()||Z1()||eD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bp=n=>{var e,t;return(t=(e=fu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pu=n=>{let e=bp(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},wp=()=>{var n;return(n=fu())===null||n===void 0?void 0:n.config},Ip=n=>{var e;return(e=fu())===null||e===void 0?void 0:e[`_${n}`]};var du=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function mu(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[La(JSON.stringify(t)),La(JSON.stringify(o)),""].join(".")}function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function tD(){var n;let e=(n=fu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kb(){let n=pt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Yb(){return!tD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ep(){try{return typeof indexedDB=="object"}catch{return!1}}function Qb(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var nD="FirebaseError",Nt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=nD,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gi.prototype.create)}},gi=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?iD(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Nt(r,c,i)}};function iD(n,e){return n.replace(rD,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var rD=/\{\$([^}]+)}/g;function Xb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xr(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(jb(s)&&jb(o)){if(!xr(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function jb(n){return n!==null&&typeof n=="object"}function Ua(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vs(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Fs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Jb(n,e){let t=new vp(n,e);return t.subscribe.bind(t)}var vp=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");sD(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=gp),r.error===void 0&&(r.error=gp),r.complete===void 0&&(r.complete=gp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sD(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gp(){}var AU=4*60*60*1e3;function Le(n){return n&&n._delegate?n._delegate:n}var zt=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var kr="[DEFAULT]";var Tp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new du;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aD(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function oD(n){return n===kr?void 0:n}function aD(n){return n.instantiationMode==="EAGER"}var gu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Tp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var cD=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),lD={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},uD=ye.INFO,hD={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},dD=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=hD[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qi=class{constructor(e){this.name=e,this._logLevel=uD,this._logHandler=dD,this._userLogHandler=null,cD.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var fD=(n,e)=>e.some(t=>n instanceof t),Zb,ew;function pD(){return Zb||(Zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mD(){return ew||(ew=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tw=new WeakMap,Ap=new WeakMap,nw=new WeakMap,Cp=new WeakMap,Rp=new WeakMap;function gD(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(zn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&tw.set(t,n)}).catch(()=>{}),Rp.set(e,n),e}function _D(n){if(Ap.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ap.set(n,e)}var Sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iw(n){Sp=n(Sp)}function vD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(_u(this),e,...t);return nw.set(i,e.sort?e.sort():[e]),zn(i)}:mD().includes(n)?function(...e){return n.apply(_u(this),e),zn(tw.get(this))}:function(...e){return zn(n.apply(_u(this),e))}}function yD(n){return typeof n=="function"?vD(n):(n instanceof IDBTransaction&&_D(n),fD(n,pD())?new Proxy(n,Sp):n)}function zn(n){if(n instanceof IDBRequest)return gD(n);if(Cp.has(n))return Cp.get(n);let e=yD(n);return e!==n&&(Cp.set(n,e),Rp.set(e,n)),e}var _u=n=>Rp.get(n);function sw(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=zn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(zn(o.result),l.oldVersion,l.newVersion,zn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var bD=["get","getKey","getAll","getAllKeys","count"],wD=["put","add","delete","clear"],Dp=new Map;function rw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dp.get(e))return Dp.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=wD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||bD.includes(t)))return;let s=function(o,...c){return v(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),h=l.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),r&&l.done]))[0]})};return Dp.set(e,s),s}iw(n=>ee(M({},n),{get:(e,t,i)=>rw(e,t)||n.get(e,t,i),has:(e,t)=>!!rw(e,t)||n.has(e,t)}));var kp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ID(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function ID(n){let e=n.getComponent();return e?.type==="VERSION"}var Pp="@firebase/app",ow="0.10.11";var _i=new Qi("@firebase/app"),ED="@firebase/app-compat",TD="@firebase/analytics-compat",CD="@firebase/analytics",AD="@firebase/app-check-compat",SD="@firebase/app-check",RD="@firebase/auth",DD="@firebase/auth-compat",xD="@firebase/database",kD="@firebase/database-compat",PD="@firebase/functions",MD="@firebase/functions-compat",OD="@firebase/installations",ND="@firebase/installations-compat",VD="@firebase/messaging",FD="@firebase/messaging-compat",LD="@firebase/performance",UD="@firebase/performance-compat",BD="@firebase/remote-config",jD="@firebase/remote-config-compat",zD="@firebase/storage",$D="@firebase/storage-compat",qD="@firebase/firestore",GD="@firebase/vertexai-preview",HD="@firebase/firestore-compat",WD="firebase",KD="10.13.2";var Mp="[DEFAULT]",YD={[Pp]:"fire-core",[ED]:"fire-core-compat",[CD]:"fire-analytics",[TD]:"fire-analytics-compat",[SD]:"fire-app-check",[AD]:"fire-app-check-compat",[RD]:"fire-auth",[DD]:"fire-auth-compat",[xD]:"fire-rtdb",[kD]:"fire-rtdb-compat",[PD]:"fire-fn",[MD]:"fire-fn-compat",[OD]:"fire-iid",[ND]:"fire-iid-compat",[VD]:"fire-fcm",[FD]:"fire-fcm-compat",[LD]:"fire-perf",[UD]:"fire-perf-compat",[BD]:"fire-rc",[jD]:"fire-rc-compat",[zD]:"fire-gcs",[$D]:"fire-gcs-compat",[qD]:"fire-fst",[HD]:"fire-fst-compat",[GD]:"fire-vertex","fire-js":"fire-js",[WD]:"fire-js-all"};var Ba=new Map,QD=new Map,Op=new Map;function aw(n,e){try{n.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $n(n){let e=n.name;if(Op.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;Op.set(e,n);for(let t of Ba.values())aw(t,n);for(let t of QD.values())aw(t,n);return!0}function Pr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qn(n){return n.settings!==void 0}var XD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new gi("app","Firebase",XD);var Np=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}};var Gn=KD;function Lp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Mp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Xi.create("bad-app-name",{appName:String(r)});if(t||(t=wp()),!t)throw Xi.create("no-options");let s=Ba.get(r);if(s){if(xr(t,s.options)&&xr(i,s.config))return s;throw Xi.create("duplicate-app",{appName:r})}let o=new gu(r);for(let l of Op.values())o.addComponent(l);let c=new Np(t,i,o);return Ba.set(r,c),c}function Ji(n=Mp){let e=Ba.get(n);if(!e&&n===Mp&&wp())return Lp();if(!e)throw Xi.create("no-app",{appName:n});return e}function vu(){return Array.from(Ba.values())}function Ge(n,e,t){var i;let r=(i=YD[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(c.join(" "));return}$n(new zt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var JD="firebase-heartbeat-database",ZD=1,ja="firebase-heartbeat-store",xp=null;function hw(){return xp||(xp=sw(JD,ZD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ja)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xi.create("idb-open",{originalErrorMessage:n.message})})),xp}function ex(n){return v(this,null,function*(){try{let t=(yield hw()).transaction(ja),i=yield t.objectStore(ja).get(dw(n));return yield t.done,i}catch(e){if(e instanceof Nt)_i.warn(e.message);else{let t=Xi.create("idb-get",{originalErrorMessage:e?.message});_i.warn(t.message)}}})}function cw(n,e){return v(this,null,function*(){try{let i=(yield hw()).transaction(ja,"readwrite");yield i.objectStore(ja).put(e,dw(n)),yield i.done}catch(t){if(t instanceof Nt)_i.warn(t.message);else{let i=Xi.create("idb-set",{originalErrorMessage:t?.message});_i.warn(i.message)}}})}function dw(n){return`${n.name}!${n.options.appId}`}var tx=1024,nx=30*24*60*60*1e3,Vp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Fp(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=nx}),this._storage.overwrite(this._heartbeatsCache))}catch(i){_i.warn(i)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=lw(),{heartbeatsToSend:i,unsentEntries:r}=ix(this._heartbeatsCache.heartbeats),s=La(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return _i.warn(t),""}})}};function lw(){return new Date().toISOString().substring(0,10)}function ix(n,e=tx){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),uw(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),uw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Fp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Ep()?Qb().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ex(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return cw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return cw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function uw(n){return La(JSON.stringify({version:2,heartbeats:n})).length}function rx(n){$n(new zt("platform-logger",e=>new kp(e),"PRIVATE")),$n(new zt("heartbeat",e=>new Vp(e),"PRIVATE")),Ge(Pp,ow,n),Ge(Pp,ow,"esm2017"),Ge("fire-js","")}rx("");var sx="firebase",ox="10.13.2";Ge(sx,ox,"app");var vi=new ws("ANGULARFIRE2_VERSION");function Us(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Or=(n,e)=>{let t=e?[e]:vu(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Zi=class{constructor(){return Or(ax)}},ax="app-check";function Ls(){}var yu=class{zone;delegate;constructor(e,t=Ky){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Up=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ls,{},Ls,Ls)),t.pipe(tt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},er=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new yu(Zone.current)),this.insideAngular=t.run(()=>new yu(Zone.current,Wy)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(O(re))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bu(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function cx(n){return bu().ngZone.runOutsideAngular(()=>n())}function Mr(n){return bu().ngZone.run(()=>n())}function lx(n){return ux(bu())(n)}function ux(n){return function(t){return t=t.lift(new Up(n.ngZone)),t.pipe(of(n.outsideAngular),sf(n.insideAngular))}}var hx=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Mr(()=>n.apply(void 0,i))},ke=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=Mr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ls,{},Ls,Ls))),i[s]=hx(i[s],t));let r=cx(()=>n.apply(this,i));if(!e)if(r instanceof Wt){let s=bu();return r.pipe(of(s.outsideAngular),sf(s.insideAngular))}else return Mr(()=>r);return r instanceof Wt?r.pipe(lx):r instanceof Promise?Mr(()=>new Promise((s,o)=>r.then(c=>Mr(()=>s(c)),c=>Mr(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Mr(()=>r)};var Sn=class{constructor(e){return e}},yi=class{constructor(){return vu()}};function dx(n){return n&&n.length===1?n[0]:new Sn(Ji())}var Bp=new K("angularfire2._apps"),fx={provide:Sn,useFactory:dx,deps:[[new ot,Bp]]},px={provide:yi,deps:[[new ot,Bp]]};function mx(n){return(e,t)=>{let i=t.get(bn);Ge("angularfire",vi.full,"core"),Ge("angularfire",vi.full,"app"),Ge("angular",f0.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Sn(r)}}function fw(n,...e){return Ot([fx,px,{provide:Bp,useFactory:mx(n),multi:!0,deps:[re,Pe,er,...e]}])}var pw=ke(Lp,!0);function Pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Mw=Pw,Ow=new gi("auth","Firebase",Pw());var Au=new Qi("@firebase/auth");function gx(n,...e){Au.logLevel<=ye.WARN&&Au.warn(`Auth (${Gn}): ${n}`,...e)}function Iu(n,...e){Au.logLevel<=ye.ERROR&&Au.error(`Auth (${Gn}): ${n}`,...e)}function Wn(n,...e){throw cm(n,...e)}function Nr(n,...e){return cm(n,...e)}function Nw(n,e,t){let i=Object.assign(Object.assign({},Mw()),{[e]:t});return new gi("auth","Firebase",i).create(e,{appName:n.name})}function nr(n){return Nw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cm(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Ow.create(n,...e)}function ce(n,e,...t){if(!n)throw cm(e,...t)}function bi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Iu(e),new Error(e)}function ir(n,e){n||bi(e)}function qp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _x(){return mw()==="http:"||mw()==="https:"}function mw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function vx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_x()||Hb()||"connection"in navigator)?navigator.onLine:!0}function yx(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=qb()||Wb()}get(){return vx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lm(n,e){ir(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Su=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var bx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var wx=new Vr(3e4,6e4);function Lr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function rr(s,o,c,l){return v(this,arguments,function*(n,e,t,i,r={}){return Vw(n,r,()=>v(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let m=Ua(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:_},h);return Gb()||(E.referrerPolicy="no-referrer"),Su.fetch()(Fw(n,n.config.apiHost,t,m),E)}))})}function Vw(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},bx),e);try{let r=new Gp(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw wu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw wu(n,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Nw(n,f,h);Wn(n,f)}}catch(r){if(r instanceof Nt)throw r;Wn(n,"network-request-failed",{message:String(r)})}})}function Fu(s,o,c,l){return v(this,arguments,function*(n,e,t,i,r={}){let h=yield rr(n,e,t,i,r);return"mfaPendingCredential"in h&&Wn(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function Fw(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?lm(n.config,r):`${n.config.apiScheme}://${r}`}function Ix(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Gp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Nr(this.auth,"network-request-failed")),wx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function wu(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Nr(n,e,i);return r.customData._tokenResponse=t,r}function gw(n){return n!==void 0&&n.enterprise!==void 0}var Hp=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ix(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Ex(n,e){return v(this,null,function*(){return rr(n,"GET","/v2/recaptchaConfig",Lr(n,e))})}function Tx(n,e){return v(this,null,function*(){return rr(n,"POST","/v1/accounts:delete",e)})}function Lw(n,e){return v(this,null,function*(){return rr(n,"POST","/v1/accounts:lookup",e)})}function za(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function um(n,e=!1){return v(this,null,function*(){let t=Le(n),i=yield t.getIdToken(e),r=hm(i);ce(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:za(jp(r.auth_time)),issuedAtTime:za(jp(r.iat)),expirationTime:za(jp(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function jp(n){return Number(n)*1e3}function hm(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{let r=yp(t);return r?JSON.parse(r):(Iu("Failed to decode base64 JWT payload"),null)}catch(r){return Iu("Caught error parsing JWT payload as JSON",r?.toString()),null}}function _w(n){let e=hm(n);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qa(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Nt&&Cx(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function Cx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Wp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ga=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ru(n){return v(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield qa(n,Lw(t,{idToken:i}));ce(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Uw(s.providerUserInfo):[],c=Ax(n.providerData,o),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=l?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ga(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function dm(n){return v(this,null,function*(){let e=Le(n);yield Ru(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ax(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Uw(n){return n.map(e=>{var{providerId:t}=e,i=rf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Sx(n,e){return v(this,null,function*(){let t=yield Vw(n,{},()=>v(this,null,function*(){let i=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=Fw(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Su.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Rx(n,e){return v(this,null,function*(){return rr(n,"POST","/v2/accounts:revokeToken",Lr(n,e))})}var $a=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");let t=_w(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield Sx(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(ce(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ce(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return bi("not implemented")}};function tr(n,e){ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bs=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=rf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ga(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield qa(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return um(this,e)}reload(){return dm(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ru(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(qn(this.auth.app))return Promise.reject(nr(this.auth));let e=yield this.getIdToken();return yield qa(this,Tx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,h,f;let m=(i=t.displayName)!==null&&i!==void 0?i:void 0,_=(r=t.email)!==null&&r!==void 0?r:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,D=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,Y=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Z=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:q,emailVerified:ie,isAnonymous:De,providerData:fe,stsTokenManager:T}=t;ce(q&&T,e,"internal-error");let g=$a.fromJSON(this.name,T);ce(typeof q=="string",e,"internal-error"),tr(m,e.name),tr(_,e.name),ce(typeof ie=="boolean",e,"internal-error"),ce(typeof De=="boolean",e,"internal-error"),tr(E,e.name),tr(k,e.name),tr(P,e.name),tr(D,e.name),tr(Y,e.name),tr(Z,e.name);let y=new n({uid:q,auth:e,email:_,emailVerified:ie,displayName:m,isAnonymous:De,photoURL:k,phoneNumber:E,tenantId:P,stsTokenManager:g,createdAt:Y,lastLoginAt:Z});return fe&&Array.isArray(fe)&&(y.providerData=fe.map(I=>Object.assign({},I))),D&&(y._redirectEventId=D),y}static _fromIdTokenResponse(e,t,i=!1){return v(this,null,function*(){let r=new $a;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Ru(s),s})}static _fromGetAccountInfoResponse(e,t,i){return v(this,null,function*(){let r=t.users[0];ce(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Uw(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new $a;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ga(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,h),l})}};var vw=new Map;function wi(n){ir(n instanceof Function,"Expected a class definition");let e=vw.get(n);return e?(ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vw.set(n,e),e)}var Dx=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,i){return v(this,null,function*(){this.storage[t]=i})}_get(t){return v(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Kp=Dx;function Eu(n,e,t){return`firebase:${n}:${e}:${t}`}var Du=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Eu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Eu("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return v(this,null,function*(){if(!t.length)return new n(wi(Kp),e,i);let r=(yield Promise.all(t.map(h=>v(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||wi(Kp),o=Eu(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let m=Bs._fromJSON(e,f);h!==s&&(c=m),s=h;break}}catch{}let l=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>v(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function yw(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gw(e))return"Blackberry";if(Hw(e))return"Webos";if(jw(e))return"Safari";if((e.includes("chrome/")||zw(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Bw(n=pt()){return/firefox\//i.test(n)}function jw(n=pt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zw(n=pt()){return/crios\//i.test(n)}function $w(n=pt()){return/iemobile/i.test(n)}function qw(n=pt()){return/android/i.test(n)}function Gw(n=pt()){return/blackberry/i.test(n)}function Hw(n=pt()){return/webos/i.test(n)}function fm(n=pt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xx(n=pt()){var e;return fm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kx(){return Kb()&&document.documentMode===10}function Ww(n=pt()){return fm(n)||qw(n)||Hw(n)||Gw(n)||/windows phone/i.test(n)||$w(n)}function Kw(n,e=[]){let t;switch(n){case"Browser":t=yw(pt());break;case"Worker":t=`${yw(pt())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gn}/${i}`}var Yp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function Px(t){return v(this,arguments,function*(n,e={}){return rr(n,"GET","/v2/passwordPolicy",Lr(n,e))})}var Mx=6,Qp=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Mx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Xp=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xu(this),this.idTokenSubscription=new xu(this),this.beforeStateQueue=new Yp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wi(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Du.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield Lw(this,{idToken:e}),i=yield Bs._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(qn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ru(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=yx()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(qn(this.app))return Promise.reject(nr(this));let t=e?Le(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return qn(this.app)?Promise.reject(nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qn(this.app)?Promise.reject(nr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(wi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Px(this),t=new Qp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gi("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Rx(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&wi(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=yield Du.create(this,[wi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&gx(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function js(n){return Le(n)}var xu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jb(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Lu={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ox(n){Lu=n}function Yw(n){return Lu.loadJS(n)}function Nx(){return Lu.recaptchaEnterpriseScript}function Vx(){return Lu.gapiScript}function Qw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Fx="recaptcha-enterprise",Lx="NO_RECAPTCHA",Jp=class{constructor(e){this.type=Fx,this.auth=js(e)}verify(e="verify",t=!1){return v(this,null,function*(){function i(s){return v(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>v(this,null,function*(){Ex(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new Hp(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;gw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(Lx)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&gw(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Nx();l.length!==0&&(l+=c),Yw(l).then(()=>{r(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function bw(n,e,t,i=!1){return v(this,null,function*(){let r=new Jp(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function ww(n,e,t,i){return v(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield bw(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield bw(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function pm(n,e){let t=Pr(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(xr(s,e??{}))return r;Wn(r,"already-initialized")}return t.initialize({options:e})}function Ux(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(wi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Uu(n,e,t){let i=js(n);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Xw(e),{host:o,port:c}=Bx(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||jx()}function Xw(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Bx(n){let e=Xw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Iw(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:Iw(o)}}}function Iw(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function jx(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ha=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,t){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}};function zx(n,e){return v(this,null,function*(){return rr(n,"POST","/v1/accounts:signUp",e)})}function $x(n,e){return v(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithPassword",Lr(n,e))})}function qx(n,e){return v(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})}function Gx(n,e){return v(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})}var Wa=class n extends Ha{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ww(e,t,"signInWithPassword",$x);case"emailLink":return qx(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ww(e,i,"signUpPassword",zx);case"emailLink":return Gx(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function zp(n,e){return v(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithIdp",Lr(n,e))})}function Hx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Wx(n){let e=Vs(Fs(n)).link,t=e?Vs(Fs(e)).deep_link_id:null,i=Vs(Fs(n)).deep_link_id;return(i?Vs(Fs(i)).link:null)||i||t||e||n}var ku=class n{constructor(e){var t,i,r,s,o,c;let l=Vs(Fs(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,m=Hx((r=l.mode)!==null&&r!==void 0?r:null);ce(h&&f&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=Wx(e);try{return new n(t)}catch{return null}}};var Jw=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Wa._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=ku.parseLink(i);return ce(r,"argument-error"),Wa._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Pu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Zp=class extends Pu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ka=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return v(this,null,function*(){let s=yield Bs._fromIdTokenResponse(e,i,r),o=Ew(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return v(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Ew(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Ew(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var em=class n extends Nt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Zw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?em._fromErrorAndOperation(n,s,e,i):s})}function Kx(n,e,t=!1){return v(this,null,function*(){let i=yield qa(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ka._forOperation(n,"link",i)})}function Yx(n,e,t=!1){return v(this,null,function*(){let{auth:i}=n;if(qn(i.app))return Promise.reject(nr(i));let r="reauthenticate";try{let s=yield qa(n,Zw(i,r,e,n),t);ce(s.idToken,i,"internal-error");let o=hm(s.idToken);ce(o,i,"internal-error");let{sub:c}=o;return ce(n.uid===c,i,"user-mismatch"),Ka._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Wn(i,"user-mismatch"),s}})}function eI(n,e,t=!1){return v(this,null,function*(){if(qn(n.app))return Promise.reject(nr(n));let i="signIn",r=yield Zw(n,i,e),s=yield Ka._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function mm(n,e){return v(this,null,function*(){return eI(js(n),e)})}function Qx(n){return v(this,null,function*(){let e=js(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function gm(n,e,t){return qn(n.app)?Promise.reject(nr(n)):mm(Le(n),Jw.credential(e,t)).catch(i=>v(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&Qx(n),i}))}function Qa(n,e,t,i){return Le(n).onIdTokenChanged(e,t,i)}function _m(n,e,t){return Le(n).beforeAuthStateChanged(e,t)}function vm(n){return Le(n).signOut()}var Mu="__sak";var Ou=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mu,"1"),this.storage.removeItem(Mu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Xx=1e3,Jx=10,Zx=(()=>{class n extends Ou{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ww(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,h)=>{this.notifyListeners(c,h)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);kx()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Jx):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return v(this,null,function*(){yield Vi(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return v(this,null,function*(){let i=yield Vi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return v(this,null,function*(){yield Vi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),tI=Zx;var ek=(()=>{class n extends Ou{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),ym=ek;function tk(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var nk=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>v(this,null,function*(){return f(i.origin,o)})),h=yield tk(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function nI(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var tm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return v(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let h=nI("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(m){let _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Hn(){return window}function ik(n){Hn().location.href=n}function iI(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}function rk(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function sk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ok(){return iI()?self:null}var rI="firebaseLocalStorageDb",ak=1,Nu="firebaseLocalStorage",sI="fbase_key",Fr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Bu(n,e){return n.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function ck(){let n=indexedDB.deleteDatabase(rI);return new Fr(n).toPromise()}function nm(){let n=indexedDB.open(rI,ak);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Nu,{keyPath:sI})}catch(r){t(r)}}),n.addEventListener("success",()=>v(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Nu)?e(i):(i.close(),yield ck(),e(yield nm()))}))})}function Tw(n,e,t){return v(this,null,function*(){let i=Bu(n,!0).put({[sI]:e,value:t});return new Fr(i).toPromise()})}function lk(n,e){return v(this,null,function*(){let t=Bu(n,!1).get(e),i=yield new Fr(t).toPromise();return i===void 0?null:i.value})}function Cw(n,e){let t=Bu(n,!0).delete(e);return new Fr(t).toPromise()}var uk=800,hk=3,dk=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield nm(),this.db)})}_withRetries(t){return v(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>hk)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return iI()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=nk._getInstance(ok()),this.receiver._subscribe("keyChanged",(t,i)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,i;if(this.activeServiceWorker=yield rk(),!this.activeServiceWorker)return;this.sender=new tm(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||sk()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield nm();return yield Tw(t,Mu,"1"),yield Cw(t,Mu),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>Tw(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let i=yield this._withRetries(r=>lk(r,t));return this.localCache[t]=i,i})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>Cw(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=Bu(s,!1).getAll();return new Fr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),oI=dk;var yB=Qw("rcb"),bB=new Vr(3e4,6e4);function fk(n,e){return e?wi(e):(ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ya=class extends Ha{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zp(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function pk(n){return eI(n.auth,new Ya(n),n.bypassAuthState)}function mk(n){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),Yx(t,new Ya(n),n.bypassAuthState)}function gk(n){return v(this,null,function*(){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),Kx(t,new Ya(n),n.bypassAuthState)})}var im=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return gk;case"reauthViaPopup":case"reauthViaRedirect":return mk;default:Wn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var wB=new Vr(2e3,1e4);var _k="pendingRedirect",Tu=new Map,rm=class n extends im{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return v(this,null,function*(){let e=Tu.get(this.auth._key());if(!e){try{let i=(yield vk(this.resolver,this.auth))?yield Vi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Vi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Vi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function vk(n,e){return v(this,null,function*(){let t=wk(e),i=bk(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function yk(n,e){Tu.set(n._key(),e)}function bk(n){return wi(n._redirectPersistence)}function wk(n){return Eu(_k,n.config.apiKey,n.name)}function Ik(n,e,t=!1){return v(this,null,function*(){if(qn(n.app))return Promise.reject(nr(n));let i=js(n),r=fk(i,e),o=yield new rm(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var Ek=10*60*1e3,sm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!aI(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(Aw(e))}saveEventToCache(e){this.cachedEventUids.add(Aw(e)),this.lastProcessedEventTime=Date.now()}};function Aw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Tk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(n);default:return!1}}function Ck(t){return v(this,arguments,function*(n,e={}){return rr(n,"GET","/v1/projects",e)})}var Ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sk=/^https?/;function Rk(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Ck(n);for(let t of e)try{if(Dk(t))return}catch{}Wn(n,"unauthorized-domain")})}function Dk(n){let e=qp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Sk.test(t))return!1;if(Ak.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var xk=new Vr(3e4,6e4);function Sw(){let n=Hn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kk(n){return new Promise((e,t)=>{var i,r,s;function o(){Sw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sw(),t(Nr(n,"network-request-failed"))},timeout:xk.get()})}if(!((r=(i=Hn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Hn().gapi)===null||s===void 0)&&s.load)o();else{let c=Qw("iframefcb");return Hn()[c]=()=>{gapi.load?o():t(Nr(n,"network-request-failed"))},Yw(`${Vx()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Cu=null,e})}var Cu=null;function Pk(n){return Cu=Cu||kk(n),Cu}var Mk=new Vr(5e3,15e3),Ok="__/auth/iframe",Nk="emulator/auth/iframe",Vk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lk(n){let e=n.config;ce(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?lm(e,Nk):`https://${n.config.authDomain}/${Ok}`,i={apiKey:e.apiKey,appName:n.name,v:Gn},r=Fk.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Ua(i).slice(1)}`}function Uk(n){return v(this,null,function*(){let e=yield Pk(n),t=Hn().gapi;return ce(t,n,"internal-error"),e.open({where:document.body,url:Lk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vk,dontclear:!0},i=>new Promise((r,s)=>v(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Nr(n,"network-request-failed"),c=Hn().setTimeout(()=>{s(o)},Mk.get());function l(){Hn().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var Bk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,zk=600,$k="_blank",qk="http://localhost",Vu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Gk(n,e,t,i=jk,r=zk){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},Bk),{width:i.toString(),height:r.toString(),top:s,left:o}),h=pt().toLowerCase();t&&(c=zw(h)?$k:t),Bw(h)&&(e=e||qk,l.scrollbars="yes");let f=Object.entries(l).reduce((_,[E,k])=>`${_}${E}=${k},`,"");if(xx(h)&&c!=="_self")return Hk(e||"",c),new Vu(null);let m=window.open(e||"",c,f);ce(m,n,"popup-blocked");try{m.focus()}catch{}return new Vu(m)}function Hk(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Wk="__/auth/handler",Kk="emulator/auth/handler",Yk=encodeURIComponent("fac");function Rw(n,e,t,i,r,s){return v(this,null,function*(){ce(n.config.authDomain,n,"auth-domain-config-required"),ce(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Gn,eventId:r};if(e instanceof Pu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Xb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof Zp){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),h=l?`#${Yk}=${encodeURIComponent(l)}`:"";return`${Qk(n)}?${Ua(c).slice(1)}${h}`})}function Qk({config:n}){return n.emulator?lm(n,Kk):`https://${n.authDomain}/${Wk}`}var $p="webStorageSupport",om=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ym,this._completeRedirectFn=Ik,this._overrideRedirectResult=yk}_openPopup(e,t,i,r){return v(this,null,function*(){var s;ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Rw(e,t,i,qp(),r);return Gk(e,o,nI())})}_openRedirect(e,t,i,r){return v(this,null,function*(){yield this._originValidation(e);let s=yield Rw(e,t,i,qp(),r);return ik(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(ir(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return v(this,null,function*(){let t=yield Uk(e),i=new sm(e);return t.register("authEvent",r=>(ce(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($p,{type:$p},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[$p];o!==void 0&&t(!!o),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Rk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ww()||jw()||fm()}},cI=om;var Dw="@firebase/auth",xw="1.7.9";var am=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Xk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jk(n){$n(new zt("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kw(n)},h=new Xp(i,r,s,l);return Ux(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),$n(new zt("auth-internal",e=>{let t=js(e.getProvider("auth").getImmediate());return(i=>new am(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(Dw,xw,Xk(n)),Ge(Dw,xw,"esm2017")}var Zk=5*60,eP=Ip("authIdTokenMaxAge")||Zk,kw=null,tP=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eP)return;let r=t?.token;kw!==r&&(kw=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function bm(n=Ji()){let e=Pr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=pm(n,{popupRedirectResolver:cI,persistence:[oI,tI,ym]}),i=Ip("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=tP(s.toString());_m(t,o,()=>o(t.currentUser)),Qa(t,c=>o(c))}}let r=bp("auth");return r&&Uu(t,`http://${r}`),t}function nP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Ox({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Nr("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",nP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jk("Browser");function hI(n){return new Wt(function(e){var t=Qa(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var dI="auth",Ur=class{constructor(e){return e}},Br=class{constructor(){return Or(dI)}};var wm=new K("angularfire2.auth-instances");function GP(n,e){let t=Us(dI,n,e);return t&&new Ur(t)}function HP(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ur(i)}}var WP={provide:Br,deps:[[new ot,wm]]},KP={provide:Ur,useFactory:GP,deps:[[new ot,wm],Sn]};function fI(n,...e){return Ge("angularfire",vi.full,"auth"),Ot([KP,WP,{provide:wm,useFactory:HP(n),multi:!0,deps:[re,Pe,er,yi,[new ot,Zi],...e]}])}var pI=ke(hI,!0);var mI=ke(Uu,!0);var gI=ke(bm,!0);var _I=ke(gm,!0);var vI=ke(vm,!0);var yI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bI={};var sr,Im;(function(){var n;function e(T,g){function y(){}y.prototype=g.prototype,T.D=g.prototype,T.prototype=new y,T.prototype.constructor=T,T.C=function(I,A,R){for(var b=Array(arguments.length-2),oi=2;oi<arguments.length;oi++)b[oi-2]=arguments[oi];return g.prototype[A].apply(I,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,g,y){y||(y=0);var I=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)I[A]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(A=0;16>A;++A)I[A]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=T.g[0],y=T.g[1],A=T.g[2];var R=T.g[3],b=g+(R^y&(A^R))+I[0]+3614090360&4294967295;g=y+(b<<7&4294967295|b>>>25),b=R+(A^g&(y^A))+I[1]+3905402710&4294967295,R=g+(b<<12&4294967295|b>>>20),b=A+(y^R&(g^y))+I[2]+606105819&4294967295,A=R+(b<<17&4294967295|b>>>15),b=y+(g^A&(R^g))+I[3]+3250441966&4294967295,y=A+(b<<22&4294967295|b>>>10),b=g+(R^y&(A^R))+I[4]+4118548399&4294967295,g=y+(b<<7&4294967295|b>>>25),b=R+(A^g&(y^A))+I[5]+1200080426&4294967295,R=g+(b<<12&4294967295|b>>>20),b=A+(y^R&(g^y))+I[6]+2821735955&4294967295,A=R+(b<<17&4294967295|b>>>15),b=y+(g^A&(R^g))+I[7]+4249261313&4294967295,y=A+(b<<22&4294967295|b>>>10),b=g+(R^y&(A^R))+I[8]+1770035416&4294967295,g=y+(b<<7&4294967295|b>>>25),b=R+(A^g&(y^A))+I[9]+2336552879&4294967295,R=g+(b<<12&4294967295|b>>>20),b=A+(y^R&(g^y))+I[10]+4294925233&4294967295,A=R+(b<<17&4294967295|b>>>15),b=y+(g^A&(R^g))+I[11]+2304563134&4294967295,y=A+(b<<22&4294967295|b>>>10),b=g+(R^y&(A^R))+I[12]+1804603682&4294967295,g=y+(b<<7&4294967295|b>>>25),b=R+(A^g&(y^A))+I[13]+4254626195&4294967295,R=g+(b<<12&4294967295|b>>>20),b=A+(y^R&(g^y))+I[14]+2792965006&4294967295,A=R+(b<<17&4294967295|b>>>15),b=y+(g^A&(R^g))+I[15]+1236535329&4294967295,y=A+(b<<22&4294967295|b>>>10),b=g+(A^R&(y^A))+I[1]+4129170786&4294967295,g=y+(b<<5&4294967295|b>>>27),b=R+(y^A&(g^y))+I[6]+3225465664&4294967295,R=g+(b<<9&4294967295|b>>>23),b=A+(g^y&(R^g))+I[11]+643717713&4294967295,A=R+(b<<14&4294967295|b>>>18),b=y+(R^g&(A^R))+I[0]+3921069994&4294967295,y=A+(b<<20&4294967295|b>>>12),b=g+(A^R&(y^A))+I[5]+3593408605&4294967295,g=y+(b<<5&4294967295|b>>>27),b=R+(y^A&(g^y))+I[10]+38016083&4294967295,R=g+(b<<9&4294967295|b>>>23),b=A+(g^y&(R^g))+I[15]+3634488961&4294967295,A=R+(b<<14&4294967295|b>>>18),b=y+(R^g&(A^R))+I[4]+3889429448&4294967295,y=A+(b<<20&4294967295|b>>>12),b=g+(A^R&(y^A))+I[9]+568446438&4294967295,g=y+(b<<5&4294967295|b>>>27),b=R+(y^A&(g^y))+I[14]+3275163606&4294967295,R=g+(b<<9&4294967295|b>>>23),b=A+(g^y&(R^g))+I[3]+4107603335&4294967295,A=R+(b<<14&4294967295|b>>>18),b=y+(R^g&(A^R))+I[8]+1163531501&4294967295,y=A+(b<<20&4294967295|b>>>12),b=g+(A^R&(y^A))+I[13]+2850285829&4294967295,g=y+(b<<5&4294967295|b>>>27),b=R+(y^A&(g^y))+I[2]+4243563512&4294967295,R=g+(b<<9&4294967295|b>>>23),b=A+(g^y&(R^g))+I[7]+1735328473&4294967295,A=R+(b<<14&4294967295|b>>>18),b=y+(R^g&(A^R))+I[12]+2368359562&4294967295,y=A+(b<<20&4294967295|b>>>12),b=g+(y^A^R)+I[5]+4294588738&4294967295,g=y+(b<<4&4294967295|b>>>28),b=R+(g^y^A)+I[8]+2272392833&4294967295,R=g+(b<<11&4294967295|b>>>21),b=A+(R^g^y)+I[11]+1839030562&4294967295,A=R+(b<<16&4294967295|b>>>16),b=y+(A^R^g)+I[14]+4259657740&4294967295,y=A+(b<<23&4294967295|b>>>9),b=g+(y^A^R)+I[1]+2763975236&4294967295,g=y+(b<<4&4294967295|b>>>28),b=R+(g^y^A)+I[4]+1272893353&4294967295,R=g+(b<<11&4294967295|b>>>21),b=A+(R^g^y)+I[7]+4139469664&4294967295,A=R+(b<<16&4294967295|b>>>16),b=y+(A^R^g)+I[10]+3200236656&4294967295,y=A+(b<<23&4294967295|b>>>9),b=g+(y^A^R)+I[13]+681279174&4294967295,g=y+(b<<4&4294967295|b>>>28),b=R+(g^y^A)+I[0]+3936430074&4294967295,R=g+(b<<11&4294967295|b>>>21),b=A+(R^g^y)+I[3]+3572445317&4294967295,A=R+(b<<16&4294967295|b>>>16),b=y+(A^R^g)+I[6]+76029189&4294967295,y=A+(b<<23&4294967295|b>>>9),b=g+(y^A^R)+I[9]+3654602809&4294967295,g=y+(b<<4&4294967295|b>>>28),b=R+(g^y^A)+I[12]+3873151461&4294967295,R=g+(b<<11&4294967295|b>>>21),b=A+(R^g^y)+I[15]+530742520&4294967295,A=R+(b<<16&4294967295|b>>>16),b=y+(A^R^g)+I[2]+3299628645&4294967295,y=A+(b<<23&4294967295|b>>>9),b=g+(A^(y|~R))+I[0]+4096336452&4294967295,g=y+(b<<6&4294967295|b>>>26),b=R+(y^(g|~A))+I[7]+1126891415&4294967295,R=g+(b<<10&4294967295|b>>>22),b=A+(g^(R|~y))+I[14]+2878612391&4294967295,A=R+(b<<15&4294967295|b>>>17),b=y+(R^(A|~g))+I[5]+4237533241&4294967295,y=A+(b<<21&4294967295|b>>>11),b=g+(A^(y|~R))+I[12]+1700485571&4294967295,g=y+(b<<6&4294967295|b>>>26),b=R+(y^(g|~A))+I[3]+2399980690&4294967295,R=g+(b<<10&4294967295|b>>>22),b=A+(g^(R|~y))+I[10]+4293915773&4294967295,A=R+(b<<15&4294967295|b>>>17),b=y+(R^(A|~g))+I[1]+2240044497&4294967295,y=A+(b<<21&4294967295|b>>>11),b=g+(A^(y|~R))+I[8]+1873313359&4294967295,g=y+(b<<6&4294967295|b>>>26),b=R+(y^(g|~A))+I[15]+4264355552&4294967295,R=g+(b<<10&4294967295|b>>>22),b=A+(g^(R|~y))+I[6]+2734768916&4294967295,A=R+(b<<15&4294967295|b>>>17),b=y+(R^(A|~g))+I[13]+1309151649&4294967295,y=A+(b<<21&4294967295|b>>>11),b=g+(A^(y|~R))+I[4]+4149444226&4294967295,g=y+(b<<6&4294967295|b>>>26),b=R+(y^(g|~A))+I[11]+3174756917&4294967295,R=g+(b<<10&4294967295|b>>>22),b=A+(g^(R|~y))+I[2]+718787259&4294967295,A=R+(b<<15&4294967295|b>>>17),b=y+(R^(A|~g))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+g&4294967295,T.g[1]=T.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}i.prototype.u=function(T,g){g===void 0&&(g=T.length);for(var y=g-this.blockSize,I=this.B,A=this.h,R=0;R<g;){if(A==0)for(;R<=y;)r(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<g;)if(I[A++]=T.charCodeAt(R++),A==this.blockSize){r(this,I),A=0;break}}else for(;R<g;)if(I[A++]=T[R++],A==this.blockSize){r(this,I),A=0;break}}this.h=A,this.o+=g},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var g=1;g<T.length-8;++g)T[g]=0;var y=8*this.o;for(g=T.length-8;g<T.length;++g)T[g]=y&255,y/=256;for(this.u(T),T=Array(16),g=y=0;4>g;++g)for(var I=0;32>I;I+=8)T[y++]=this.g[g]>>>I&255;return T};function s(T,g){var y=c;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=g(T)}function o(T,g){this.h=g;for(var y=[],I=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;I&&R==g||(y[A]=R,I=!1)}this.g=y}var c={};function l(T){return-128<=T&&128>T?s(T,function(g){return new o([g|0],0>g?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return D(h(-T));for(var g=[],y=1,I=0;T>=y;I++)g[I]=T/y|0,y*=4294967296;return new o(g,0)}function f(T,g){if(T.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(T.charAt(0)=="-")return D(f(T.substring(1),g));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),I=m,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),b=parseInt(T.substring(A,A+R),g);8>R?(R=h(Math.pow(g,R)),I=I.j(R).add(h(b))):(I=I.j(y),I=I.add(h(b)))}return I}var m=l(0),_=l(1),E=l(16777216);n=o.prototype,n.m=function(){if(P(this))return-D(this).m();for(var T=0,g=1,y=0;y<this.g.length;y++){var I=this.i(y);T+=(0<=I?I:4294967296+I)*g,g*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+D(this).toString(T);for(var g=h(Math.pow(T,6)),y=this,I="";;){var A=ie(y,g).g;y=Y(y,A.j(g));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(T);if(y=A,k(y))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var g=0;g<T.g.length;g++)if(T.g[g]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=Y(this,T),P(T)?-1:k(T)?0:1};function D(T){for(var g=T.g.length,y=[],I=0;I<g;I++)y[I]=~T.g[I];return new o(y,~T.h).add(_)}n.abs=function(){return P(this)?D(this):this},n.add=function(T){for(var g=Math.max(this.g.length,T.g.length),y=[],I=0,A=0;A<=g;A++){var R=I+(this.i(A)&65535)+(T.i(A)&65535),b=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);I=b>>>16,R&=65535,b&=65535,y[A]=b<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function Y(T,g){return T.add(D(g))}n.j=function(T){if(k(this)||k(T))return m;if(P(this))return P(T)?D(this).j(D(T)):D(D(this).j(T));if(P(T))return D(this.j(D(T)));if(0>this.l(E)&&0>T.l(E))return h(this.m()*T.m());for(var g=this.g.length+T.g.length,y=[],I=0;I<2*g;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<T.g.length;A++){var R=this.i(I)>>>16,b=this.i(I)&65535,oi=T.i(A)>>>16,ko=T.i(A)&65535;y[2*I+2*A]+=b*ko,Z(y,2*I+2*A),y[2*I+2*A+1]+=R*ko,Z(y,2*I+2*A+1),y[2*I+2*A+1]+=b*oi,Z(y,2*I+2*A+1),y[2*I+2*A+2]+=R*oi,Z(y,2*I+2*A+2)}for(I=0;I<g;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=g;I<2*g;I++)y[I]=0;return new o(y,0)};function Z(T,g){for(;(T[g]&65535)!=T[g];)T[g+1]+=T[g]>>>16,T[g]&=65535,g++}function q(T,g){this.g=T,this.h=g}function ie(T,g){if(k(g))throw Error("division by zero");if(k(T))return new q(m,m);if(P(T))return g=ie(D(T),g),new q(D(g.g),D(g.h));if(P(g))return g=ie(T,D(g)),new q(D(g.g),g.h);if(30<T.g.length){if(P(T)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var y=_,I=g;0>=I.l(T);)y=De(y),I=De(I);var A=fe(y,1),R=fe(I,1);for(I=fe(I,2),y=fe(y,2);!k(I);){var b=R.add(I);0>=b.l(T)&&(A=A.add(y),R=b),I=fe(I,1),y=fe(y,1)}return g=Y(T,A.j(g)),new q(A,g)}for(A=m;0<=T.l(g);){for(y=Math.max(1,Math.floor(T.m()/g.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=h(y),b=R.j(g);P(b)||0<b.l(T);)y-=I,R=h(y),b=R.j(g);k(R)&&(R=_),A=A.add(R),T=Y(T,b)}return new q(A,T)}n.A=function(T){return ie(this,T).h},n.and=function(T){for(var g=Math.max(this.g.length,T.g.length),y=[],I=0;I<g;I++)y[I]=this.i(I)&T.i(I);return new o(y,this.h&T.h)},n.or=function(T){for(var g=Math.max(this.g.length,T.g.length),y=[],I=0;I<g;I++)y[I]=this.i(I)|T.i(I);return new o(y,this.h|T.h)},n.xor=function(T){for(var g=Math.max(this.g.length,T.g.length),y=[],I=0;I<g;I++)y[I]=this.i(I)^T.i(I);return new o(y,this.h^T.h)};function De(T){for(var g=T.g.length+1,y=[],I=0;I<g;I++)y[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(y,T.h)}function fe(T,g){var y=g>>5;g%=32;for(var I=T.g.length-y,A=[],R=0;R<I;R++)A[R]=0<g?T.i(R+y)>>>g|T.i(R+y+1)<<32-g:T.i(R+y);return new o(A,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Im=bI.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,sr=bI.Integer=o}).apply(typeof yI<"u"?yI:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ii={};var Em,Tm,zs,Cm,Xa,zu,Am,Sm,Rm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,d){return a==Array.prototype||a==Object.prototype||(a[u]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function r(a,u){if(u)e:{var d=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var S=a[p];if(!(S in d))break e;d=d[S]}a=a[a.length-1],p=d[a],u=u(p),u!=p&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var d=0,p=!1,S={next:function(){if(!p&&d<a.length){var x=d++;return{value:u(x,a[x]),done:!1}}return p=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,d){return d})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,d){return a.call.apply(a.bind,arguments)}function m(a,u,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,p),a.apply(u,S)}}return function(){return a.apply(u,arguments)}}function _(a,u,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,_.apply(null,arguments)}function E(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function k(a,u){function d(){}d.prototype=u.prototype,a.aa=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,S,x){for(var $=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)$[Fe-2]=arguments[Fe];return u.prototype[S].apply(p,$)}}function P(a){let u=a.length;if(0<u){let d=Array(u);for(let p=0;p<u;p++)d[p]=a[p];return d}return[]}function D(a,u){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(l(p)){let S=a.length||0,x=p.length||0;a.length=S+x;for(let $=0;$<x;$++)a[S+$]=p[$]}else a.push(p)}}class Y{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Z(a){return/^[\s\xa0]*$/.test(a)}function q(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ie(a){return ie[" "](a),a}ie[" "]=function(){};var De=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function fe(a,u,d){for(let p in a)u.call(d,a[p],p,a)}function T(a,u){for(let d in a)u.call(void 0,a[d],d,a)}function g(a){let u={};for(let d in a)u[d]=a[d];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,u){let d,p;for(let S=1;S<arguments.length;S++){p=arguments[S];for(d in p)a[d]=p[d];for(let x=0;x<y.length;x++)d=y[x],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function A(a){var u=1;a=a.split(":");let d=[];for(;0<u&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function R(a){c.setTimeout(()=>{throw a},0)}function b(){var a=xd;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class oi{constructor(){this.h=this.g=null}add(u,d){let p=ko.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var ko=new Y(()=>new SA,a=>a.reset());class SA{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Po,Mo=!1,xd=new oi,Gv=()=>{let a=c.Promise.resolve(void 0);Po=()=>{a.then(RA)}};var RA=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(d){R(d)}var u=ko;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Mo=!1};function Pi(){this.s=this.s,this.C=this.C}Pi.prototype.s=!1,Pi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var DA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return a}();function Oo(a,u){if(It.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(De){e:{try{ie(u.nodeName);var S=!0;break e}catch{}S=!1}S||(u=null)}}else d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Oo.aa.h.call(this)}}k(Oo,It);var xA={2:"touch",3:"pen",4:"mouse"};Oo.prototype.h=function(){Oo.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var No="closure_listenable_"+(1e6*Math.random()|0),kA=0;function PA(a,u,d,p,S){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=S,this.key=++kA,this.da=this.fa=!1}function Zc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function el(a){this.src=a,this.g={},this.h=0}el.prototype.add=function(a,u,d,p,S){var x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);var $=Pd(a,u,p,S);return-1<$?(u=a[$],d||(u.fa=!1)):(u=new PA(u,this.src,x,!!p,S),u.fa=d,a.push(u)),u};function kd(a,u){var d=u.type;if(d in a.g){var p=a.g[d],S=Array.prototype.indexOf.call(p,u,void 0),x;(x=0<=S)&&Array.prototype.splice.call(p,S,1),x&&(Zc(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Pd(a,u,d,p){for(var S=0;S<a.length;++S){var x=a[S];if(!x.da&&x.listener==u&&x.capture==!!d&&x.ha==p)return S}return-1}var Md="closure_lm_"+(1e6*Math.random()|0),Od={};function Hv(a,u,d,p,S){if(p&&p.once)return Kv(a,u,d,p,S);if(Array.isArray(u)){for(var x=0;x<u.length;x++)Hv(a,u[x],d,p,S);return null}return d=Ld(d),a&&a[No]?a.K(u,d,h(p)?!!p.capture:!!p,S):Wv(a,u,d,!1,p,S)}function Wv(a,u,d,p,S,x){if(!u)throw Error("Invalid event type");var $=h(S)?!!S.capture:!!S,Fe=Vd(a);if(Fe||(a[Md]=Fe=new el(a)),d=Fe.add(u,d,p,$,x),d.proxy)return d;if(p=MA(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)DA||(S=$),S===void 0&&(S=!1),a.addEventListener(u.toString(),p,S);else if(a.attachEvent)a.attachEvent(Qv(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function MA(){function a(d){return u.call(a.src,a.listener,d)}let u=OA;return a}function Kv(a,u,d,p,S){if(Array.isArray(u)){for(var x=0;x<u.length;x++)Kv(a,u[x],d,p,S);return null}return d=Ld(d),a&&a[No]?a.L(u,d,h(p)?!!p.capture:!!p,S):Wv(a,u,d,!0,p,S)}function Yv(a,u,d,p,S){if(Array.isArray(u))for(var x=0;x<u.length;x++)Yv(a,u[x],d,p,S);else p=h(p)?!!p.capture:!!p,d=Ld(d),a&&a[No]?(a=a.i,u=String(u).toString(),u in a.g&&(x=a.g[u],d=Pd(x,d,p,S),-1<d&&(Zc(x[d]),Array.prototype.splice.call(x,d,1),x.length==0&&(delete a.g[u],a.h--)))):a&&(a=Vd(a))&&(u=a.g[u.toString()],a=-1,u&&(a=Pd(u,d,p,S)),(d=-1<a?u[a]:null)&&Nd(d))}function Nd(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[No])kd(u.i,a);else{var d=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(d,p,a.capture):u.detachEvent?u.detachEvent(Qv(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Vd(u))?(kd(d,a),d.h==0&&(d.src=null,u[Md]=null)):Zc(a)}}}function Qv(a){return a in Od?Od[a]:Od[a]="on"+a}function OA(a,u){if(a.da)a=!0;else{u=new Oo(u,this);var d=a.listener,p=a.ha||a.src;a.fa&&Nd(a),a=d.call(p,u)}return a}function Vd(a){return a=a[Md],a instanceof el?a:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ld(a){return typeof a=="function"?a:(a[Fd]||(a[Fd]=function(u){return a.handleEvent(u)}),a[Fd])}function Et(){Pi.call(this),this.i=new el(this),this.M=this,this.F=null}k(Et,Pi),Et.prototype[No]=!0,Et.prototype.removeEventListener=function(a,u,d,p){Yv(this,a,u,d,p)};function Pt(a,u){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new It(u,a);else if(u instanceof It)u.target=u.target||a;else{var S=u;u=new It(p,a),I(u,S)}if(S=!0,d)for(var x=d.length-1;0<=x;x--){var $=u.g=d[x];S=tl($,p,!0,u)&&S}if($=u.g=a,S=tl($,p,!0,u)&&S,S=tl($,p,!1,u)&&S,d)for(x=0;x<d.length;x++)$=u.g=d[x],S=tl($,p,!1,u)&&S}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var d=a.g[u],p=0;p<d.length;p++)Zc(d[p]);delete a.g[u],a.h--}}this.F=null},Et.prototype.K=function(a,u,d,p){return this.i.add(String(a),u,!1,d,p)},Et.prototype.L=function(a,u,d,p){return this.i.add(String(a),u,!0,d,p)};function tl(a,u,d,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var S=!0,x=0;x<u.length;++x){var $=u[x];if($&&!$.da&&$.capture==d){var Fe=$.listener,gt=$.ha||$.src;$.fa&&kd(a.i,$),S=Fe.call(gt,p)!==!1&&S}}return S&&!p.defaultPrevented}function Xv(a,u,d){if(typeof a=="function")d&&(a=_(a,d));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function Jv(a){a.g=Xv(()=>{a.g=null,a.i&&(a.i=!1,Jv(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class NA extends Pi{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Jv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vo(a){Pi.call(this),this.h=a,this.g={}}k(Vo,Pi);var Zv=[];function ey(a){fe(a.g,function(u,d){this.g.hasOwnProperty(d)&&Nd(u)},a),a.g={}}Vo.prototype.N=function(){Vo.aa.N.call(this),ey(this)},Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ud=c.JSON.stringify,VA=c.JSON.parse,FA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Bd(){}Bd.prototype.h=null;function ty(a){return a.h||(a.h=a.i())}function ny(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jd(){It.call(this,"d")}k(jd,It);function zd(){It.call(this,"c")}k(zd,It);var yr={},iy=null;function nl(){return iy=iy||new Et}yr.La="serverreachability";function ry(a){It.call(this,yr.La,a)}k(ry,It);function Lo(a){let u=nl();Pt(u,new ry(u))}yr.STAT_EVENT="statevent";function sy(a,u){It.call(this,yr.STAT_EVENT,a),this.stat=u}k(sy,It);function Mt(a){let u=nl();Pt(u,new sy(u,a))}yr.Ma="timingevent";function oy(a,u){It.call(this,yr.Ma,a),this.size=u}k(oy,It);function Uo(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Bo(){this.g=!0}Bo.prototype.xa=function(){this.g=!1};function LA(a,u,d,p,S,x){a.info(function(){if(a.g)if(x)for(var $="",Fe=x.split("&"),gt=0;gt<Fe.length;gt++){var Ce=Fe[gt].split("=");if(1<Ce.length){var Tt=Ce[0];Ce=Ce[1];var Ct=Tt.split("_");$=2<=Ct.length&&Ct[1]=="type"?$+(Tt+"="+Ce+"&"):$+(Tt+"=redacted&")}}else $=null;else $=x;return"XMLHTTP REQ ("+p+") [attempt "+S+"]: "+u+`
`+d+`
`+$})}function UA(a,u,d,p,S,x,$){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+S+"]: "+u+`
`+d+`
`+x+" "+$})}function ds(a,u,d,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+jA(a,d)+(p?" "+p:"")})}function BA(a,u){a.info(function(){return"TIMEOUT: "+u})}Bo.prototype.info=function(){};function jA(a,u){if(!a.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var S=p[1];if(Array.isArray(S)&&!(1>S.length)){var x=S[0];if(x!="noop"&&x!="stop"&&x!="close")for(var $=1;$<S.length;$++)S[$]=""}}}}return Ud(d)}catch{return u}}var il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ay={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$d;function rl(){}k(rl,Bd),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},$d=new rl;function Mi(a,u,d,p){this.j=a,this.i=u,this.l=d,this.R=p||1,this.U=new Vo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cy}function cy(){this.i=null,this.g="",this.h=!1}var ly={},qd={};function Gd(a,u,d){a.L=1,a.v=cl(ai(u)),a.m=d,a.P=!0,uy(a,null)}function uy(a,u){a.F=Date.now(),sl(a),a.A=ai(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Ty(d.i,"t",p),a.C=0,d=a.j.J,a.h=new cy,a.g=zy(a.j,d?u:null,!a.m),0<a.O&&(a.M=new NA(_(a.Y,a,a.g),a.O)),u=a.U,d=a.g,p=a.ca;var S="readystatechange";Array.isArray(S)||(S&&(Zv[0]=S.toString()),S=Zv);for(var x=0;x<S.length;x++){var $=Hv(d,S[x],p||u.handleEvent,!1,u.h||u);if(!$)break;u.g[$.key]=$}u=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Lo(),LA(a.i,a.u,a.A,a.l,a.R,a.m)}Mi.prototype.ca=function(a){a=a.target;let u=this.M;u&&ci(a)==3?u.j():this.Y(a)},Mi.prototype.Y=function(a){try{if(a==this.g)e:{let Ct=ci(this.g);var u=this.g.Ba();let ms=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||ky(this.g)))){this.J||Ct!=4||u==7||(u==8||0>=ms?Lo(3):Lo(2)),Hd(this);var d=this.g.Z();this.X=d;t:if(hy(this)){var p=ky(this.g);a="";var S=p.length,x=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),jo(this);var $="";break t}this.h.i=new c.TextDecoder}for(u=0;u<S;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(x&&u==S-1)});p.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=d==200,UA(this.i,this.u,this.A,this.l,this.R,Ct,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,gt=this.g;if((Fe=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Fe)){var Ce=Fe;break t}}Ce=null}if(d=Ce)ds(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wd(this,d);else{this.o=!1,this.s=3,Mt(12),br(this),jo(this);break e}}if(this.P){d=!0;let yn;for(;!this.J&&this.C<$.length;)if(yn=zA(this,$),yn==qd){Ct==4&&(this.s=4,Mt(14),d=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==ly){this.s=4,Mt(15),ds(this.i,this.l,$,"[Invalid Chunk]"),d=!1;break}else ds(this.i,this.l,yn,null),Wd(this,yn);if(hy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||$.length!=0||this.h.h||(this.s=1,Mt(16),d=!1),this.o=this.o&&d,!d)ds(this.i,this.l,$,"[Invalid Chunked Response]"),br(this),jo(this);else if(0<$.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Zd(Tt),Tt.M=!0,Mt(11))}}else ds(this.i,this.l,$,null),Wd(this,$);Ct==4&&br(this),this.o&&!this.J&&(Ct==4?Ly(this.j,this):(this.o=!1,sl(this)))}else sS(this.g),d==400&&0<$.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),br(this),jo(this)}}}catch{}finally{}};function hy(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function zA(a,u){var d=a.C,p=u.indexOf(`
`,d);return p==-1?qd:(d=Number(u.substring(d,p)),isNaN(d)?ly:(p+=1,p+d>u.length?qd:(u=u.slice(p,p+d),a.C=p+d,u)))}Mi.prototype.cancel=function(){this.J=!0,br(this)};function sl(a){a.S=Date.now()+a.I,dy(a,a.I)}function dy(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Uo(_(a.ba,a),u)}function Hd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Mi.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(BA(this.i,this.A),this.L!=2&&(Lo(),Mt(17)),br(this),this.s=2,jo(this)):dy(this,this.S-a)};function jo(a){a.j.G==0||a.J||Ly(a.j,a)}function br(a){Hd(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,ey(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Wd(a,u){try{var d=a.j;if(d.G!=0&&(d.g==a||Kd(d.h,a))){if(!a.K&&Kd(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var S=p;if(S[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)fl(d),hl(d);else break e;Jd(d),Mt(18)}}else d.za=S[1],0<d.za-d.T&&37500>S[2]&&d.F&&d.v==0&&!d.C&&(d.C=Uo(_(d.Za,d),6e3));if(1>=my(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ir(d,11)}else if((a.K||d.g==a)&&fl(d),!Z(u))for(S=d.Da.g.parse(u),u=0;u<S.length;u++){let Ce=S[u];if(d.T=Ce[0],Ce=Ce[1],d.G==2)if(Ce[0]=="c"){d.K=Ce[1],d.ia=Ce[2];let Tt=Ce[3];Tt!=null&&(d.la=Tt,d.j.info("VER="+d.la));let Ct=Ce[4];Ct!=null&&(d.Aa=Ct,d.j.info("SVER="+d.Aa));let ms=Ce[5];ms!=null&&typeof ms=="number"&&0<ms&&(p=1.5*ms,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let yn=a.g;if(yn){let ml=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var x=p.h;x.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Yd(x,x.h),x.h=null))}if(p.D){let ef=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ef&&(p.ya=ef,je(p.I,p.D,ef))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var $=a;if(p.qa=jy(p,p.J?p.ia:null,p.W),$.K){gy(p.h,$);var Fe=$,gt=p.L;gt&&(Fe.I=gt),Fe.B&&(Hd(Fe),sl(Fe)),p.g=$}else Vy(p);0<d.i.length&&dl(d)}else Ce[0]!="stop"&&Ce[0]!="close"||Ir(d,7);else d.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Ir(d,7):Xd(d):Ce[0]!="noop"&&d.l&&d.l.ta(Ce),d.v=0)}}Lo(4)}catch{}}var $A=class{constructor(a,u){this.g=a,this.map=u}};function fy(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function py(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function my(a){return a.h?1:a.g?a.g.size:0}function Kd(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Yd(a,u){a.g?a.g.add(u):a.h=u}function gy(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}fy.prototype.cancel=function(){if(this.i=_y(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function _y(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let d of a.g.values())u=u.concat(d.D);return u}return P(a.i)}function qA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],d=a.length,p=0;p<d;p++)u.push(a[p]);return u}u=[],d=0;for(p in a)u[d++]=a[p];return u}function GA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var d=0;d<a;d++)u.push(d);return u}u=[],d=0;for(let p in a)u[d++]=p;return u}}}function vy(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var d=GA(a),p=qA(a),S=p.length,x=0;x<S;x++)u.call(void 0,p[x],d&&d[x],a)}var yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HA(a,u){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),S=null;if(0<=p){var x=a[d].substring(0,p);S=a[d].substring(p+1)}else x=a[d];u(x,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function wr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof wr){this.h=a.h,ol(this,a.j),this.o=a.o,this.g=a.g,al(this,a.s),this.l=a.l;var u=a.i,d=new qo;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),by(this,d),this.m=a.m}else a&&(u=String(a).match(yy))?(this.h=!1,ol(this,u[1]||"",!0),this.o=zo(u[2]||""),this.g=zo(u[3]||"",!0),al(this,u[4]),this.l=zo(u[5]||"",!0),by(this,u[6]||"",!0),this.m=zo(u[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}wr.prototype.toString=function(){var a=[],u=this.j;u&&a.push($o(u,wy,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push($o(u,wy,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push($o(d,d.charAt(0)=="/"?YA:KA,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",$o(d,XA)),a.join("")};function ai(a){return new wr(a)}function ol(a,u,d){a.j=d?zo(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function al(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function by(a,u,d){u instanceof qo?(a.i=u,JA(a.i,a.h)):(d||(u=$o(u,QA)),a.i=new qo(u,a.h))}function je(a,u,d){a.i.set(u,d)}function cl(a){return je(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function zo(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function $o(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,WA),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function WA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wy=/[#\/\?@]/g,KA=/[#\?:]/g,YA=/[#\?]/g,QA=/[#\?@]/g,XA=/#/g;function qo(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Oi(a){a.g||(a.g=new Map,a.h=0,a.i&&HA(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=qo.prototype,n.add=function(a,u){Oi(this),this.i=null,a=fs(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Iy(a,u){Oi(a),u=fs(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Ey(a,u){return Oi(a),u=fs(a,u),a.g.has(u)}n.forEach=function(a,u){Oi(this),this.g.forEach(function(d,p){d.forEach(function(S){a.call(u,S,p,this)},this)},this)},n.na=function(){Oi(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){let S=a[p];for(let x=0;x<S.length;x++)d.push(u[p])}return d},n.V=function(a){Oi(this);let u=[];if(typeof a=="string")Ey(this,a)&&(u=u.concat(this.g.get(fs(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)u=u.concat(a[d])}return u},n.set=function(a,u){return Oi(this),this.i=null,a=fs(this,a),Ey(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Ty(a,u,d){Iy(a,u),0<d.length&&(a.i=null,a.g.set(fs(a,u),P(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];let x=encodeURIComponent(String(p)),$=this.V(p);for(p=0;p<$.length;p++){var S=x;$[p]!==""&&(S+="="+encodeURIComponent(String($[p]))),a.push(S)}}return this.i=a.join("&")};function fs(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function JA(a,u){u&&!a.j&&(Oi(a),a.i=null,a.g.forEach(function(d,p){var S=p.toLowerCase();p!=S&&(Iy(this,p),Ty(this,S,d))},a)),a.j=u}function ZA(a,u){let d=new Bo;if(c.Image){let p=new Image;p.onload=E(Ni,d,"TestLoadImage: loaded",!0,u,p),p.onerror=E(Ni,d,"TestLoadImage: error",!1,u,p),p.onabort=E(Ni,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=E(Ni,d,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function eS(a,u){let d=new Bo,p=new AbortController,S=setTimeout(()=>{p.abort(),Ni(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(x=>{clearTimeout(S),x.ok?Ni(d,"TestPingServer: ok",!0,u):Ni(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(S),Ni(d,"TestPingServer: error",!1,u)})}function Ni(a,u,d,p,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),p(d)}catch{}}function tS(){this.g=new FA}function nS(a,u,d){let p=d||"";try{vy(a,function(S,x){let $=S;h(S)&&($=Ud(S)),u.push(p+x+"="+encodeURIComponent($))})}catch(S){throw u.push(p+"type="+encodeURIComponent("_badmap")),S}}function Go(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Go,Bd),Go.prototype.g=function(){return new ll(this.l,this.j)},Go.prototype.i=function(a){return function(){return a}}({});function ll(a,u){Et.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ll,Et),n=ll.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Wo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ho(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cy(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cy(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Ho(this):Wo(this),this.readyState==3&&Cy(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Ho(this))},n.Qa=function(a){this.g&&(this.response=a,Ho(this))},n.ga=function(){this.g&&Ho(this)};function Ho(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Wo(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function Wo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ay(a){let u="";return fe(a,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function Qd(a,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Ay(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):je(a,u,d))}function Je(a){Et.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Je,Et);var iS=/^https?$/i,rS=["POST","PUT"];n=Je.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$d.g(),this.v=this.o?ty(this.o):ty($d),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(x){Sy(this,x);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var S in p)d.set(S,p[S]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let x of p.keys())d.set(x,p.get(x));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(x=>x.toLowerCase()=="content-type"),S=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(rS,u,void 0))||p||S||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,$]of d)this.g.setRequestHeader(x,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xy(this),this.u=!0,this.g.send(a),this.u=!1}catch(x){Sy(this,x)}};function Sy(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Ry(a),ul(a)}function Ry(a){a.A||(a.A=!0,Pt(a,"complete"),Pt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Pt(this,"complete"),Pt(this,"abort"),ul(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ul(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Dy(this):this.bb())},n.bb=function(){Dy(this)};function Dy(a){if(a.h&&typeof o<"u"&&(!a.v[1]||ci(a)!=4||a.Z()!=2)){if(a.u&&ci(a)==4)Xv(a.Ea,0,a);else if(Pt(a,"readystatechange"),ci(a)==4){a.h=!1;try{let $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=$===0){var S=String(a.D).match(yy)[1]||null;!S&&c.self&&c.self.location&&(S=c.self.location.protocol.slice(0,-1)),p=!iS.test(S?S.toLowerCase():"")}d=p}if(d)Pt(a,"complete"),Pt(a,"success");else{a.m=6;try{var x=2<ci(a)?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.Z()+"]",Ry(a)}}finally{ul(a)}}}}function ul(a,u){if(a.g){xy(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Pt(a,"ready");try{d.onreadystatechange=p}catch{}}}function xy(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function ci(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),VA(u)}};function ky(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function sS(a){let u={};a=(a.g&&2<=ci(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Z(a[p]))continue;var d=A(a[p]);let S=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let x=u[S]||[];u[S]=x,x.push(d)}T(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function Py(a){this.Aa=0,this.i=[],this.j=new Bo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,a),this.cb=Ko("retryDelaySeedMs",1e4,a),this.Wa=Ko("forwardChannelMaxRetries",2,a),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new fy(a&&a.concurrentRequestLimit),this.Da=new tS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Py.prototype,n.la=8,n.G=1,n.connect=function(a,u,d,p){Mt(0),this.W=a,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=jy(this,null,this.W),dl(this)};function Xd(a){if(My(a),a.G==3){var u=a.U++,d=ai(a.I);if(je(d,"SID",a.K),je(d,"RID",u),je(d,"TYPE","terminate"),Yo(a,d),u=new Mi(a,a.j,u),u.L=2,u.v=cl(ai(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=zy(u.j,null),u.g.ea(u.v)),u.F=Date.now(),sl(u)}By(a)}function hl(a){a.g&&(Zd(a),a.g.cancel(),a.g=null)}function My(a){hl(a),a.u&&(c.clearTimeout(a.u),a.u=null),fl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function dl(a){if(!py(a.h)&&!a.s){a.s=!0;var u=a.Ga;Po||Gv(),Mo||(Po(),Mo=!0),xd.add(u,a),a.B=0}}function oS(a,u){return my(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Uo(_(a.Ga,a,u),Uy(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let S=new Mi(this,this.j,a),x=this.o;if(this.S&&(x?(x=g(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(S.H=x,x=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Ny(this,S,u),d=ai(this.I),je(d,"RID",a),je(d,"CVER",22),this.D&&je(d,"X-HTTP-Session-Id",this.D),Yo(this,d),x&&(this.O?u="headers="+encodeURIComponent(String(Ay(x)))+"&"+u:this.m&&Qd(d,this.m,x)),Yd(this.h,S),this.Ua&&je(d,"TYPE","init"),this.P?(je(d,"$req",u),je(d,"SID","null"),S.T=!0,Gd(S,d,null)):Gd(S,d,u),this.G=2}}else this.G==3&&(a?Oy(this,a):this.i.length==0||py(this.h)||Oy(this))};function Oy(a,u){var d;u?d=u.l:d=a.U++;let p=ai(a.I);je(p,"SID",a.K),je(p,"RID",d),je(p,"AID",a.T),Yo(a,p),a.m&&a.o&&Qd(p,a.m,a.o),d=new Mi(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Ny(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Yd(a.h,d),Gd(d,p,u)}function Yo(a,u){a.H&&fe(a.H,function(d,p){je(u,p,d)}),a.l&&vy({},function(d,p){je(u,p,d)})}function Ny(a,u,d){d=Math.min(a.i.length,d);var p=a.l?_(a.l.Na,a.l,a):null;e:{var S=a.i;let x=-1;for(;;){let $=["count="+d];x==-1?0<d?(x=S[0].g,$.push("ofs="+x)):x=0:$.push("ofs="+x);let Fe=!0;for(let gt=0;gt<d;gt++){let Ce=S[gt].g,Tt=S[gt].map;if(Ce-=x,0>Ce)x=Math.max(0,S[gt].g-100),Fe=!1;else try{nS(Tt,$,"req"+Ce+"_")}catch{p&&p(Tt)}}if(Fe){p=$.join("&");break e}}}return a=a.i.splice(0,d),u.D=a,p}function Vy(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Po||Gv(),Mo||(Po(),Mo=!0),xd.add(u,a),a.v=0}}function Jd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Uo(_(a.Fa,a),Uy(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Fy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Uo(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),hl(this),Fy(this))};function Zd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Fy(a){a.g=new Mi(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=ai(a.qa);je(u,"RID","rpc"),je(u,"SID",a.K),je(u,"AID",a.T),je(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&je(u,"TO",a.ja),je(u,"TYPE","xmlhttp"),Yo(a,u),a.m&&a.o&&Qd(u,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=cl(ai(u)),d.m=null,d.P=!0,uy(d,a)}n.Za=function(){this.C!=null&&(this.C=null,hl(this),Jd(this),Mt(19))};function fl(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Ly(a,u){var d=null;if(a.g==u){fl(a),Zd(a),a.g=null;var p=2}else if(Kd(a.h,u))d=u.D,gy(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var S=a.B;p=nl(),Pt(p,new oy(p,d)),dl(a)}else Vy(a);else if(S=u.s,S==3||S==0&&0<u.X||!(p==1&&oS(a,u)||p==2&&Jd(a)))switch(d&&0<d.length&&(u=a.h,u.i=u.i.concat(d)),S){case 1:Ir(a,5);break;case 4:Ir(a,10);break;case 3:Ir(a,6);break;default:Ir(a,2)}}}function Uy(a,u){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*u}function Ir(a,u){if(a.j.info("Error code "+u),u==2){var d=_(a.fb,a),p=a.Xa;let S=!p;p=new wr(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ol(p,"https"),cl(p),S?ZA(p.toString(),d):eS(p.toString(),d)}else Mt(2);a.G=0,a.l&&a.l.sa(u),By(a),My(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function By(a){if(a.G=0,a.ka=[],a.l){let u=_y(a.h);(u.length!=0||a.i.length!=0)&&(D(a.ka,u),D(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function jy(a,u,d){var p=d instanceof wr?ai(d):new wr(d);if(p.g!="")u&&(p.g=u+"."+p.g),al(p,p.s);else{var S=c.location;p=S.protocol,u=u?u+"."+S.hostname:S.hostname,S=+S.port;var x=new wr(null);p&&ol(x,p),u&&(x.g=u),S&&al(x,S),d&&(x.l=d),p=x}return d=a.D,u=a.ya,d&&u&&je(p,d,u),je(p,"VER",a.la),Yo(a,p),p}function zy(a,u,d){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Je(new Go({eb:d})):new Je(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $y(){}n=$y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pl(){}pl.prototype.g=function(a,u){return new Ht(a,u)};function Ht(a,u){Et.call(this),this.g=new Py(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!Z(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Z(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new ps(this)}k(Ht,Et),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Xd(this.g)},Ht.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Ud(a),a=d);u.i.push(new $A(u.Ya++,a)),u.G==3&&dl(u)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Xd(this.g),delete this.g,Ht.aa.N.call(this)};function qy(a){jd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}k(qy,jd);function Gy(){zd.call(this),this.status=1}k(Gy,zd);function ps(a){this.g=a}k(ps,$y),ps.prototype.ua=function(){Pt(this.g,"a")},ps.prototype.ta=function(a){Pt(this.g,new qy(a))},ps.prototype.sa=function(a){Pt(this.g,new Gy)},ps.prototype.ra=function(){Pt(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,Rm=Ii.createWebChannelTransport=function(){return new pl},Sm=Ii.getStatEventTarget=function(){return nl()},Am=Ii.Event=yr,zu=Ii.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},il.NO_ERROR=0,il.TIMEOUT=8,il.HTTP_ERROR=6,Xa=Ii.ErrorCode=il,ay.COMPLETE="complete",Cm=Ii.EventType=ay,ny.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",Et.prototype.listen=Et.prototype.K,zs=Ii.WebChannel=ny,Tm=Ii.FetchXmlHttpFactory=Go,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Em=Ii.XhrIo=Je}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});var wI="@firebase/firestore";var mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");var ao="10.13.2";var qr=new Qi("@firebase/firestore");function Ja(){return qr.logLevel}function X(n,...e){if(qr.logLevel<=ye.DEBUG){let t=e.map(m_);qr.debug(`Firestore (${ao}): ${n}`,...t)}}function Ei(n,...e){if(qr.logLevel<=ye.ERROR){let t=e.map(m_);qr.error(`Firestore (${ao}): ${n}`,...t)}}function Ys(n,...e){if(qr.logLevel<=ye.WARN){let t=e.map(m_);qr.warn(`Firestore (${ao}): ${n}`,...t)}}function m_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function le(n="Unexpected state"){let e=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: `+n;throw Ei(e),new Error(e)}function Ue(n,e){n||le()}function de(n,e){return n}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends Nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Wu=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Om=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mt.UNAUTHENTICATED))}shutdown(){}},Nm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Vm=class{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>v(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string"),new Wu(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new mt(e)}},Fm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Lm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Fm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Um=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new Um(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function YP(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Ku=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=YP(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function Ae(n,e){return n<e?-1:n>e?1:0}function Qs(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var bt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var pe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new bt(0,0))}static max(){return new n(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yu=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&le(),i===void 0?i=e.length-t:i>e.length-t&&le(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ke=class n extends Yu{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new W(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},QP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rn=class n extends Yu{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return QP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new W(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new W(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ke.fromString(e))}static fromName(e){return new n(Ke.fromString(e).popFirst(5))}static empty(){return new n(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ke(e.slice()))}};var jm=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};jm.UNKNOWN_ID=-1;function XP(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=pe.fromTimestamp(i===1e9?new bt(t+1,0):new bt(t,i));return new Gr(r,ne.empty(),e)}function JP(n){return new Gr(n.readTime,n.key,-1)}var Gr=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(pe.min(),ne.empty(),-1)}static max(){return new n(pe.max(),ne.empty(),-1)}};function ZP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var eM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gc(n){return v(this,null,function*(){if(n.code!==U.FAILED_PRECONDITION||n.message!==eM)throw n;X("LocalStore","Unexpectedly lost primary lease")})}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let h=l;t(e[h]).next(f=>{o[h]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function tM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _c(n){return n.name==="IndexedDbTransactionError"}var eE=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Sh(n){return n==null}function rc(n){return n===0&&1/n==-1/0}function nM(n){return typeof n=="number"&&Number.isInteger(n)&&!rc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var iM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],E4=[...iM,"documentOverlays"],rM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sM=rM,oM=[...sM,"indexConfiguration","indexState","indexEntries"];var T4=[...oM,"globals"];function II(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var et=class n{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hs(this.root,e,this.comparator,!0)}},Hs=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();let e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}};Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dt=class n{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qu(this.data.getIterator())}getIteratorFrom(e){return new Qu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Qu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var fn=class n{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dt(rn.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Xu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xu("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var aM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(n){if(Ue(!!n),typeof n=="string"){let e=0,t=aM.exec(n);if(Ue(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ar(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}function g_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function __(n){let e=n.mapValue.fields.__previous_value__;return g_(e)?__(e):e}function sc(n){let e=Ti(n.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}var $m=class{constructor(e,t,i,r,s,o,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},Ju=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $u={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g_(n)?4:iE(n)?9007199254740991:nE(n)?10:11:le()}function Jn(n,e){if(n===e)return!0;let t=Hr(n);if(t!==Hr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sc(n).isEqual(sc(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Ti(r.timestampValue),c=Ti(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return ar(r.bytesValue).isEqual(ar(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return He(r.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(r.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return He(r.integerValue)===He(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=He(r.doubleValue),c=He(s.doubleValue);return o===c?rc(o)===rc(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Qs(n.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(II(o)!==II(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Jn(o[l],c[l])))return!1;return!0}(n,e);default:return le()}}function oc(n,e){return(n.values||[]).find(t=>Jn(t,e))!==void 0}function Xs(n,e){if(n===e)return 0;let t=Hr(n),i=Hr(e);if(t!==i)return Ae(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=He(s.integerValue||s.doubleValue),l=He(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return EI(n.timestampValue,e.timestampValue);case 4:return EI(sc(n),sc(e));case 5:return Ae(n.stringValue,e.stringValue);case 6:return function(s,o){let c=ar(s),l=ar(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){let f=Ae(c[h],l[h]);if(f!==0)return f}return Ae(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Ae(He(s.latitude),He(o.latitude));return c!==0?c:Ae(He(s.longitude),He(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return TI(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,h,f;let m=s.fields||{},_=o.fields||{},E=(c=m.value)===null||c===void 0?void 0:c.arrayValue,k=(l=_.value)===null||l===void 0?void 0:l.arrayValue,P=Ae(((h=E?.values)===null||h===void 0?void 0:h.length)||0,((f=k?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:TI(E,k)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===$u.mapValue&&o===$u.mapValue)return 0;if(s===$u.mapValue)return 1;if(o===$u.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let _=Ae(l[m],f[m]);if(_!==0)return _;let E=Xs(c[l[m]],h[f[m]]);if(E!==0)return E}return Ae(l.length,f.length)}(n.mapValue,e.mapValue);default:throw le()}}function EI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=Ti(n),i=Ti(e),r=Ae(t.seconds,i.seconds);return r!==0?r:Ae(t.nanos,i.nanos)}function TI(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Xs(t[r],i[r]);if(s)return s}return Ae(t.length,i.length)}function Js(n){return qm(n)}function qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Ti(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ar(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=qm(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${qm(t.fields[o])}`;return r+"}"}(n.mapValue):le()}function CI(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gm(n){return!!n&&"integerValue"in n}function v_(n){return!!n&&"arrayValue"in n}function AI(n){return!!n&&"nullValue"in n}function SI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gu(n){return!!n&&"mapValue"in n}function nE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ec(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zr(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ec(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ec(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Gu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(t)}setAll(e){let t=rn.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=ec(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Gu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Gu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Zr(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(ec(this.value))}};function rE(n){let e=[];return Zr(n.fields,(t,i)=>{let r=new rn([t]);if(Gu(i)){let s=rE(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new fn(e)}var Dn=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,pe.min(),pe.min(),pe.min(),nn.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,pe.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,pe.min(),pe.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pe.min(),pe.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zs=class{constructor(e,t){this.position=e,this.inclusive=t}};function RI(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=ne.comparator(ne.fromName(o.referenceValue),t.key):i=Xs(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function DI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jn(n.position[t],e.position[t]))return!1;return!0}var Wr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function cM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zu=class{},ut=class n extends Zu{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Wm(e,t,i):t==="array-contains"?new Qm(e,i):t==="in"?new Xm(e,i):t==="not-in"?new Jm(e,i):t==="array-contains-any"?new Zm(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Km(e,i):new Ym(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xs(t,this.value)):t!==null&&Hr(this.value)===Hr(t)&&this.matchesComparison(Xs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xn=class n extends Zu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return sE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function sE(n){return n.op==="and"}function oE(n){return lM(n)&&sE(n)}function lM(n){for(let e of n.filters)if(e instanceof xn)return!1;return!0}function Hm(n){if(n instanceof ut)return n.field.canonicalString()+n.op.toString()+Js(n.value);if(oE(n))return n.filters.map(e=>Hm(e)).join(",");{let e=n.filters.map(t=>Hm(t)).join(",");return`${n.op}(${e})`}}function aE(n,e){return n instanceof ut?function(i,r){return r instanceof ut&&i.op===r.op&&i.field.isEqual(r.field)&&Jn(i.value,r.value)}(n,e):n instanceof xn?function(i,r){return r instanceof xn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&aE(o,r.filters[c]),!0):!1}(n,e):void le()}function cE(n){return n instanceof ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Js(t.value)}`}(n):n instanceof xn?function(t){return t.op.toString()+" {"+t.getFilters().map(cE).join(" ,")+"}"}(n):"Filter"}var Wm=class extends ut{constructor(e,t,i){super(e,t,i),this.key=ne.fromName(i.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},Km=class extends ut{constructor(e,t){super(e,"in",t),this.keys=lE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Ym=class extends ut{constructor(e,t){super(e,"not-in",t),this.keys=lE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function lE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ne.fromName(i.referenceValue))}var Qm=class extends ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return v_(t)&&oc(t.arrayValue,this.value)}},Xm=class extends ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}},Jm=class extends ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!oc(this.value.arrayValue,t)}},Zm=class extends ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!v_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>oc(this.value.arrayValue,i))}};var eg=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function xI(n,e=null,t=[],i=[],r=null,s=null,o=null){return new eg(n,e,t,i,r,s,o)}function y_(n){let e=de(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Hm(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Js(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Js(i)).join(",")),e.ue=t}return e.ue}function b_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DI(n.startAt,e.startAt)&&DI(n.endAt,e.endAt)}function tg(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var cr=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function uM(n,e,t,i,r,s,o,c){return new cr(n,e,t,i,r,s,o,c)}function w_(n){return new cr(n)}function kI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uE(n){return n.collectionGroup!==null}function tc(n){let e=de(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Dt(rn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wr(s,i))}),t.has(rn.keyField().canonicalString())||e.ce.push(new Wr(rn.keyField(),i))}return e.ce}function Qn(n){let e=de(n);return e.le||(e.le=hM(e,tc(n))),e.le}function hM(n,e){if(n.limitType==="F")return xI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Wr(r.field,s)});let t=n.endAt?new Zs(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Zs(n.startAt.position,n.startAt.inclusive):null;return xI(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ng(n,e){let t=n.filters.concat([e]);return new cr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ig(n,e,t){return new cr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rh(n,e){return b_(Qn(n),Qn(e))&&n.limitType===e.limitType}function hE(n){return`${y_(Qn(n))}|lt:${n.limitType}`}function $s(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>cE(r)).join(", ")}]`),Sh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Js(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Js(r)).join(",")),`Target(${i})`}(Qn(n))}; limitType=${n.limitType})`}function Dh(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ne.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of tc(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let h=RI(o,c,l);return o.inclusive?h<=0:h<0}(i.startAt,tc(i),r)||i.endAt&&!function(o,c,l){let h=RI(o,c,l);return o.inclusive?h>=0:h>0}(i.endAt,tc(i),r))}(n,e)}function dM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dE(n){return(e,t)=>{let i=!1;for(let r of tc(n)){let s=fM(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function fM(n,e,t){let i=n.field.isKeyField()?ne.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),h=c.data.field(s);return l!==null&&h!==null?Xs(l,h):le()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return le()}}var lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return tE(this.inner)}size(){return this.innerSize}};var pM=new et(ne.comparator);function Ci(){return pM}var fE=new et(ne.comparator);function Za(...n){let e=fE;for(let t of n)e=e.insert(t.key,t);return e}function pE(n){let e=fE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function jr(){return nc()}function mE(){return nc()}function nc(){return new lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var mM=new et(ne.comparator),gM=new Dt(ne.comparator);function be(...n){let e=gM;for(let t of n)e=e.add(t);return e}var _M=new Dt(Ae);function vM(){return _M}function I_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function gE(n){return{integerValue:""+n}}function yM(n,e){return nM(e)?gE(e):I_(n,e)}var eo=class{constructor(){this._=void 0}};function bM(n,e,t){return n instanceof to?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&g_(s)&&(s=__(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Kr?vE(n,e):n instanceof Yr?yE(n,e):function(r,s){let o=_E(r,s),c=PI(o)+PI(r.Pe);return Gm(o)&&Gm(r.Pe)?gE(c):I_(r.serializer,c)}(n,e)}function wM(n,e,t){return n instanceof Kr?vE(n,e):n instanceof Yr?yE(n,e):t}function _E(n,e){return n instanceof no?function(i){return Gm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var to=class extends eo{},Kr=class extends eo{constructor(e){super(),this.elements=e}};function vE(n,e){let t=bE(e);for(let i of n.elements)t.some(r=>Jn(r,i))||t.push(i);return{arrayValue:{values:t}}}var Yr=class extends eo{constructor(e){super(),this.elements=e}};function yE(n,e){let t=bE(e);for(let i of n.elements)t=t.filter(r=>!Jn(r,i));return{arrayValue:{values:t}}}var no=class extends eo{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function PI(n){return He(n.integerValue||n.doubleValue)}function bE(n){return v_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function IM(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Kr&&r instanceof Kr||i instanceof Yr&&r instanceof Yr?Qs(i.elements,r.elements,Jn):i instanceof no&&r instanceof no?Jn(i.Pe,r.Pe):i instanceof to&&r instanceof to}(n.transform,e.transform)}var rg=class{constructor(e,t){this.version=e,this.transformResults=t}},sn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var io=class{};function wE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ro(n.key,sn.none()):new Qr(n.key,n.data,sn.none());{let t=n.data,i=nn.empty(),r=new Dt(rn.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Zn(n.key,i,new fn(r.toArray()),sn.none())}}function EM(n,e,t){n instanceof Qr?function(r,s,o){let c=r.value.clone(),l=OI(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Zn?function(r,s,o){if(!Hu(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=OI(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(IE(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ic(n,e,t,i){return n instanceof Qr?function(s,o,c,l){if(!Hu(s.precondition,o))return c;let h=s.value.clone(),f=NI(s.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof Zn?function(s,o,c,l){if(!Hu(s.precondition,o))return c;let h=NI(s.fieldTransforms,l,o),f=o.data;return f.setAll(IE(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,i):function(s,o,c){return Hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function TM(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=_E(i.transform,r||null);s!=null&&(t===null&&(t=nn.empty()),t.set(i.field,s))}return t||null}function MI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Qs(i,r,(s,o)=>IM(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qr=class extends io{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Zn=class extends io{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function IE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function OI(n,e,t){let i=new Map;Ue(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,wM(o,c,t[r]))}return i}function NI(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,bM(s,o,e))}return i}var ro=class extends io{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},sg=class extends io{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var og=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&EM(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ic(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ic(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=mE();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=wE(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(t,i)=>MI(t,i))&&Qs(this.baseMutations,e.baseMutations,(t,i)=>MI(t,i))}},ag=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ue(e.mutations.length===i.length);let r=function(){return mM}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var cg=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lg=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ct,Ee;function CM(n){switch(n){default:return le();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function EE(n){if(n===void 0)return Ei("GRPC error has no .code"),U.UNKNOWN;switch(n){case ct.OK:return U.OK;case ct.CANCELLED:return U.CANCELLED;case ct.UNKNOWN:return U.UNKNOWN;case ct.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ct.INTERNAL:return U.INTERNAL;case ct.UNAVAILABLE:return U.UNAVAILABLE;case ct.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ct.NOT_FOUND:return U.NOT_FOUND;case ct.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ct.ABORTED:return U.ABORTED;case ct.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ct.DATA_LOSS:return U.DATA_LOSS;default:return le()}}(Ee=ct||(ct={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var VI=null;function AM(){return new TextEncoder}var SM=new sr([4294967295,4294967295],0);function FI(n){let e=AM().encode(n),t=new Im;return t.update(e),new Uint8Array(t.digest())}function LI(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sr([t,i],0),new sr([r,s],0)]}var ug=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new zr(`Invalid padding: ${t}`);if(i<0)throw new zr(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new zr(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new zr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=sr.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(sr.fromNumber(i)));return r.compare(SM)===1&&(r=new sr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=FI(e),[i,r]=LI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=FI(e),[i,r]=LI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var eh=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(pe.min(),r,new et(Ae),Ci(),be())}},ac=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,be(),be(),be())}};var Ws=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},th=class{constructor(e,t){this.targetId=e,this.me=t}},nh=class{constructor(e,t,i=xt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},ih=class{constructor(){this.fe=0,this.ge=BI(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),i=be();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:le()}}),new ac(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=BI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},hg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ci(),this.qe=UI(),this.Qe=new et(Ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:le()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(tg(s))if(i===0){let o=new ne(s.path);this.Ue(t,o,Dn.newNoDocument(o,pe.min()))}else Ue(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}VI?.et(function(f,m,_,E,k){var P,D,Y,Z,q,ie;let De={localCacheCount:f,existenceFilterCount:m.count,databaseId:_.database,projectId:_.projectId},fe=m.unchangedNames;return fe&&(De.bloomFilter={applied:k===0,hashCount:(P=fe?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Z=(Y=(D=fe?.bits)===null||D===void 0?void 0:D.bitmap)===null||Y===void 0?void 0:Y.length)!==null&&Z!==void 0?Z:0,padding:(ie=(q=fe?.bits)===null||q===void 0?void 0:q.padding)!==null&&ie!==void 0?ie:0,mightContain:T=>{var g;return(g=E?.mightContain(T))!==null&&g!==void 0&&g}}),De}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=ar(i).toUint8Array()}catch(l){if(l instanceof Xu)return Ys("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new ug(o,r,s)}catch(l){return Ys(l instanceof zr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&tg(c.target)){let l=new ne(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Dn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=be();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new eh(e,t,this.Qe,this.ke,i);return this.ke=Ci(),this.qe=UI(),this.Qe=new et(Ae),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ih,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt(Ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ih),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function UI(){return new et(ne.comparator)}function BI(){return new et(ne.comparator)}var RM={asc:"ASCENDING",desc:"DESCENDING"},DM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xM={and:"AND",or:"OR"},dg=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fg(n,e){return n.useProto3Json||Sh(e)?e:{value:e}}function rh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kM(n,e){return rh(n,e.toTimestamp())}function Xn(n){return Ue(!!n),pe.fromTimestamp(function(t){let i=Ti(t);return new bt(i.seconds,i.nanos)}(n))}function E_(n,e){return pg(n,e).canonicalString()}function pg(n,e){let t=function(r){return new Ke(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CE(n){let e=Ke.fromString(n);return Ue(xE(e)),e}function mg(n,e){return E_(n.databaseId,e.path)}function Dm(n,e){let t=CE(e);if(t.get(1)!==n.databaseId.projectId)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(SE(t))}function AE(n,e){return E_(n.databaseId,e)}function PM(n){let e=CE(n);return e.length===4?Ke.emptyPath():SE(e)}function gg(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SE(n){return Ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function jI(n,e,t){return{name:mg(n,e),fields:t.value.mapValue.fields}}function MM(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(Ue(f===void 0||typeof f=="string"),xt.fromBase64String(f||"")):(Ue(f===void 0||f instanceof Buffer||f instanceof Uint8Array),xt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?U.UNKNOWN:EE(h.code);return new W(f,h.message||"")}(o);t=new nh(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Dm(n,i.document.name),s=Xn(i.document.updateTime),o=i.document.createTime?Xn(i.document.createTime):pe.min(),c=new nn({mapValue:{fields:i.document.fields}}),l=Dn.newFoundDocument(r,s,o,c),h=i.targetIds||[],f=i.removedTargetIds||[];t=new Ws(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Dm(n,i.document),s=i.readTime?Xn(i.readTime):pe.min(),o=Dn.newNoDocument(r,s),c=i.removedTargetIds||[];t=new Ws([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Dm(n,i.document),s=i.removedTargetIds||[];t=new Ws([],s,r,null)}else{if(!("filter"in e))return le();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new lg(r,s),c=i.targetId;t=new th(c,o)}}return t}function OM(n,e){let t;if(e instanceof Qr)t={update:jI(n,e.key,e.value)};else if(e instanceof ro)t={delete:mg(n,e.key)};else if(e instanceof Zn)t={update:jI(n,e.key,e.data),updateMask:$M(e.fieldMask)};else{if(!(e instanceof sg))return le();t={verify:mg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof to)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Kr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Yr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof no)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw le()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:kM(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(n,e.precondition)),t}function NM(n,e){return n&&n.length>0?(Ue(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Xn(r.updateTime):Xn(s);return o.isEqual(pe.min())&&(o=Xn(s)),new rg(o,r.transformResults||[])}(t,e))):[]}function VM(n,e){return{documents:[AE(n,e.path)]}}function FM(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=AE(n,r);let s=function(h){if(h.length!==0)return DE(xn.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:qs(_.field),direction:BM(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=fg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:r}}function LM(n){let e=PM(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Ue(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){let _=RE(m);return _ instanceof xn&&oE(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(_=>function(k){return new Wr(Gs(k.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(m){let _;return _=typeof m=="object"?m.value:m,Sh(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(m){let _=!!m.before,E=m.values||[];return new Zs(E,_)}(t.startAt));let h=null;return t.endAt&&(h=function(m){let _=!m.before,E=m.values||[];return new Zs(E,_)}(t.endAt)),uM(e,r,o,s,c,"F",l,h)}function UM(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Gs(t.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Gs(t.unaryFilter.field);return ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Gs(t.unaryFilter.field);return ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Gs(t.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(n):n.fieldFilter!==void 0?function(t){return ut.create(Gs(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xn.create(t.compositeFilter.filters.map(i=>RE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return le()}}(t.compositeFilter.op))}(n):le()}function BM(n){return RM[n]}function jM(n){return DM[n]}function zM(n){return xM[n]}function qs(n){return{fieldPath:n.canonicalString()}}function Gs(n){return rn.fromServerFormat(n.fieldPath)}function DE(n){return n instanceof ut?function(t){if(t.op==="=="){if(SI(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NAN"}};if(AI(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(SI(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NAN"}};if(AI(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(t.field),op:jM(t.op),value:t.value}}}(n):n instanceof xn?function(t){let i=t.getFilters().map(r=>DE(r));return i.length===1?i[0]:{compositeFilter:{op:zM(t.op),filters:i}}}(n):le()}function $M(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cc=class n{constructor(e,t,i,r,s=pe.min(),o=pe.min(),c=xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _g=class{constructor(e){this.ct=e}};function qM(n){let e=LM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ig(e,e.limit,"L"):e}var sh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(He(e.integerValue));else if("doubleValue"in e){let i=He(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),rc(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Ti(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ar(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?iE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):nE(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):le()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(He(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),ne.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};sh.vt=new sh;var vg=class{constructor(){this.un=new yg}addToCollectionParentIndex(e,t){return this.un.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Gr.min())}updateCollectionGroup(e,t,i){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},yg=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Dt(Ke.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(Ke.comparator)).toArray()}};var A4=new Uint8Array(0);var Kn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);var lc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var bg=class{constructor(){this.changes=new lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ig=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ic(i.mutation,r,fn.empty(),bt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,t,i=be()){let r=jr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Za();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=jr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,be()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=Ci(),o=nc(),c=function(){return nc()}();return t.forEach((l,h)=>{let f=i.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof Zn)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),ic(f.mutation,h,f.mutation.getFieldMask(),bt.now())):o.set(h.key,fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var m;return c.set(h,new wg(f,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let i=nc(),r=new et((o,c)=>o-c),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let f=i.get(l)||fn.empty();f=c.applyToLocalView(h,f),i.set(l,f);let m=(r.get(c.batchId)||be()).add(l);r=r.insert(c.batchId,m)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,f=l.value,m=mE();f.forEach(_=>{if(!s.has(_)){let E=wE(t.get(_),i.get(_));E!==null&&m.set(_,E),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):z.resolve(jr()),c=-1,l=s;return o.next(h=>z.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{l=l.insert(f,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,be())).next(f=>({batchId:c,changes:pE(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(i=>{let r=Za();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Za();return this.indexManager.getCollectionParents(e,s).next(c=>z.forEach(c,l=>{let h=function(m,_){return new cr(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(f=>{f.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,Dn.newInvalidDocument(f)))});let c=Za();return o.forEach((l,h)=>{let f=s.get(l);f!==void 0&&ic(f.mutation,h,fn.empty(),bt.now()),Dh(t,h)&&(c=c.insert(l,h))}),c})}};var Eg=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Xn(r.createTime)}}(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:qM(r.bundledQuery),readTime:Xn(r.readTime)}}(t)),z.resolve()}};var Tg=class{constructor(){this.overlays=new et(ne.comparator),this.Ir=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let i=jr();return z.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),z.resolve()}getOverlaysForCollection(e,t,i){let r=jr(),s=t.length+1,o=new ne(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return z.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new et((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=s.get(h.largestBatchId);f===null&&(f=jr(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=jr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=r)););return z.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new cg(t,i));let s=this.Ir.get(t);s===void 0&&(s=be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var Cg=class{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var uc=class{constructor(){this.Tr=new Dt(lt.Er),this.dr=new Dt(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new lt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new lt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new ne(new Ke([])),i=new lt(t,e),r=new lt(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ne(new Ke([])),i=new lt(t,e),r=new lt(t,e+1),s=be();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new lt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},lt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ne.comparator(e.key,t.key)||Ae(e.wr,t.wr)}static Ar(e,t){return Ae(e.wr,t.wr)||ne.comparator(e.key,t.key)}};var Ag=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(lt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new og(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new lt(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new lt(t,0),r=new lt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(Ae);return t.forEach(r=>{let s=new lt(r,0),o=new lt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;ne.isDocumentKey(s)||(s=s.child(""));let o=new lt(new ne(s),0),c=new Dt(Ae);return this.br.forEachWhile(l=>{let h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(c=c.add(l.wr)),!0)},o),z.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ue(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return z.forEach(t.mutations,r=>{let s=new lt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new lt(t,0),r=this.br.firstAfterOrEqual(i);return z.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Sg=class{constructor(e){this.Mr=e,this.docs=function(){return new et(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return z.resolve(i?i.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let i=Ci();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Dn.newInvalidDocument(r))}),z.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Ci(),o=t.path,c=new ne(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ZP(JP(f),i)<=0||(r.has(f.key)||Dh(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,i,r){le()}Or(e,t){return z.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Rg(this)}getSize(e){return z.resolve(this.size)}},Rg=class extends bg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Dg=class{constructor(e){this.persistence=e,this.Nr=new lr(t=>y_(t),b_),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uc,this.targetCount=0,this.kr=lc.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),z.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new lc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Kn(t),z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),z.waitFor(s).next(()=>r)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return z.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),z.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return z.resolve(i)}containsKey(e,t){return z.resolve(this.Br.containsKey(t))}};var xg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new eE(0),this.Kr=!1,this.Kr=!0,this.$r=new Cg,this.referenceDelegate=e(this),this.Ur=new Dg(this),this.indexManager=new vg,this.remoteDocumentCache=function(r){return new Sg(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new _g(t),this.Gr=new Eg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Ag(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){X("MemoryPersistence","Starting transaction:",e);let r=new kg(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},kg=class extends zm{constructor(e){super(),this.currentSequenceNumber=e}},Pg=class n{constructor(e){this.persistence=e,this.Jr=new uc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),z.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,i=>{let r=ne.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,pe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return z.or([()=>z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Mg=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=be(),r=be();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var Og=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ng=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Yb()?8:tM(pt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Og;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Ja()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",$s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Ja()<=ye.DEBUG&&X("QueryEngine","Query:",$s(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ja()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",$s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):z.resolve())}Yi(e,t){if(kI(t))return z.resolve(null);let i=Qn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=ig(t,null,"F"),i=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=be(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let h=this.ts(t,c);return this.ns(t,h,o,l.readTime)?this.Yi(e,ig(t,null,"F")):this.rs(e,h,t,l)}))})))}Zi(e,t,i,r){return kI(t)||r.isEqual(pe.min())?z.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?z.resolve(null):(Ja()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$s(t)),this.rs(e,o,t,XP(r,-1)).next(c=>c))})}ts(e,t){let i=new Dt(dE(e));return t.forEach((r,s)=>{Dh(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Ja()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",$s(t)),this.Ji.getDocumentsMatchingQuery(e,t,Gr.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Vg=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new et(Ae),this._s=new lr(s=>y_(s),b_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ig(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function GM(n,e,t,i){return new Vg(n,e,t,i)}function kE(n,e){return v(this,null,function*(){let t=de(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=be();for(let h of r){o.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(i,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})})}function HM(n,e){let t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,f){let m=h.batch,_=m.keys(),E=z.resolve();return _.forEach(k=>{E=E.next(()=>f.getEntry(l,k)).next(P=>{let D=h.docVersions.get(k);Ue(D!==null),P.version.compareTo(D)<0&&(m.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),f.addEntry(P)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(l,m))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=be();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function PE(n){let e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function WM(n,e){let t=de(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((f,m)=>{let _=r.get(m);if(!_)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,m)));let E=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(xt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,i)),r=r.insert(m,E),function(P,D,Y){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(_,E,f)&&c.push(t.Ur.updateTargetData(s,E))});let l=Ci(),h=be();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(KM(s,o,e.documentUpdates).next(f=>{l=f.Ps,h=f.Is})),!i.isEqual(pe.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return z.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.os=r,s))}function KM(n,e,t){let i=be(),r=be();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ci();return t.forEach((c,l)=>{let h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function YM(n,e){let t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function QM(n,e){let t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,z.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new cc(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function Fg(n,e,t){return v(this,null,function*(){let i=de(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!_c(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function zI(n,e,t){let i=de(n),r=pe.min(),s=be();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,f){let m=de(l),_=m._s.get(f);return _!==void 0?z.resolve(m.os.get(_)):m.Ur.getTargetData(h,f)}(i,o,Qn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:pe.min(),t?s:be())).next(c=>(XM(i,dM(e),c),{documents:c,Ts:s})))}function XM(n,e,t){let i=n.us.get(e)||pe.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var oh=class{constructor(){this.activeTargetIds=vM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Lg=class{constructor(){this.so=new oh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oh,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ug=class{_o(e){}shutdown(){}};var ah=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var qu=null;function xm(){return qu===null?qu=function(){return 268435456+Math.round(2147483648*Math.random())}():qu++,"0x"+qu.toString(16)}var JM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Bg=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Rt="WebChannelConnection",jg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=xm(),l=this.xo(t,i.toUriEncodedString());X("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,l,h,r).then(f=>(X("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Ys("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ao}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=JM[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=xm();return new Promise((o,c)=>{let l=new Em;l.setWithCredentials(!0),l.listenOnce(Cm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xa.NO_ERROR:let f=l.getResponseJson();X(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Xa.TIMEOUT:X(Rt,`RPC '${e}' ${s} timed out`),c(new W(U.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:let m=l.getStatus();if(X(Rt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let E=_?.error;if(E&&E.status&&E.message){let k=function(D){let Y=D.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(Y)>=0?Y:U.UNKNOWN}(E.status);c(new W(k,E.message))}else c(new W(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new W(U.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{X(Rt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(r);X(Rt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",h,i,15)})}Bo(e,t,i){let r=xm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Rm(),c=Sm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.xmlHttpFactory=new Tm({})),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let f=s.join("");X(Rt,`Creating RPC '${e}' stream ${r}: ${f}`,l);let m=o.createWebChannel(f,l),_=!1,E=!1,k=new Bg({Io:D=>{E?X(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(_||(X(Rt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),_=!0),X(Rt,`RPC '${e}' stream ${r} sending:`,D),m.send(D))},To:()=>m.close()}),P=(D,Y,Z)=>{D.listen(Y,q=>{try{Z(q)}catch(ie){setTimeout(()=>{throw ie},0)}})};return P(m,zs.EventType.OPEN,()=>{E||(X(Rt,`RPC '${e}' stream ${r} transport opened.`),k.yo())}),P(m,zs.EventType.CLOSE,()=>{E||(E=!0,X(Rt,`RPC '${e}' stream ${r} transport closed`),k.So())}),P(m,zs.EventType.ERROR,D=>{E||(E=!0,Ys(Rt,`RPC '${e}' stream ${r} transport errored:`,D),k.So(new W(U.UNAVAILABLE,"The operation could not be completed")))}),P(m,zs.EventType.MESSAGE,D=>{var Y;if(!E){let Z=D.data[0];Ue(!!Z);let q=Z,ie=q.error||((Y=q[0])===null||Y===void 0?void 0:Y.error);if(ie){X(Rt,`RPC '${e}' stream ${r} received error:`,ie);let De=ie.status,fe=function(y){let I=ct[y];if(I!==void 0)return EE(I)}(De),T=ie.message;fe===void 0&&(fe=U.INTERNAL,T="Unknown error status: "+De+" with message "+ie.message),E=!0,k.So(new W(fe,T)),m.close()}else X(Rt,`RPC '${e}' stream ${r} received:`,Z),k.bo(Z)}}),P(c,Am.STAT_EVENT,D=>{D.stat===zu.PROXY?X(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===zu.NOPROXY&&X(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function km(){return typeof document<"u"?document:null}function xh(n){return new dg(n,!0)}var ch=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&X("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var lh=class{constructor(e,t,i,r,s,o,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ch(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new W(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zg=class extends lh{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=MM(this.serializer,e),i=function(s){if(!("targetChange"in s))return pe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?Xn(o.readTime):pe.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=gg(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=tg(l)?{documents:VM(s,l)}:{query:FM(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=TE(s,o.resumeToken);let h=fg(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(pe.min())>0){c.readTime=rh(s,o.snapshotVersion.toTimestamp());let h=fg(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let i=UM(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=gg(this.serializer),t.removeTarget=e,this.a_(t)}},$g=class extends lh{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=NM(e.writeResults,e.commitTime),i=Xn(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=gg(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>OM(this.serializer,i))};this.a_(t)}};var qg=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,pg(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(U.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,pg(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Gg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ei(t),this.D_=!1):X("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Hg=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>v(this,null,function*(){es(this)&&(X("RemoteStore","Restarting streams for network reachability change."),yield function(l){return v(this,null,function*(){let h=de(l);h.L_.add(4),yield vc(h),h.q_.set("Unknown"),h.L_.delete(4),yield kh(h)})}(this))}))}),this.q_=new Gg(i,r)}};function kh(n){return v(this,null,function*(){if(es(n))for(let e of n.B_)yield e(!0)})}function vc(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ME(n,e){let t=de(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),S_(t)?A_(t):co(t).r_()&&C_(t,e))}function T_(n,e){let t=de(n),i=co(t);t.N_.delete(e),i.r_()&&OE(t,e),t.N_.size===0&&(i.r_()?i.o_():es(t)&&t.q_.set("Unknown"))}function C_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}co(n).A_(e)}function OE(n,e){n.Q_.xe(e),co(n).R_(e)}function A_(n){n.Q_=new hg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),co(n).start(),n.q_.v_()}function S_(n){return es(n)&&!co(n).n_()&&n.N_.size>0}function es(n){return de(n).L_.size===0}function NE(n){n.Q_=void 0}function ZM(n){return v(this,null,function*(){n.q_.set("Online")})}function eO(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{C_(n,e)})})}function tO(n,e){return v(this,null,function*(){NE(n),S_(n)?(n.q_.M_(e),A_(n)):n.q_.set("Unknown")})}function nO(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof nh&&e.state===2&&e.cause)try{yield function(r,s){return v(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield uh(n,i)}else if(e instanceof Ws?n.Q_.Ke(e):e instanceof th?n.Q_.He(e):n.Q_.We(e),!t.isEqual(pe.min()))try{let i=yield PE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{let f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(xt.EMPTY_BYTE_STRING,f.snapshotVersion)),OE(s,l);let m=new cc(f.target,l,h,f.sequenceNumber);C_(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){X("RemoteStore","Failed to raise snapshot:",i),yield uh(n,i)}})}function uh(n,e,t){return v(this,null,function*(){if(!_c(e))throw e;n.L_.add(1),yield vc(n),n.q_.set("Offline"),t||(t=()=>PE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){X("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield kh(n)}))})}function VE(n,e){return e().catch(t=>uh(n,t,e))}function Ph(n){return v(this,null,function*(){let e=de(n),t=ur(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iO(e);)try{let r=yield YM(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,rO(e,r)}catch(r){yield uh(e,r)}FE(e)&&LE(e)})}function iO(n){return es(n)&&n.O_.length<10}function rO(n,e){n.O_.push(e);let t=ur(n);t.r_()&&t.V_&&t.m_(e.mutations)}function FE(n){return es(n)&&!ur(n).n_()&&n.O_.length>0}function LE(n){ur(n).start()}function sO(n){return v(this,null,function*(){ur(n).p_()})}function oO(n){return v(this,null,function*(){let e=ur(n);for(let t of n.O_)e.m_(t.mutations)})}function aO(n,e,t){return v(this,null,function*(){let i=n.O_.shift(),r=ag.from(i,e,t);yield VE(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ph(n)})}function cO(n,e){return v(this,null,function*(){e&&ur(n).V_&&(yield function(i,r){return v(this,null,function*(){if(function(o){return CM(o)&&o!==U.ABORTED}(r.code)){let s=i.O_.shift();ur(i).s_(),yield VE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Ph(i)}})}(n,e)),FE(n)&&LE(n)})}function $I(n,e){return v(this,null,function*(){let t=de(n);t.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");let i=es(t);t.L_.add(3),yield vc(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield kh(t)})}function lO(n,e){return v(this,null,function*(){let t=de(n);e?(t.L_.delete(2),yield kh(t)):e||(t.L_.add(2),yield vc(t),t.q_.set("Unknown"))})}function co(n){return n.K_||(n.K_=function(t,i,r){let s=de(t);return s.w_(),new zg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:ZM.bind(null,n),Ro:eO.bind(null,n),mo:tO.bind(null,n),d_:nO.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),S_(n)?A_(n):n.q_.set("Unknown")):(yield n.K_.stop(),NE(n))}))),n.K_}function ur(n){return n.U_||(n.U_=function(t,i,r){let s=de(t);return s.w_(),new $g(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sO.bind(null,n),mo:cO.bind(null,n),f_:oO.bind(null,n),g_:aO.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.U_.s_(),yield Ph(n)):(yield n.U_.stop(),n.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Wg=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function R_(n,e){if(Ei("AsyncQueue",`${e}: ${n}`),_c(n))return new W(U.UNAVAILABLE,`${e}: ${n}`);throw n}var hh=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ne.comparator(t.key,i.key):(t,i)=>ne.comparator(t.key,i.key),this.keyedMap=Za(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var dh=class{constructor(){this.W_=new et(ne.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},so=class n{constructor(e,t,i,r,s,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,hh.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var Kg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Yg=class{constructor(){this.queries=qI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=de(t),s=r.queries;r.queries=qI(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(i)})})(this,new W(U.ABORTED,"Firestore shutting down"))}};function qI(){return new lr(n=>hE(n),Rh)}function UE(n,e){return v(this,null,function*(){let t=de(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new Kg,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=R_(o,`Initialization of query '${$s(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&D_(t)})}function BE(n,e){return v(this,null,function*(){let t=de(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function uO(n,e){let t=de(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&D_(t)}function hO(n,e,t){let i=de(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function D_(n){n.Y_.forEach(e=>{e.next()})}var Qg,GI;(GI=Qg||(Qg={})).ea="default",GI.Cache="cache";var fh=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new so(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qg.Cache}};var ph=class{constructor(e){this.key=e}},mh=class{constructor(e){this.key=e}},Xg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=dE(e),this.Ra=new hh(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new dh,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{let _=r.get(f),E=Dh(this.query,m)?m:null,k=!!_&&this.mutatedKeys.has(_.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),D=!1;_&&E?_.data.isEqual(E.data)?k!==P&&(i.track({type:3,doc:E}),D=!0):this.ga(_,E)||(i.track({type:2,doc:E}),D=!0,(l&&this.Aa(E,l)>0||h&&this.Aa(E,h)<0)&&(c=!0)):!_&&E?(i.track({type:0,doc:E}),D=!0):_&&!E&&(i.track({type:1,doc:_}),D=!0,(l||h)&&(c=!0)),D&&(E?(o=o.add(E),s=P?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,m)=>function(E,k){let P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return P(E)-P(k)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new so(this.query,e.Ra,s,o,e.mutatedKeys,l===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=be(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new mh(i))}),this.da.forEach(i=>{e.has(i)||t.push(new ph(i))}),t}ba(e){this.Ta=e.Ts,this.da=be();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return so.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Jg=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Zg=class{constructor(e){this.key=e,this.va=!1}},e_=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new lr(c=>hE(c),Rh),this.Ma=new Map,this.xa=new Set,this.Oa=new et(ne.comparator),this.Na=new Map,this.La=new uc,this.Ba={},this.ka=new Map,this.qa=lc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function dO(n,e,t=!0){return v(this,null,function*(){let i=HE(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield jE(i,e,t,!0),r})}function fO(n,e){return v(this,null,function*(){let t=HE(n);yield jE(t,e,!0,!1)})}function jE(n,e,t,i){return v(this,null,function*(){let r=yield QM(n.localStore,Qn(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield pO(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&ME(n.remoteStore,r),c})}function pO(n,e,t,i,r){return v(this,null,function*(){n.Ka=(m,_,E)=>function(P,D,Y,Z){return v(this,null,function*(){let q=D.view.ma(Y);q.ns&&(q=yield zI(P.localStore,D.query,!1).then(({documents:T})=>D.view.ma(T,q)));let ie=Z&&Z.targetChanges.get(D.targetId),De=Z&&Z.targetMismatches.get(D.targetId)!=null,fe=D.view.applyChanges(q,P.isPrimaryClient,ie,De);return WI(P,D.targetId,fe.wa),fe.snapshot})}(n,m,_,E);let s=yield zI(n.localStore,e,!0),o=new Xg(e,s.Ts),c=o.ma(s.documents),l=ac.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=o.applyChanges(c,n.isPrimaryClient,l);WI(n,t,h.wa);let f=new Jg(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function mO(n,e,t){return v(this,null,function*(){let i=de(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Rh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&T_(i.remoteStore,r.targetId),t_(i,r.targetId)}).catch(gc))):(t_(i,r.targetId),yield Fg(i.localStore,r.targetId,!0))})}function gO(n,e){return v(this,null,function*(){let t=de(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),T_(t.remoteStore,i.targetId))})}function _O(n,e,t){return v(this,null,function*(){let i=TO(n);try{let r=yield function(o,c){let l=de(o),h=bt.now(),f=c.reduce((E,k)=>E.add(k.key),be()),m,_;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=Ci(),P=be();return l.cs.getEntries(E,f).next(D=>{k=D,k.forEach((Y,Z)=>{Z.isValidDocument()||(P=P.add(Y))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,k)).next(D=>{m=D;let Y=[];for(let Z of c){let q=TM(Z,m.get(Z.key).overlayedDocument);q!=null&&Y.push(new Zn(Z.key,q,rE(q.value.mapValue),sn.exists(!0)))}return l.mutationQueue.addMutationBatch(E,h,Y,c)}).next(D=>{_=D;let Y=D.applyToLocalDocumentSet(m,P);return l.documentOverlayCache.saveOverlays(E,D.batchId,Y)})}).then(()=>({batchId:_.batchId,changes:pE(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let h=o.Ba[o.currentUser.toKey()];h||(h=new et(Ae)),h=h.insert(c,l),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,t),yield yc(i,r.changes),yield Ph(i.remoteStore)}catch(r){let s=R_(r,"Failed to persist write");t.reject(s)}})}function zE(n,e){return v(this,null,function*(){let t=de(n);try{let i=yield WM(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(Ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ue(o.va):r.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),yield yc(t,i,e)}catch(i){yield gc(i)}})}function HI(n,e,t){let i=de(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=de(o);l.onlineState=c;let h=!1;l.queries.forEach((f,m)=>{for(let _ of m.j_)_.Z_(c)&&(h=!0)}),h&&D_(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function vO(n,e,t){return v(this,null,function*(){let i=de(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new et(ne.comparator);o=o.insert(s,Dn.newNoDocument(s,pe.min()));let c=be().add(s),l=new eh(pe.min(),new Map,new et(Ae),o,c);yield zE(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),x_(i)}else yield Fg(i.localStore,e,!1).then(()=>t_(i,e,t)).catch(gc)})}function yO(n,e){return v(this,null,function*(){let t=de(n),i=e.batch.batchId;try{let r=yield HM(t.localStore,e);qE(t,i,null),$E(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield yc(t,r)}catch(r){yield gc(r)}})}function bO(n,e,t){return v(this,null,function*(){let i=de(n);try{let r=yield function(o,c){let l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next(m=>(Ue(m!==null),f=m.keys(),l.mutationQueue.removeMutationBatch(h,m))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(i.localStore,e);qE(i,e,t),$E(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield yc(i,r)}catch(r){yield gc(r)}})}function $E(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function qE(n,e,t){let i=de(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function t_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||GE(n,i)})}function GE(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(T_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),x_(n))}function WI(n,e,t){for(let i of t)i instanceof ph?(n.La.addReference(i.key,e),wO(n,i)):i instanceof mh?(X("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||GE(n,i.key)):le()}function wO(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(X("SyncEngine","New document in limbo: "+t),n.xa.add(i),x_(n))}function x_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ne(Ke.fromString(e)),i=n.qa.next();n.Na.set(i,new Zg(t)),n.Oa=n.Oa.insert(t,i),ME(n.remoteStore,new cc(Qn(w_(t.path)),i,"TargetPurposeLimboResolution",eE.oe))}}function yc(n,e,t){return v(this,null,function*(){let i=de(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(h=>{var f;if((h||t)&&i.isPrimaryClient){let m=h?!h.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(h){r.push(h);let m=Mg.Wi(l.targetId,h);s.push(m)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,h){return v(this,null,function*(){let f=de(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(h,_=>z.forEach(_.$i,E=>f.persistence.referenceDelegate.addReference(m,_.targetId,E)).next(()=>z.forEach(_.Ui,E=>f.persistence.referenceDelegate.removeReference(m,_.targetId,E)))))}catch(m){if(!_c(m))throw m;X("LocalStore","Failed to update sequence numbers: "+m)}for(let m of h){let _=m.targetId;if(!m.fromCache){let E=f.os.get(_),k=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(_,P)}}})}(i.localStore,s))})}function IO(n,e){return v(this,null,function*(){let t=de(n);if(!t.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());let i=yield kE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new W(U.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield yc(t,i.hs)}})}function EO(n,e){let t=de(n),i=t.Na.get(e);if(i&&i.va)return be().add(i.key);{let r=be(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function HE(n){let e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vO.bind(null,e),e.Ca.d_=uO.bind(null,e.eventManager),e.Ca.$a=hO.bind(null,e.eventManager),e}function TO(n){let e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bO.bind(null,e),e}var gh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=xh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return GM(this.persistence,new Ng,e.initialUser,this.serializer)}createPersistence(e){return new xg(Pg.Zr,this.serializer)}createSharedClientState(e){return new Lg}terminate(){return v(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var n_=class{initialize(e,t){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IO.bind(null,this.syncEngine),yield lO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Yg}()}createDatastore(e){let t=xh(e.databaseInfo.databaseId),i=function(s){return new jg(s)}(e.databaseInfo);return function(s,o,c,l){return new qg(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,c){return new Hg(i,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>HI(this.syncEngine,t,0),function(){return ah.D()?new ah:new Ug}())}createSyncEngine(e,t){return function(r,s,o,c,l,h,f){let m=new e_(r,s,o,c,l,h);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return v(this,null,function*(){var e,t;yield function(r){return v(this,null,function*(){let s=de(r);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield vc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var _h=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var i_=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=mt.UNAUTHENTICATED,this.clientId=Ku.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>v(this,null,function*(){X("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=R_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Pm(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>v(this,null,function*(){i.isEqual(r)||(yield kE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function KI(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield AO(n);X("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>$I(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>$I(e.remoteStore,r)),n._onlineComponents=e})}function CO(n){return n.name==="FirebaseError"?n.code===U.FAILED_PRECONDITION||n.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function AO(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!CO(t))throw t;Ys("Error using user provided cache. Falling back to memory cache: "+t),yield Pm(n,new gh)}}else X("FirestoreClient","Using default OfflineComponentProvider"),yield Pm(n,new gh);return n._offlineComponents})}function WE(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),yield KI(n,n._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),yield KI(n,new n_))),n._onlineComponents})}function SO(n){return WE(n).then(e=>e.syncEngine)}function KE(n){return v(this,null,function*(){let e=yield WE(n),t=e.eventManager;return t.onListen=dO.bind(null,e.syncEngine),t.onUnlisten=mO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gO.bind(null,e.syncEngine),t})}function RO(n,e,t={}){let i=new Rn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,c,l,h){let f=new _h({next:_=>{o.enqueueAndForget(()=>BE(s,m));let E=_.docs.has(c);!E&&_.fromCache?h.reject(new W(U.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&l&&l.source==="server"?h.reject(new W(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new fh(w_(c.path),f,{includeMetadataChanges:!0,_a:!0});return UE(s,m)}(yield KE(n),n.asyncQueue,e,t,i)})),i.promise}function DO(n,e,t={}){let i=new Rn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,c,l,h){let f=new _h({next:_=>{o.enqueueAndForget(()=>BE(s,m)),_.fromCache&&l.source==="server"?h.reject(new W(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new fh(c,f,{includeMetadataChanges:!0,_a:!0});return UE(s,m)}(yield KE(n),n.asyncQueue,e,t,i)})),i.promise}function YE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var YI=new Map;function QE(n,e,t){if(!t)throw new W(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xO(n,e,t,i){if(e===!0&&i===!0)throw new W(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QI(n){if(!ne.isDocumentKey(n))throw new W(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XI(n){if(ne.isDocumentKey(n))throw new W(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Mh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":le()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Mh(n);throw new W(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var vh=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},oo=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new W(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vh(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Om;switch(i.type){case"firstParty":return new Lm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=YI.get(t);i&&(X("ComponentProvider","Removing Datastore"),YI.delete(t),i.terminate())}(this),Promise.resolve()}};function k_(n,e,t,i={}){var r;let s=(n=pn(n,oo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=mt.MOCK_USER;else{c=mu(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new W(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new mt(h)}n._authCredentials=new Nm(new Wu(c,l))}}var Xr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Vt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},or=class n extends Xr{constructor(e,t,i){super(e,t,w_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function XE(n,e,...t){if(n=Le(n),QE("collection","path",e),n instanceof oo){let i=Ke.fromString(e,...t);return XI(i),new or(n,null,i)}{if(!(n instanceof Vt||n instanceof or))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ke.fromString(e,...t));return XI(i),new or(n.firestore,null,i)}}function P_(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Ku.newId()),QE("doc","path",e),n instanceof oo){let i=Ke.fromString(e,...t);return QI(i),new Vt(n,null,new ne(i))}{if(!(n instanceof Vt||n instanceof or))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ke.fromString(e,...t));return QI(i),new Vt(n.firestore,n instanceof or?n.converter:null,new ne(i))}}var r_=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ch(this,"async_queue_retry"),this.Eu=()=>{let t=km();t&&X("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=km();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Rn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return v(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!_c(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw Ei("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=t,t}enqueueAfterDelay(e,t,i){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let r=Wg.createAndSchedule(this,e,t,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&le()}verifyOperationInProgress(){}mu(){return v(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};var ei=class extends oo{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new r_}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZE(this),this._firestoreClient.terminate()}};function JE(n,e){let t=typeof n=="object"?n:Ji(),i=typeof n=="string"?n:e||"(default)",r=Pr(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=pu("firestore");s&&k_(r,...s)}return r}function Oh(n){return n._firestoreClient||ZE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ZE(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,h,f){return new $m(c,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,YE(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new i_(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var hc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(xt.fromBase64String(e))}catch(t){throw new W(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dc=class{constructor(e){this._methodName=e}};var fc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var pc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var kO=/^__.*__$/,s_=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qr(e,this.data,t,this.fieldTransforms)}},yh=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function eT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}var o_=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return wh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(eT(this.wu)&&kO.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},a_=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xh(e)}Nu(e,t,i,r=!1){return new o_({wu:e,methodName:t,Ou:i,path:rn.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bc(n){let e=n._freezeSettings(),t=xh(n._databaseId);return new a_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function M_(n,e,t,i,r,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,e,t,r);O_("Data must be an object, but it was:",o,i);let c=iT(i,o),l,h;if(s.merge)l=new fn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let m of s.mergeFields){let _=c_(e,m,t);if(!o.contains(_))throw new W(U.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);sT(f,_)||f.push(_)}l=new fn(f),h=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,h=o.fieldTransforms;return new s_(new nn(c),l,h)}var bh=class n extends dc{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function tT(n,e,t,i){let r=n.Nu(1,e,t);O_("Data must be an object, but it was:",r,i);let s=[],o=nn.empty();Zr(i,(l,h)=>{let f=N_(e,l,t);h=Le(h);let m=r.Cu(f);if(h instanceof bh)s.push(f);else{let _=wc(h,m);_!=null&&(s.push(f),o.set(f,_))}});let c=new fn(s);return new yh(o,c,r.fieldTransforms)}function nT(n,e,t,i,r,s){let o=n.Nu(1,e,t),c=[c_(e,i,t)],l=[r];if(s.length%2!=0)throw new W(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(c_(e,s[_])),l.push(s[_+1]);let h=[],f=nn.empty();for(let _=c.length-1;_>=0;--_)if(!sT(h,c[_])){let E=c[_],k=l[_];k=Le(k);let P=o.Cu(E);if(k instanceof bh)h.push(E);else{let D=wc(k,P);D!=null&&(h.push(E),f.set(E,D))}}let m=new fn(h);return new yh(f,m,o.fieldTransforms)}function PO(n,e,t,i=!1){return wc(t,n.Nu(i?4:3,e))}function wc(n,e){if(rT(n=Le(n)))return O_("Unsupported field value:",e,n),iT(n,e);if(n instanceof dc)return function(i,r){if(!eT(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=wc(c,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=bt.fromDate(i);return{timestampValue:rh(r.serializer,s)}}if(i instanceof bt){let s=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rh(r.serializer,s)}}if(i instanceof fc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hc)return{bytesValue:TE(r.serializer,i._byteString)};if(i instanceof Vt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:E_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof pc)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return I_(c.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Mh(i)}`)}(n,e)}function iT(n,e){let t={};return tE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(n,(i,r)=>{let s=wc(r,e.bu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function rT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof fc||n instanceof hc||n instanceof Vt||n instanceof dc||n instanceof pc)}function O_(n,e,t){if(!rT(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Mh(t);throw i==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+i)}}function c_(n,e,t){if((e=Le(e))instanceof Jr)return e._internalPath;if(typeof e=="string")return N_(n,e);throw wh("Field path arguments must be of type string or ",n,!1,void 0,t)}var MO=new RegExp("[~\\*/\\[\\]]");function N_(n,e,t){if(e.search(MO)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jr(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wh(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new W(U.INVALID_ARGUMENT,c+n+l)}function sT(n,e){return n.some(t=>t.isEqual(e))}var Ih=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new l_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Nh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},l_=class extends Ih{data(){return super.data()}};function Nh(n,e){return typeof e=="string"?N_(n,e):e instanceof Jr?e._internalPath:e._delegate._internalPath}function OO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mc=class{},Eh=class extends mc{};function oT(n,e,...t){let i=[];e instanceof mc&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof u_).length,c=s.filter(l=>l instanceof Th).length;if(o>1||o>0&&c>0)throw new W(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Th=class n extends Eh{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return lT(e._query,t),new Xr(e.firestore,e.converter,ng(e._query,t))}_parse(e){let t=bc(e.firestore);return function(s,o,c,l,h,f,m){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ZI(m,f);let E=[];for(let k of m)E.push(JI(l,s,k));_={arrayValue:{values:E}}}else _=JI(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ZI(m,f),_=PO(c,o,m,f==="in"||f==="not-in");return ut.create(h,f,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function aT(n,e,t){let i=e,r=Nh("where",n);return Th._create(r,i,t)}var u_=class n extends mc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:xn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)lT(o,l),o=ng(o,l)}(e._query,t),new Xr(e.firestore,e.converter,ng(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var h_=class n extends Eh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new W(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new W(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wr(s,o)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new cr(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function cT(n,e="asc"){let t=e,i=Nh("orderBy",n);return h_._create(i,t)}function JI(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new W(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uE(e)&&t.indexOf("/")!==-1)throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ke.fromString(t));if(!ne.isDocumentKey(i))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return CI(n,new ne(i))}if(t instanceof Vt)return CI(n,t._key);throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(t)}.`)}function ZI(n,e){if(!Array.isArray(n)||n.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lT(n,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new W(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var d_=class{convertValue(e,t="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Zr(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>He(o.doubleValue));return new pc(s)}convertGeoPoint(e){return new fc(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=__(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){let t=Ti(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ke.fromString(e);Ue(xE(i));let r=new Ju(i.get(1),i.get(3)),s=new ne(i.popFirst(5));return r.isEqual(t)||Ei(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function V_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var $r=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ch=class extends Ih{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Nh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Ks=class extends Ch{data(e={}){return super.data(e)}},f_=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $r(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ks(this._firestore,this._userDataWriter,i.key,i,new $r(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Ks(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $r(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Ks(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $r(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:NO(c.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function NO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function uT(n){n=pn(n,Vt);let e=pn(n.firestore,ei);return RO(Oh(e),n._key).then(t=>VO(e,n,t))}var Ah=class extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}};function hT(n){n=pn(n,Xr);let e=pn(n.firestore,ei),t=Oh(e),i=new Ah(e);return OO(n._query),DO(t,n._query).then(r=>new f_(e,i,n,r))}function dT(n,e,t){n=pn(n,Vt);let i=pn(n.firestore,ei),r=V_(n.converter,e,t);return Ic(i,[M_(bc(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,sn.none())])}function fT(n,e,t,...i){n=pn(n,Vt);let r=pn(n.firestore,ei),s=bc(r),o;return o=typeof(e=Le(e))=="string"||e instanceof Jr?nT(s,"updateDoc",n._key,e,t,i):tT(s,"updateDoc",n._key,e),Ic(r,[o.toMutation(n._key,sn.exists(!0))])}function pT(n){return Ic(pn(n.firestore,ei),[new ro(n._key,sn.none())])}function mT(n,e){let t=pn(n.firestore,ei),i=P_(n),r=V_(n.converter,e);return Ic(t,[M_(bc(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,sn.exists(!1))]).then(()=>i)}function Ic(n,e){return function(i,r){let s=new Rn;return i.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return _O(yield SO(i),r,s)})),s.promise}(Oh(n),e)}function VO(n,e,t){let i=t.docs.get(e._key),r=new Ah(n);return new Ch(n,r,e._key,i,new $r(t.hasPendingWrites,t.fromCache),e.converter)}var p_=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bc(e)}set(e,t,i){this._verifyNotCommitted();let r=Mm(e,this._firestore),s=V_(r.converter,t,i),o=M_(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,sn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=Mm(e,this._firestore),o;return o=typeof(t=Le(t))=="string"||t instanceof Jr?nT(this._dataReader,"WriteBatch.update",s._key,t,i,r):tT(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,sn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Mm(e,this._firestore);return this._mutations=this._mutations.concat(new ro(t._key,sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Mm(n,e){if((n=Le(n)).firestore!==e)throw new W(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function gT(n){return Oh(n=pn(n,ei)),new p_(n,e=>Ic(n,e))}(function(e,t=!0){(function(r){ao=r})(Gn),$n(new zt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new ei(new Vm(i.getProvider("auth-internal")),new Bm(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(h.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ge(wI,"4.7.2",e),Ge(wI,"4.7.2","esm2017")})();var Ye=class{constructor(e){return e}},_T="firestore",F_=class{constructor(){return Or(_T)}};var L_=new K("angularfire2.firestore-instances");function FO(n,e){let t=Us(_T,n,e);return t&&new Ye(t)}function LO(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ye(i)}}var UO={provide:F_,deps:[[new ot,L_]]},BO={provide:Ye,useFactory:FO,deps:[[new ot,L_],Sn]};function vT(n,...e){return Ge("angularfire",vi.full,"fst"),Ot([BO,UO,{provide:L_,useFactory:LO(n),multi:!0,deps:[re,Pe,er,yi,[new ot,Br],[new ot,Zi],...e]}])}var on=ke(mT,!0);var Qe=ke(XE,!0);var yT=ke(k_,!0);var Ec=ke(pT,!0);var ht=ke(P_,!0);var hr=ke(uT,!0);var mn=ke(hT,!0);var bT=ke(JE,!0);var U_=ke(cT,!0);var Tc=ke(oT,!0);var lo=ke(dT,!0);var Cc=ke(fT,!0);var wT=ke(aT,!0),IT=ke(gT,!0);var xT="firebasestorage.googleapis.com",kT="storageBucket",jO=2*60*1e3,zO=10*60*1e3,$O=1e3;var Xe=class n extends Nt{constructor(e,t,i=0){super(B_(e),`Firebase Storage: ${t} (${B_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return B_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},We=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(We||{});function B_(n){return"storage/"+n}function Y_(){let n="An unknown error occurred, please check the error payload for server response.";return new Xe(We.UNKNOWN,n)}function qO(n){return new Xe(We.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function GO(n){return new Xe(We.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HO(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xe(We.UNAUTHENTICATED,n)}function WO(){return new Xe(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KO(n){return new Xe(We.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function PT(){return new Xe(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MT(){return new Xe(We.CANCELED,"User canceled the upload/download.")}function YO(n){return new Xe(We.INVALID_URL,"Invalid URL '"+n+"'.")}function QO(n){return new Xe(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function XO(){return new Xe(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kT+"' property when initializing the app?")}function OT(){return new Xe(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JO(){return new Xe(We.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function ZO(){return new Xe(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eN(n){return new Xe(We.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function z_(n){return new Xe(We.INVALID_ARGUMENT,n)}function NT(){return new Xe(We.APP_DELETED,"The Firebase app was deleted.")}function tN(n){return new Xe(We.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sc(n,e){return new Xe(We.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ac(n){throw new Xe(We.INTERNAL_ERROR,"Internal error: "+n)}var kn=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw QO(e)}static makeFromUrl(e,t){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function h(ie){ie.path_=decodeURIComponent(ie.path)}let f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",E=new RegExp(`^https?://${m}/${f}/b/${r}/o${_}`,"i"),k={bucket:1,path:3},P=t===xT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",Y=new RegExp(`^https?://${P}/${r}/${D}`,"i"),q=[{regex:c,indices:l,postModify:s},{regex:E,indices:k,postModify:h},{regex:Y,indices:{bucket:1,path:2},postModify:h}];for(let ie=0;ie<q.length;ie++){let De=q[ie],fe=De.regex.exec(e);if(fe){let T=fe[De.indices.bucket],g=fe[De.indices.path];g||(g=""),i=new n(T,g),De.postModify(i);break}}if(i==null)throw YO(e);return i}},$_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function nN(n,e,t){let i=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let h=!1;function f(...D){h||(h=!0,e.apply(null,D))}function m(D){r=setTimeout(()=>{r=null,n(E,l())},D)}function _(){s&&clearTimeout(s)}function E(D,...Y){if(h){_();return}if(D){_(),f.call(null,D,...Y);return}if(l()||o){_(),f.call(null,D,...Y);return}i<64&&(i*=2);let q;c===1?(c=2,q=0):q=(i+Math.random())*1e3,m(q)}let k=!1;function P(D){k||(k=!0,_(),!h&&(r!==null?(D||(c=2),clearTimeout(r),m(0)):D||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,P(!0)},t),P}function iN(n){n(!1)}function rN(n){return n!==void 0}function sN(n){return typeof n=="function"}function oN(n){return typeof n=="object"&&!Array.isArray(n)}function Uh(n){return typeof n=="string"||n instanceof String}function ET(n){return Q_()&&n instanceof Blob}function Q_(){return typeof Blob<"u"}function TT(n,e,t,i){if(i<e)throw z_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw z_(`Invalid value for '${n}'. Expected ${t} or less.`)}function _o(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function VT(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var po=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(po||{});function FT(n,e){let t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||r||s}var q_=class{constructor(e,t,i,r,s,o,c,l,h,f,m,_=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,k)=>{this.resolve_=E,this.reject_=k,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new fo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===po.NO_ERROR,l=s.getStatus();if(!c||FT(l,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===po.ABORT;i(!1,new fo(!1,null,f));return}let h=this.successCodes_.indexOf(l)!==-1;i(!0,new fo(h,s))})},t=(i,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());rN(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=Y_();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?NT():MT();o(l)}else{let l=PT();o(l)}};this.canceled_?t(!1,new fo(!1,null,!0)):this.backoffId_=nN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&iN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},fo=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function aN(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function cN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lN(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uN(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function hN(n,e,t,i,r,s,o=!0){let c=VT(n.urlParams),l=n.url+c,h=Object.assign({},n.headers);return lN(h,e),aN(h,t),cN(h,s),uN(h,i),new q_(l,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}function dN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fN(...n){let e=dN();if(e!==void 0){let t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Q_())return new Blob(n);throw new Xe(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pN(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function mN(n){if(typeof atob>"u")throw eN("base-64");return atob(n)}var ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Rc=class{constructor(e,t){this.data=e,this.contentType=t||null}};function gN(n,e){switch(n){case ti.RAW:return new Rc(LT(e));case ti.BASE64:case ti.BASE64URL:return new Rc(UT(n,e));case ti.DATA_URL:return new Rc(vN(e),yN(e))}throw Y_()}function LT(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=i,o=n.charCodeAt(++t);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function _N(n){let e;try{e=decodeURIComponent(n)}catch{throw Sc(ti.DATA_URL,"Malformed data URL.")}return LT(e)}function UT(n,e){switch(n){case ti.BASE64:{let r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Sc(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ti.BASE64URL:{let r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Sc(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=mN(e)}catch(r){throw r.message.includes("polyfill")?r:Sc(n,"Invalid character found")}let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}var Fh=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Sc(ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=t[1]||null;i!=null&&(this.base64=bN(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function vN(n){let e=new Fh(n);return e.base64?UT(ti.BASE64,e.rest):_N(e.rest)}function yN(n){return new Fh(n).contentType}function bN(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Lh=class n{constructor(e,t){let i=0,r="";ET(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ET(this.data_)){let i=this.data_,r=pN(i,e,t);return r===null?null:new n(r)}else{let i=new Uint8Array(this.data_.buffer,e,t-e);return new n(i,!0)}}static getBlob(...e){if(Q_()){let t=e.map(i=>i instanceof n?i.data_:i);return new n(fN.apply(null,t))}else{let t=e.map(o=>Uh(o)?gN(ti.RAW,o).data:o.data_),i=0;t.forEach(o=>{i+=o.byteLength});let r=new Uint8Array(i),s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)r[s++]=o[c]}),new n(r,!0)}}uploadData(){return this.data_}};function BT(n){let e;try{e=JSON.parse(n)}catch{return null}return oN(e)?e:null}function wN(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function IN(n,e){let t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function jT(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function EN(n,e){return e}var wt=class{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||EN}},Vh=null;function TN(n){return!Uh(n)||n.length<2?n:jT(n)}function zT(){if(Vh)return Vh;let n=[];n.push(new wt("bucket")),n.push(new wt("generation")),n.push(new wt("metageneration")),n.push(new wt("name","fullPath",!0));function e(s,o){return TN(o)}let t=new wt("name");t.xform=e,n.push(t);function i(s,o){return o!==void 0?Number(o):o}let r=new wt("size");return r.xform=i,n.push(r),n.push(new wt("timeCreated")),n.push(new wt("updated")),n.push(new wt("md5Hash",null,!0)),n.push(new wt("cacheControl",null,!0)),n.push(new wt("contentDisposition",null,!0)),n.push(new wt("contentEncoding",null,!0)),n.push(new wt("contentLanguage",null,!0)),n.push(new wt("contentType",null,!0)),n.push(new wt("metadata","customMetadata",!0)),Vh=n,Vh}function CN(n,e){function t(){let i=n.bucket,r=n.fullPath,s=new kn(i,r);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function AN(n,e,t){let i={};i.type="file";let r=t.length;for(let s=0;s<r;s++){let o=t[s];i[o.local]=o.xform(i,e[o.server])}return CN(i,n),i}function $T(n,e,t){let i=BT(e);return i===null?null:AN(n,i,t)}function SN(n,e,t,i){let r=BT(e);if(r===null||!Uh(r.downloadTokens))return null;let s=r.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(h=>{let f=n.bucket,m=n.fullPath,_="/b/"+o(f)+"/o/"+o(m),E=_o(_,t,i),k=VT({alt:"media",token:h});return E+k})[0]}function qT(n,e){let t={},i=e.length;for(let r=0;r<i;r++){let s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var Si=class{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Ai(n){if(!n)throw Y_()}function X_(n,e){function t(i,r){let s=$T(n,r,e);return Ai(s!==null),s}return t}function RN(n,e){function t(i,r){let s=$T(n,r,e);return Ai(s!==null),SN(s,r,n.host,n._protocol)}return t}function xc(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=WO():r=HO():t.getStatus()===402?r=GO(n.bucket):t.getStatus()===403?r=KO(n.path):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}return e}function J_(n){let e=xc(n);function t(i,r){let s=e(i,r);return i.getStatus()===404&&(s=qO(n.path)),s.serverResponse=r.serverResponse,s}return t}function DN(n,e,t){let i=e.fullServerUrl(),r=_o(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new Si(r,s,X_(n,t),o);return c.errorHandler=J_(e),c}function xN(n,e,t){let i=e.fullServerUrl(),r=_o(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new Si(r,s,RN(n,t),o);return c.errorHandler=J_(e),c}function kN(n,e){let t=e.fullServerUrl(),i=_o(t,n.host,n._protocol),r="DELETE",s=n.maxOperationRetryTime;function o(l,h){}let c=new Si(i,r,o,s);return c.successCodes=[200,204],c.errorHandler=J_(e),c}function PN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function GT(n,e,t){let i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=PN(null,e)),i}function MN(n,e,t,i,r){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let q="";for(let ie=0;ie<2;ie++)q=q+Math.random().toString().slice(2);return q}let l=c();o["Content-Type"]="multipart/related; boundary="+l;let h=GT(e,i,r),f=qT(h,t),m="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+l+"--",E=Lh.getBlob(m,i,_);if(E===null)throw OT();let k={name:h.fullPath},P=_o(s,n.host,n._protocol),D="POST",Y=n.maxUploadRetryTime,Z=new Si(P,D,X_(n,t),Y);return Z.urlParams=k,Z.headers=o,Z.body=E.uploadData(),Z.errorHandler=xc(e),Z}var mo=class{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}};function Z_(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ai(!1)}return Ai(!!t&&(e||["active"]).indexOf(t)!==-1),t}function ON(n,e,t,i,r){let s=e.bucketOnlyServerUrl(),o=GT(e,i,r),c={name:o.fullPath},l=_o(s,n.host,n._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=qT(o,t),_=n.maxUploadRetryTime;function E(P){Z_(P);let D;try{D=P.getResponseHeader("X-Goog-Upload-URL")}catch{Ai(!1)}return Ai(Uh(D)),D}let k=new Si(l,h,E,_);return k.urlParams=c,k.headers=f,k.body=m,k.errorHandler=xc(e),k}function NN(n,e,t,i){let r={"X-Goog-Upload-Command":"query"};function s(h){let f=Z_(h,["active","final"]),m=null;try{m=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ai(!1)}m||Ai(!1);let _=Number(m);return Ai(!isNaN(_)),new mo(_,i.size(),f==="final")}let o="POST",c=n.maxUploadRetryTime,l=new Si(t,o,s,c);return l.headers=r,l.errorHandler=xc(e),l}var CT=256*1024;function VN(n,e,t,i,r,s,o,c){let l=new mo(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw JO();let h=l.total-l.current,f=h;r>0&&(f=Math.min(f,r));let m=l.current,_=m+f,E="";f===0?E="finalize":h===f?E="upload, finalize":E="upload";let k={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${l.current}`},P=i.slice(m,_);if(P===null)throw OT();function D(ie,De){let fe=Z_(ie,["active","final"]),T=l.current+f,g=i.size(),y;return fe==="final"?y=X_(e,s)(ie,De):y=null,new mo(T,g,fe==="final",y)}let Y="POST",Z=e.maxUploadRetryTime,q=new Si(t,Y,D,Z);return q.headers=k,q.body=P.uploadData(),q.progressCallback=c||null,q.errorHandler=xc(n),q}var $t={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function j_(n){switch(n){case"running":case"pausing":case"canceling":return $t.RUNNING;case"paused":return $t.PAUSED;case"success":return $t.SUCCESS;case"canceled":return $t.CANCELED;case"error":return $t.ERROR;default:return $t.ERROR}}var G_=class{constructor(e,t,i){if(sN(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function ho(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var AT=null,H_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=po.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=po.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=po.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(let s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},W_=class extends H_{initXhr(){this.xhr_.responseType="text"}};function ts(){return AT?AT():new W_}var K_=class{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=zT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(We.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(FT(r.status,[]))if(s)r=PT();else{this.sleepTime=Math.max(this.sleepTime*2,$O),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(We.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let i=ON(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ts,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,i)=>{let r=NN(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,ts,t,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=CT*this._chunkMultiplier,t=new mo(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=VN(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let c=this._ref.storage._makeRequest(o,ts,r,s,!1);this._request=c,c.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){CT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let i=DN(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ts,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let i=MN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ts,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=MT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=j_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){let s=new G_(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(j_(this._state)){case $t.SUCCESS:ho(this._resolve.bind(null,this.snapshot))();break;case $t.CANCELED:case $t.ERROR:let t=this._reject;ho(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(j_(this._state)){case $t.RUNNING:case $t.PAUSED:e.next&&ho(e.next.bind(e,this.snapshot))();break;case $t.SUCCESS:e.complete&&ho(e.complete.bind(e))();break;case $t.CANCELED:case $t.ERROR:e.error&&ho(e.error.bind(e,this._error))();break;default:e.error&&ho(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var go=class n{constructor(e,t){this._service=e,t instanceof kn?this._location=t:this._location=kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jT(this._location.path)}get storage(){return this._service}get parent(){let e=wN(this._location.path);if(e===null)return null;let t=new kn(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tN(e)}};function FN(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new K_(n,new Lh(e),t)}function LN(n){n._throwIfRoot("getDownloadURL");let e=xN(n.storage,n._location,zT());return n.storage.makeRequestWithTokens(e,ts).then(t=>{if(t===null)throw ZO();return t})}function UN(n){n._throwIfRoot("deleteObject");let e=kN(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ts)}function BN(n,e){let t=IN(n._location.path,e),i=new kn(n._location.bucket,t);return new go(n.storage,i)}function jN(n){return/^[A-Za-z]+:\/\//.test(n)}function zN(n,e){return new go(n,e)}function HT(n,e){if(n instanceof Dc){let t=n;if(t._bucket==null)throw XO();let i=new go(t,t._bucket);return e!=null?HT(i,e):i}else return e!==void 0?BN(n,e):n}function $N(n,e){if(e&&jN(e)){if(n instanceof Dc)return zN(n,e);throw z_("To use ref(service, url), the first argument must be a Storage instance.")}else return HT(n,e)}function ST(n,e){let t=e?.[kT];return t==null?null:kn.makeFromBucketSpec(t,n)}function qN(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:mu(r,n.app.options.projectId))}var Dc=class{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=xT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jO,this._maxUploadRetryTime=zO,this._requests=new Set,r!=null?this._bucket=kn.makeFromBucketSpec(r,this._host):this._bucket=ST(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=ST(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){TT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){TT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new go(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new $_(NT());{let o=hN(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()})}},RT="@firebase/storage",DT="0.13.2";var WT="storage";function KT(n,e,t){return n=Le(n),FN(n,e,t)}function YT(n){return n=Le(n),LN(n)}function QT(n){return n=Le(n),UN(n)}function XT(n,e){return n=Le(n),$N(n,e)}function JT(n=Ji(),e){n=Le(n);let i=Pr(n,WT).getImmediate({identifier:e}),r=pu("storage");return r&&ev(i,...r),i}function ev(n,e,t,i={}){qN(n,e,t,i)}function GN(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Dc(t,i,r,e,Gn)}function HN(){$n(new zt(WT,GN,"PUBLIC").setMultipleInstances(!0)),Ge(RT,DT,""),Ge(RT,DT,"esm2017")}HN();var ns=class{constructor(e){return e}},ZT="storage",tv=class{constructor(){return Or(ZT)}};var nv=new K("angularfire2.storage-instances");function WN(n,e){let t=Us(ZT,n,e);return t&&new ns(t)}function KN(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new ns(i)}}var YN={provide:tv,deps:[[new ot,nv]]},QN={provide:ns,useFactory:WN,deps:[[new ot,nv],Sn]};function eC(n,...e){return Ge("angularfire",vi.full,"gcs"),Ot([QN,YN,{provide:nv,useFactory:KN(n),multi:!0,deps:[re,Pe,er,yi,[new ot,Br],[new ot,Zi],...e]}])}var tC=ke(ev,!0),nC=ke(QT,!0);var iC=ke(YT,!0);var rC=ke(JT,!0);var iv=ke(XT,!0);var sC=ke(KT,!0);var pC=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(F($i),F(Re))}}static{this.\u0275dir=Se({type:n})}}return n})(),XN=(()=>{class n extends pC{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ui(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,features:[St]})}}return n})(),mC=new K("");var JN={provide:mC,useExisting:Xo(()=>gn),multi:!0};function ZN(){let n=Is()?Is().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var e2=new K(""),gn=(()=>{class n extends pC{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ZN())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(F($i),F(Re),F(e2,8))}}static{this.\u0275dir=Se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Q("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[En([JN]),St]})}}return n})();function dr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function gC(n){return n!=null&&typeof n.length=="number"}var lv=new K(""),_C=new K(""),t2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Pn=class{static min(e){return n2(e)}static max(e){return i2(e)}static required(e){return vC(e)}static requiredTrue(e){return r2(e)}static email(e){return s2(e)}static minLength(e){return o2(e)}static maxLength(e){return a2(e)}static pattern(e){return c2(e)}static nullValidator(e){return jh(e)}static compose(e){return TC(e)}static composeAsync(e){return AC(e)}};function n2(n){return e=>{if(dr(e.value)||dr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function i2(n){return e=>{if(dr(e.value)||dr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function vC(n){return dr(n.value)?{required:!0}:null}function r2(n){return n.value===!0?null:{required:!0}}function s2(n){return dr(n.value)||t2.test(n.value)?null:{email:!0}}function o2(n){return e=>dr(e.value)||!gC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function a2(n){return e=>gC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function c2(n){if(!n)return jh;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(dr(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function jh(n){return null}function yC(n){return n!=null}function bC(n){return Rl(n)?qe(n):n}function wC(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function IC(n,e){return e.map(t=>t(n))}function l2(n){return!n.validate}function EC(n){return n.map(e=>l2(e)?e:t=>e.validate(t))}function TC(n){if(!n)return null;let e=n.filter(yC);return e.length==0?null:function(t){return wC(IC(t,e))}}function CC(n){return n!=null?TC(EC(n)):null}function AC(n){if(!n)return null;let e=n.filter(yC);return e.length==0?null:function(t){let i=IC(t,e).map(bC);return Qy(i).pipe(ve(wC))}}function SC(n){return n!=null?AC(EC(n)):null}function oC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RC(n){return n._rawValidators}function DC(n){return n._rawAsyncValidators}function rv(n){return n?Array.isArray(n)?n:[n]:[]}function zh(n,e){return Array.isArray(n)?n.includes(e):n===e}function aC(n,e){let t=rv(e);return rv(n).forEach(r=>{zh(t,r)||t.push(r)}),t}function cC(n,e){return rv(e).filter(t=>!zh(n,t))}var $h=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=SC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},bo=class extends $h{get formDirective(){return null}get path(){return null}},Nc=class extends $h{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},qh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},u2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},S3=ee(M({},u2),{"[class.ng-submitted]":"isSubmitted"}),ni=(()=>{class n extends qh{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(F(Nc,2))}}static{this.\u0275dir=Se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Xt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[St]})}}return n})(),ii=(()=>{class n extends qh{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(F(bo,10))}}static{this.\u0275dir=Se({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Xt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[St]})}}return n})();var kc="VALID",Bh="INVALID",vo="PENDING",Pc="DISABLED",fr=class{},Gh=class extends fr{constructor(e,t){super(),this.value=e,this.source=t}},Mc=class extends fr{constructor(e,t){super(),this.pristine=e,this.source=t}},Oc=class extends fr{constructor(e,t){super(),this.touched=e,this.source=t}},yo=class extends fr{constructor(e,t){super(),this.status=e,this.source=t}},sv=class extends fr{constructor(e){super(),this.source=e}},ov=class extends fr{constructor(e){super(),this.source=e}};function uv(n){return(Kh(n)?n.validators:n)||null}function h2(n){return Array.isArray(n)?CC(n):n||null}function hv(n,e){return(Kh(e)?e.asyncValidators:n)||null}function d2(n){return Array.isArray(n)?SC(n):n||null}function Kh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function xC(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Be(1e3,"");if(!i[t])throw new Be(1001,"")}function kC(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Be(1002,"")})}var wo=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=oa(()=>this.statusReactive()),this.statusReactive=hi(void 0),this._pristine=oa(()=>this.pristineReactive()),this.pristineReactive=hi(!0),this._touched=oa(()=>this.touchedReactive()),this.touchedReactive=hi(!1),this._events=new ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Un(this.statusReactive)}set status(e){Un(()=>this.statusReactive.set(e))}get valid(){return this.status===kc}get invalid(){return this.status===Bh}get pending(){return this.status==vo}get disabled(){return this.status===Pc}get enabled(){return this.status!==Pc}get pristine(){return Un(this.pristineReactive)}set pristine(e){Un(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Un(this.touchedReactive)}set touched(e){Un(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(aC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cC(e,this._rawAsyncValidators))}hasValidator(e){return zh(this._rawValidators,e)}hasAsyncValidator(e){return zh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(M({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Oc(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Oc(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(M({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Mc(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Mc(!0,i))}markAsPending(e={}){this.status=vo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pc,this.errors=null,this._forEachChild(r=>{r.disable(ee(M({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gh(this.value,i)),this._events.next(new yo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=kc,this._forEachChild(i=>{i.enable(ee(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kc||this.status===vo)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gh(this.value,t)),this._events.next(new yo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pc:kc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=bC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new yo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ne,this.statusChanges=new Ne}_calculateStatus(){return this._allControlsDisabled()?Pc:this.errors?Bh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vo)?vo:this._anyControlsHaveStatus(Bh)?Bh:kc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Mc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Oc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=h2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=d2(this._rawAsyncValidators)}},qt=class extends wo{constructor(e,t,i){super(uv(t),hv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kC(this,!0,e),Object.keys(e).forEach(i=>{xC(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var av=class extends qt{};var PC=new K("CallSetDisabledState",{providedIn:"root",factory:()=>dv}),dv="always";function f2(n,e){return[...e.path,n]}function lC(n,e,t=dv){fv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),m2(n,e),_2(n,e),g2(n,e),p2(n,e)}function uC(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Wh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Hh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p2(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function fv(n,e){let t=RC(n);e.validator!==null?n.setValidators(oC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=DC(n);e.asyncValidator!==null?n.setAsyncValidators(oC(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Hh(e._rawValidators,r),Hh(e._rawAsyncValidators,r)}function Wh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=RC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=DC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Hh(e._rawValidators,i),Hh(e._rawAsyncValidators,i),t}function m2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&MC(n,e)})}function g2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&MC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function MC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _2(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function v2(n,e){n==null,fv(n,e)}function y2(n,e){return Wh(n,e)}function b2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function w2(n){return Object.getPrototypeOf(n.constructor)===XN}function I2(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function E2(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===gn?t=s:w2(s)?i=s:r=s}),r||i||t||null}function T2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nt=class extends wo{constructor(e=null,t,i){super(uv(t),hv(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(dC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){dC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var C2=n=>n instanceof nt;var ri=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Se({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var OC=new K("");var A2={provide:bo,useExisting:Xo(()=>Mn)},Mn=(()=>{class n extends bo{get submitted(){return Un(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=oa(()=>this._submittedReactive()),this._submittedReactive=hi(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ne,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Wh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return lC(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){uC(t.control||null,t,!1),T2(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),I2(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new sv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new ov(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(uC(i||null,t),C2(r)&&(lC(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);v2(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&y2(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fv(this.form,this),this._oldForm&&Wh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(F(lv,10),F(_C,10),F(PC,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Q("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[En([A2]),St,Qt]})}}return n})();var S2={provide:Nc,useExisting:Xo(()=>On)},On=(()=>{class n extends Nc{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Ne,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=E2(this,s)}ngOnChanges(t){this._added||this._setUpControl(),b2(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return f2(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(F(bo,13),F(lv,10),F(_C,10),F(mC,10),F(OC,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[En([S2]),St,Qt]})}}return n})();var R2=(()=>{class n{constructor(){this._validator=jh}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):jh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Se({type:n,features:[Qt]})}}return n})();var D2={provide:lv,useExisting:Xo(()=>pv),multi:!0};var pv=(()=>{class n extends R2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=jt,this.createValidator=t=>vC}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ui(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Ze("required",r._enabled?"":null)},inputs:{required:"required"},features:[En([D2]),St]})}}return n})();var x2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({})}}return n})(),cv=class extends wo{constructor(e,t,i){super(uv(t),hv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){kC(this,!1,e),e.forEach((i,r)=>{xC(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function fC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Io=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return fC(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new qt(r,s)}record(t,i=null){let r=this._reduceControls(t);return new av(r,i)}control(t,i,r){let s={};return this.useNonNullable?(fC(i)?s=i:(s.validators=i,s.asyncValidators=r),new nt(t,ee(M({},s),{nonNullable:!0}))):new nt(t,i,r)}array(t,i,r){let s=t.map(o=>this._createControl(o));return new cv(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof nt)return t;if(t instanceof wo)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var si=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:OC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:PC,useValue:t.callSetDisabledState??dv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({imports:[x2]})}}return n})();var Ve=class n{constructor(){}firebaseAuth=N(Ur);user$=pI(this.firebaseAuth);curretUserSig=hi(void 0);login(e,t){let i=_I(this.firebaseAuth,e,t).then(()=>{});return qe(i)}logout(){let e=vI(this.firebaseAuth);return qe(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var gv;try{gv=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gv=!1}var it=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?A0(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||gv)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(O(bn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Fc;function P2(){if(Fc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fc=!0}))}finally{Fc=Fc||!1}return Fc}function pr(n){return P2()?n:!!n.capture}var Nn=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Nn||{}),Yh,is;function Qh(){if(is==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return is=!1,is;if("scrollBehavior"in document.documentElement.style)is=!0;else{let n=Element.prototype.scrollTo;n?is=!/\{\s*\[native code\]\s*\}/.test(n.toString()):is=!1}}return is}function Eo(){if(typeof document!="object"||!document)return Nn.NORMAL;if(Yh==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Yh=Nn.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Yh=n.scrollLeft===0?Nn.NEGATED:Nn.INVERTED),n.remove()}return Yh}var mv;function M2(){if(mv==null){let n=typeof document<"u"?document.head:null;mv=!!(n&&(n.createShadowRoot||n.attachShadow))}return mv}function NC(n){if(M2()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Lc(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Vn(n){return n.composedPath?n.composedPath()[0]:n.target}function Uc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function mr(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function jc(n,e=0){return O2(n)?Number(n):arguments.length===2?e:0}function O2(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function To(n){return Array.isArray(n)?n:[n]}function rt(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Ri(n){return n instanceof Re?n.nativeElement:n}var VC=new Set,rs,N2=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):F2}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&V2(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(O(it),O(ea,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V2(n,e){if(!VC.has(n))try{rs||(rs=document.createElement("style"),e&&rs.setAttribute("nonce",e),rs.setAttribute("type","text/css"),document.head.appendChild(rs)),rs.sheet&&(rs.sheet.insertRule(`@media ${n} {body{ }}`,0),VC.add(n))}catch(t){console.error(t)}}function F2(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var LC=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ue}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return FC(To(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=FC(To(t)).map(o=>this._registerQuery(o).observable),s=gs(r);return s=vl(s.pipe(At(1)),s.pipe(bl(1),yl(0))),s.pipe(ve(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:h})=>{c.matches=c.matches||l,c.breakpoints[h]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new Wt(o=>{let c=l=>this._zone.run(()=>o.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Yt(i),ve(({matches:o})=>({query:t,matches:o})),Lt(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(O(N2),O(re))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FC(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var J2=200,vv=class{constructor(e,t){this._letterKeyStream=new ue,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new ue,this.selectedItem=this._selectedItem;let i=typeof t?.debounceInterval=="number"?t.debounceInterval:J2;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(tt(t=>this._pressedLetters.push(t)),yl(e),ze(()=>this._pressedLetters.length>0),ve(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},yv=class{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=cn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new ue,this.change=new ue,e instanceof Zo?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):gf(e)&&(this._effectRef=_0(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new vv(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||mr(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem=r??null,this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex+e*i+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return gf(this._items)?this._items():this._items instanceof Zo?this._items.toArray():this._items}_itemsChanged(e){if(this._typeahead?.setItems(e),this._activeItem){let t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}};var Zh=class extends yv{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var zc=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return eV(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=Z2(cV(t));if(i&&(UC(i)===-1||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=UC(t);return t.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!oV(t)?!1:r==="audio"?t.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return aV(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static{this.\u0275fac=function(i){return new(i||n)(O(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Z2(n){try{return n.frameElement}catch{return null}}function eV(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function tV(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function nV(n){return rV(n)&&n.type=="hidden"}function iV(n){return sV(n)&&n.hasAttribute("href")}function rV(n){return n.nodeName.toLowerCase()=="input"}function sV(n){return n.nodeName.toLowerCase()=="a"}function zC(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function UC(n){if(!zC(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function oV(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function aV(n){return nV(n)?!1:tV(n)||iV(n)||n.hasAttribute("contenteditable")||zC(n)}function cV(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var bv=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1,o){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Ln(e,{injector:this._injector}):setTimeout(e)}},nd=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._injector=N(Pe),this._document=r}create(t,i=!1){return new bv(t,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||n)(O(zc),O(re),O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $c(n){return n.buttons===0||n.detail===0}function qc(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var lV=new K("cdk-input-modality-detector-options"),uV={ignoreKeys:[18,17,224,91,16]},$C=650,Co=pr({passive:!0,capture:!0}),hV=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ft(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vn(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<$C||(this._modality.next($c(o)?"keyboard":"mouse"),this._mostRecentTarget=Vn(o))},this._onTouchstart=o=>{if(qc(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vn(o)},this._options=M(M({},uV),s),this.modalityDetected=this._modality.pipe(bl(1)),this.modalityChanged=this.modalityDetected.pipe(hf()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Co),r.addEventListener("mousedown",this._onMousedown,Co),r.addEventListener("touchstart",this._onTouchstart,Co)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Co),document.removeEventListener("mousedown",this._onMousedown,Co),document.removeEventListener("touchstart",this._onTouchstart,Co))}static{this.\u0275fac=function(i){return new(i||n)(O(it),O(re),O(he),O(lV,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jh=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Jh||{}),dV=new K("cdk-focus-monitor-default-options"),Xh=pr({passive:!0,capture:!0}),os=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ue,this._rootNodeFocusAndBlurListener=c=>{let l=Vn(c);for(let h=l;h;h=h.parentElement)c.type==="focus"?this._onFocus(c,h):this._onBlur(c,h)},this._document=s,this._detectionMode=o?.detectionMode||Jh.IMMEDIATE}monitor(t,i=!1){let r=Ri(t);if(!this._platform.isBrowser||r.nodeType!==1)return J();let s=NC(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let c={checkChildren:i,subject:new ue,rootNode:s};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let i=Ri(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let s=Ri(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Jh.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Jh.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?$C:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),s=Vn(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Xh),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Xh)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Lt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Xh),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Xh),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(O(re),O(it),O(hV),O(he,8),O(dV,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ss=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ss||{}),BC="cdk-high-contrast-black-on-white",jC="cdk-high-contrast-white-on-black",_v="cdk-high-contrast-active",qC=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=N(LC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ss.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ss.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ss.BLACK_ON_WHITE}return ss.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(_v,BC,jC),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ss.BLACK_ON_WHITE?t.add(_v,BC):i===ss.WHITE_ON_BLACK&&t.add(_v,jC)}}static{this.\u0275fac=function(i){return new(i||n)(O(it),O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fV=new K("cdk-dir-doc",{providedIn:"root",factory:pV});function pV(){return N(he)}var mV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function gV(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?mV.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Di=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Ne,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=gV(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(O(fV,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({})}}return n})();function _V(){return!0}var vV=new K("mat-sanity-checks",{providedIn:"root",factory:_V}),as=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Uc()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(O(qC),O(vV,8),O(he))}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({imports:[gr,gr]})}}return n})();var _n=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(_n||{}),Tv=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=_n.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},GC=pr({passive:!0,capture:!0}),Cv=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Vn(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,GC)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,GC)))}},HC={enterDuration:225,exitDuration:150},yV=800,WC=pr({passive:!0,capture:!0}),KC=["mousedown","touchstart"],YC=["mouseup","mouseleave","touchend","touchcancel"],Av=class n{static{this._eventManager=new Cv}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ri(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=M(M({},HC),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||bV(e,t,r),c=e-r.left,l=t-r.top,h=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(f);let m=window.getComputedStyle(f),_=m.transitionProperty,E=m.transitionDuration,k=_==="none"||E==="0s"||E==="0s, 0s"||r.width===0&&r.height===0,P=new Tv(this,f,i,k);f.style.transform="scale3d(1, 1, 1)",P.state=_n.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let D=null;return!k&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let Y=()=>{D&&(D.fallbackTimer=null),clearTimeout(q),this._finishRippleTransition(P)},Z=()=>this._destroyRipple(P),q=setTimeout(Z,h+100);f.addEventListener("transitionend",Y),f.addEventListener("transitioncancel",Z),D={onTransitionEnd:Y,onTransitionCancel:Z,fallbackTimer:q}}),this._activeRipples.set(P,D),(k||!h)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===_n.FADING_OUT||e.state===_n.HIDDEN)return;let t=e.element,i=M(M({},HC),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=_n.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Ri(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,KC.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{YC.forEach(t=>{this._triggerElement.addEventListener(t,this,WC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===_n.FADING_IN?this._startFadeOutTransition(e):e.state===_n.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=_n.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=_n.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=$c(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+yV;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!qc(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===_n.VISIBLE||e.config.terminateOnPointerUp&&e.state===_n.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(KC.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(YC.forEach(t=>e.removeEventListener(t,this,WC)),this._pointerUpEventsRegistered=!1))}};function bV(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var wV=new K("mat-ripple-global-options"),QC=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Av(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:M(M(M({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,M(M({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,M(M({},this.rippleConfig),t))}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(re),F(it),F(wV,8),F(wn,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Xt("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),XC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({imports:[as,as]})}}return n})();var IV=["determinateSpinner"];function EV(n,e){if(n&1&&(te(),w(0,"svg",11),j(1,"circle",12),C()),n&2){let t=H();Ze("viewBox",t._viewBox()),V(),ia("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Ze("r",t._circleRadius())}}var TV=new K("mat-progress-spinner-default-options",{providedIn:"root",factory:CV});function CV(){return{diameter:JC}}var JC=100,AV=10,ZC=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}constructor(t,i,r){this._elementRef=t,this._defaultColor="primary",this._value=0,this._diameter=JC,this._noopAnimations=i==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=t.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_circleRadius(){return(this.diameter-AV)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(wn,8),F(TV))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(i&1&&un(IV,5),i&2){let s;_t(s=vt())&&(r._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,r){i&2&&(Ze("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),Cl("mat-"+r.color),ia("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),Xt("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",kl],diameter:[2,"diameter","diameter",kl],strokeWidth:[2,"strokeWidth","strokeWidth",kl]},exportAs:["matProgressSpinner"],standalone:!0,features:[In,ge],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(i&1&&(ae(0,EV,2,8,"ng-template",null,0,d0),w(2,"div",2,1),te(),w(4,"svg",3),j(5,"circle",4),C()(),Ie(),w(6,"div",5)(7,"div",6)(8,"div",7),vs(9,8),C(),w(10,"div",9),vs(11,8),C(),w(12,"div",10),vs(13,8),C()()()),i&2){let s=hn(1);V(4),Ze("viewBox",r._viewBox()),V(),ia("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Ze("r",r._circleRadius()),V(4),L("ngTemplateOutlet",s),V(2),L("ngTemplateOutlet",s),V(2),L("ngTemplateOutlet",s)}},dependencies:[T0],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return n})();var eA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({imports:[$e,as]})}}return n})();function RV(n,e){if(n&1&&(w(0,"div"),B(1),C()),n&2){let t=H(2);V(),yt(t.errorMessage)}}function DV(n,e){if(n&1){let t=Te();w(0,"div",2)(1,"div",3)(2,"h2",4),B(3,"Sign in to your account"),C()(),ae(4,RV,2,1,"div"),w(5,"div",5)(6,"form",6)(7,"div")(8,"label",7),B(9,"Email address"),C(),w(10,"div",8),j(11,"input",9),C()(),w(12,"div")(13,"div",10)(14,"label",11),B(15,"Password"),C(),w(16,"div",12)(17,"a",13),B(18,"Forgot password?"),C()()(),w(19,"div",8),j(20,"input",14),C()(),w(21,"div")(22,"button",15),Q("click",function(){se(t);let r=H();return oe(r.login())}),B(23,"Sign in"),C()()()()()}if(n&2){let t=H();V(4),ra(t.errorMessage?4:-1),V(2),L("formGroup",t.form)}}function xV(n,e){n&1&&(w(0,"div",16),j(1,"mat-spinner"),C())}var rd=class n{http=N(Tn);router=N(at);authService=N(Ve);loading=!1;form=new qt({email:new nt(""),password:new nt("")});errorMessage=null;ngOnInit(){this.authService.user$.subscribe(e=>{e&&this.router.navigateByUrl("/")})}login(){this.authService.login(this.form.value.email,this.form.value.password).subscribe({next:()=>{this.router.navigateByUrl("/")},error:e=>{this.errorMessage=e.message}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["app-login"]],standalone:!0,features:[ge],decls:2,vars:2,consts:[["class","flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",4,"ngIf"],["class","fixed top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-indigo-200",4,"ngIf"],[1,"flex","min-h-full","flex-col","justify-center","px-6","py-12","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"mt-10","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-gray-900"],[1,"mt-10","sm:mx-auto","sm:w-full","sm:max-w-sm"],["action","#",1,"space-y-6",3,"formGroup"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["type","text","placeholder","Email","formControlName","email","autocomplete","email","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"text-sm"],["href","#",1,"font-semibold","text-indigo-600","hover:text-indigo-500"],["type","password","placeholder","Password","formControlName","password","autocomplete","current-password","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["type","button",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[1,"fixed","top-0","bottom-0","left-0","right-0","flex","justify-center","items-center","bg-indigo-200"]],template:function(t,i){t&1&&ae(0,DV,24,2,"div",0)(1,xV,2,0,"div",1),t&2&&(L("ngIf",i.authService.curretUserSig()===null),V(),L("ngIf",i.authService.curretUserSig()===void 0))},dependencies:[$e,dt,si,ri,gn,ni,ii,pv,Mn,On,eA,ZC]})};var sd=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.subscribe(e=>e?!0:(this.router.navigate(["/login"]),!1))}static \u0275fac=function(t){return new(t||n)(O(Ve),O(at))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ao=class n{constructor(e){this.firestore=e}addDocument(e,t){return v(this,null,function*(){return yield on(Qe(this.firestore,e),t)})}updateDocument(e,t){return v(this,null,function*(){return yield lo(ht(this.firestore,e,t.id),t)})}getDoc(e,t){return v(this,null,function*(){return yield hr(ht(this.firestore,e,t))})}getCollectionsQuery(e,t){return v(this,null,function*(){console.log(t);let i=Tc(Qe(this.firestore,e),wT("user_uid","==",t.user_uid));return yield mn(i)})}static \u0275fac=function(t){return new(t||n)(O(Ye))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var vn=class n{constructor(e,t){this.http=e;this.firestoreService=t}authService=N(Ve);curretInstaUserSig=hi(void 0);getData(e,t){return console.info(`connecting to ${e}/v20.0/me?fields=id,name,picture{url}&access_token=${t}`),this.http.get(`${e}/v20.0/me?fields=id,name,picture{url}&access_token=${t}`).pipe(Ui(this.handleError))}handleError(e){return e.error instanceof ErrorEvent?console.error(e.error.message):console.error(`Server error: ${e.status}, ansver: ${e.error}`),Er(()=>new Error(e.message))}setUser(e){this.curretInstaUserSig.set(e),console.log(this.curretInstaUserSig())}getUser(){return this.authService.user$.pipe(st(e=>qe(this.firestoreService.getCollectionsQuery("config_fb",{user_uid:e.uid})).pipe(st(t=>{let i=t.docs[0].data().url_api,r=t.docs[0].data().token;return console.log(r),this.http.get(`${i}/v20.0/me?fields=id,name,picture{url}&access_token=${r}`)}))))}static \u0275fac=function(t){return new(t||n)(O(Tn),O(Ao))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var kV=(n,e)=>({block:n,hidden:e}),nA=()=>["/ice-breakers"],od=()=>["/instagram"],iA=()=>["/base-templates"],Sv=()=>["/config"];function PV(n,e){if(n&1&&j(0,"img",73),n&2){let t,i=H(2);L("src",(t=i.authService.curretUserSig())==null||t.api==null||t.api.picture==null||t.api.picture.data==null?null:t.api.picture.data.url,Cr)}}function MV(n,e){n&1&&j(0,"div",74)}function OV(n,e){if(n&1){let t=Te();w(0,"div",75)(1,"a",76),B(2,"Settings"),C(),w(3,"a",77),Q("click",function(){se(t);let r=H(2);return oe(r.logout())}),B(4,"Sign out"),C()()}n&2&&(V(),L("routerLink",Ut(1,Sv)))}function NV(n,e){if(n&1){let t=Te();w(0,"div")(1,"div",1),j(2,"div",2),w(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),w(7,"span",7),B(8),C(),te(),w(9,"svg",8),j(10,"path",9),C()()(),Ie(),w(11,"div",10)(12,"div",11),B(13," Instagram Direct "),C(),w(14,"nav",12)(15,"ul",13)(16,"li")(17,"ul",14)(18,"li")(19,"a",15),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),te(),w(20,"svg",16),j(21,"path",17),C(),B(22," Introductory phrases "),C()(),Ie(),w(23,"li")(24,"a",15),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),te(),w(25,"svg",18),j(26,"path",19)(27,"path",20),C(),B(28," Persistent Menu "),C()(),Ie(),w(29,"li")(30,"a",15),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),te(),w(31,"svg",21),j(32,"path",22)(33,"path",23),C(),B(34," Quick Answers "),C()()()(),Ie(),w(35,"li")(36,"div",24),B(37,"Templates"),C(),w(38,"ul",25)(39,"li")(40,"a",15),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),w(41,"span",26),te(),w(42,"svg",27),j(43,"path",22)(44,"path",28)(45,"circle",29)(46,"path",30),C()(),Ie(),w(47,"span",31),B(48,"Base Templates"),C()()(),w(49,"li")(50,"a",32)(51,"span",26),te(),w(52,"svg",33)(53,"g"),j(54,"rect",34)(55,"path",35),C()()(),Ie(),w(56,"span",31),B(57,"Button Template"),C()()(),w(58,"li")(59,"a",32)(60,"span",26),te(),w(61,"svg",27),j(62,"path",36)(63,"path",37),C()(),Ie(),w(64,"span",31),B(65,"Text Template"),C()()()()(),w(66,"li",38)(67,"a",39),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),te(),w(68,"svg",16),j(69,"path",40)(70,"path",41),C(),B(71," Settings "),C()()()()()()()(),Ie(),w(72,"div",42)(73,"div",10)(74,"div",43),B(75," Instagram Direct "),C(),w(76,"nav",12)(77,"ul",13)(78,"li")(79,"ul",14)(80,"li")(81,"a",44),te(),w(82,"svg",16),j(83,"path",17),C(),B(84," Introductory phrases "),C()(),Ie(),w(85,"li")(86,"a",44),te(),w(87,"svg",18),j(88,"path",19)(89,"path",20),C(),B(90," Persistent Menu "),C()(),Ie(),w(91,"li")(92,"a",44),te(),w(93,"svg",21),j(94,"path",22)(95,"path",23),C(),B(96," Quick Answers "),C()()()(),Ie(),w(97,"li")(98,"div",24),B(99,"Templates"),C(),w(100,"ul",25)(101,"li")(102,"a",44)(103,"span",26),te(),w(104,"svg",27),j(105,"path",22)(106,"path",28)(107,"circle",29)(108,"path",30),C()(),Ie(),w(109,"span",31),B(110,"Base Templates"),C()()(),w(111,"li")(112,"a",32)(113,"span",26),te(),w(114,"svg",33)(115,"g"),j(116,"rect",34)(117,"path",35),C()()(),Ie(),w(118,"span",31),B(119,"Button Template"),C()()(),w(120,"li")(121,"a",32)(122,"span",26),te(),w(123,"svg",27),j(124,"path",36)(125,"path",37),C()(),Ie(),w(126,"span",31),B(127,"Text Template"),C()()()()(),w(128,"li",38)(129,"a",45),te(),w(130,"svg",16),j(131,"path",40)(132,"path",41),C(),B(133," Settings "),C()()()()()(),Ie(),w(134,"div",46)(135,"div",47)(136,"button",48),Q("click",function(){se(t);let r=H();return oe(r.menuOpen=!r.menuOpen)}),w(137,"span",7),B(138),C(),te(),w(139,"svg",49),j(140,"path",50),C()(),Ie(),j(141,"div",51),w(142,"div",52)(143,"form",53)(144,"label",54),B(145,"Search"),C(),te(),w(146,"svg",55),j(147,"path",56),C(),Ie(),j(148,"input",57),C(),w(149,"div",58)(150,"button",59)(151,"span",7),B(152,"View notifications"),C(),te(),w(153,"svg",49),j(154,"path",60),C()(),Ie(),j(155,"div",61),w(156,"div",62)(157,"button",63),Q("click",function(){se(t);let r=H();return oe(r.showMenu())}),w(158,"span",7),B(159,"Open user menu"),C(),ae(160,PV,1,1,"img",64)(161,MV,1,0,"div",65),w(162,"span",66)(163,"span",67),B(164),C(),te(),w(165,"svg",68),j(166,"path",69),C()()(),ae(167,OV,5,2,"div",70),C()()()(),Ie(),w(168,"main",71)(169,"div",72),j(170,"router-outlet"),C()()()()}if(n&2){let t,i,r,s=H();V(),L("ngClass",Al(17,kV,s.menuOpen,!s.menuOpen)),V(7),Jt("Open sidebar ",s.menuOpen?"close":"open",""),V(11),L("routerLink",Ut(20,nA)),V(5),L("routerLink",Ut(21,od)),V(6),L("routerLink",Ut(22,od)),V(10),L("routerLink",Ut(23,iA)),V(27),L("routerLink",Ut(24,Sv)),V(14),L("routerLink",Ut(25,nA)),V(5),L("routerLink",Ut(26,od)),V(6),L("routerLink",Ut(27,od)),V(10),L("routerLink",Ut(28,iA)),V(27),L("routerLink",Ut(29,Sv)),V(9),Jt("Open sidebar ",s.menuOpen?"open":"close",""),V(22),L("ngIf",(t=s.authService.curretUserSig())==null||t.api==null||t.api.picture==null||t.api.picture.data==null?null:t.api.picture.data.url),V(),L("ngIf",!(!((i=s.authService.curretUserSig())==null||i.api==null||i.api.picture==null||i.api.picture.data==null)&&i.api.picture.data.url)),V(3),yt(!((r=s.authService.curretUserSig())==null||r.api==null)&&r.api.name?(r=s.authService.curretUserSig())==null||r.api==null?null:r.api.name:(r=s.authService.curretUserSig())==null?null:r.displayName),V(3),L("ngIf",s.show)}}var ad=class n{authService=N(Ve);instagramService=N(vn);router=N(at);menuOpen=!1;show=!1;logout(){this.authService.logout().subscribe(()=>{this.router.navigateByUrl("/login")})}showMenu(){this.show=!this.show}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[ge],decls:1,vars:1,consts:[[4,"ngIf"],["role","dialog","aria-modal","true",1,"relative","z-50","lg:hidden",3,"ngClass"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-900/80"],[1,"fixed","inset-0","flex"],[1,"relative","mr-16","flex","w-full","max-w-xs","flex-1"],[1,"absolute","left-full","top-0","flex","w-16","justify-center","pt-5"],["type","button",1,"-m-2.5","p-2.5",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"flex","grow","flex-col","gap-y-5","overflow-y-auto","bg-indigo-600","px-6","pb-4"],[1,"flex","h-16","shrink-0","items-center"],[1,"flex","flex-1","flex-col"],["role","list",1,"flex","flex-1","flex-col","gap-y-7"],["role","list",1,"-mx-2","space-y-1"],["routerLinkActive","bg-indigo-700 text-white",1,"group","flex","gap-x-3","rounded-md","p-2","text-sm","font-semibold","leading-6","text-indigo-200","hover:bg-indigo-700","hover:text-white",3,"click","routerLink"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6","shrink-0","text-indigo-200","group-hover:text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed"],["d","M0,0h24v24H0V0z","fill","none"],["d","M3,18h13v-2H3V18z M3,13h10v-2H3V13z M3,6v2h13V6H3z M21,15.59L17.42,12L21,8.41L19.59,7l-5,5l5,5L21,15.59z"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed"],["d","M0 0h24v24H0V0z","fill","none"],["d","M15 4v7H5.17l-.59.59-.58.58V4h11m1-2H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm5 4h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"],[1,"text-xs","font-semibold","leading-6","text-indigo-200"],["role","list",1,"-mx-2","mt-2","space-y-1"],[1,"flex","h-6","w-6","shrink-0","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed"],["d","M21 5h2v14h-2zm-4 0h2v14h-2zm-3 0H2c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-1 12H3V7h10v10z"],["cx","8","cy","9.94","r","1.95"],["d","M11.89 15.35c0-1.3-2.59-1.95-3.89-1.95s-3.89.65-3.89 1.95V16h7.78v-.65z"],[1,"truncate"],["href","#","routerLinkActive","bg-indigo-700 text-white",1,"group","flex","gap-x-3","rounded-md","p-2","text-sm","font-semibold","leading-6","text-indigo-200","hover:bg-indigo-700","hover:text-white"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed"],["fill","none","height","24","width","24"],["d","M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z M14.5,19 l1.09-2.41L18,15.5l-2.41-1.09L14.5,12l-1.09,2.41L11,15.5l2.41,1.09L14.5,19z M17,14l0.62-1.38L19,12l-1.38-0.62L17,10l-0.62,1.38 L15,12l1.38,0.62L17,14z M14.5,19l1.09-2.41L18,15.5l-2.41-1.09L14.5,12l-1.09,2.41L11,15.5l2.41,1.09L14.5,19z M17,14l0.62-1.38 L19,12l-1.38-0.62L17,10l-0.62,1.38L15,12l1.38,0.62L17,14z"],["d","M0 0h24v24H0z","fill","none"],["d","M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"],[1,"mt-auto"],["routerLinkActive","bg-indigo-700 text-white",1,"group","-mx-2","flex","gap-x-3","rounded-md","p-2","text-sm","font-semibold","leading-6","text-indigo-200","hover:bg-indigo-700","hover:text-white",3,"click","routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"hidden","lg:fixed","lg:inset-y-0","lg:z-50","lg:flex","lg:w-72","lg:flex-col"],[1,"flex","h-16","shrink-0","items-center","text-white","text-2xl","font-semibold"],["routerLinkActive","bg-indigo-700 text-white",1,"group","flex","gap-x-3","rounded-md","p-2","text-sm","font-semibold","leading-6","text-indigo-200","hover:bg-indigo-700","hover:text-white",3,"routerLink"],["routerLinkActive","bg-indigo-700 text-white",1,"group","-mx-2","flex","gap-x-3","rounded-md","p-2","text-sm","font-semibold","leading-6","text-indigo-200","hover:bg-indigo-700","hover:text-white",3,"routerLink"],[1,"lg:pl-72"],[1,"sticky","top-0","z-40","flex","h-16","shrink-0","items-center","gap-x-4","border-b","border-gray-200","bg-white","px-4","shadow-sm","sm:gap-x-6","sm:px-6","lg:px-8"],["type","button",1,"-m-2.5","p-2.5","text-gray-700","lg:hidden",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],["aria-hidden","true",1,"h-6","w-px","bg-gray-900/10","lg:hidden"],[1,"flex","flex-1","gap-x-4","self-stretch","lg:gap-x-6"],["action","#","method","GET",1,"relative","flex","flex-1"],["for","search-field",1,"sr-only"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"pointer-events-none","absolute","inset-y-0","left-0","h-full","w-5","text-gray-400"],["fill-rule","evenodd","d","M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule","evenodd"],["id","search-field","placeholder","Search...","type","search","name","search",1,"block","h-full","w-full","border-0","py-0","pl-8","pr-0","text-gray-900","placeholder:text-gray-400","focus:ring-0","sm:text-sm"],[1,"flex","items-center","gap-x-4","lg:gap-x-6"],["type","button",1,"-m-2.5","p-2.5","text-gray-400","hover:text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","d","M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"],["aria-hidden","true",1,"hidden","lg:block","lg:h-6","lg:w-px","lg:bg-gray-900/10"],[1,"relative"],["type","button","id","user-menu-button","aria-expanded","false","aria-haspopup","true",1,"-m-1.5","flex","items-center","p-1.5",3,"click"],["class","h-8 w-8 rounded-full bg-gray-50","alt","",3,"src",4,"ngIf"],["class","h-8 w-8 rounded-full bg-gray-200",4,"ngIf"],[1,"hidden","lg:flex","lg:items-center"],["aria-hidden","true",1,"ml-4","text-sm","font-semibold","leading-6","text-gray-900","truncate","...","max-w-32"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"ml-2","h-5","w-5","text-gray-400"],["fill-rule","evenodd","d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule","evenodd"],["class","absolute right-0 z-10 mt-2.5 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none","role","menu","aria-orientation","vertical","aria-labelledby","user-menu-button","tabindex","-1",4,"ngIf"],[1,"py-4"],[1,"px-4","sm:px-6","lg:px-8"],["alt","",1,"h-8","w-8","rounded-full","bg-gray-50",3,"src"],[1,"h-8","w-8","rounded-full","bg-gray-200"],["role","menu","aria-orientation","vertical","aria-labelledby","user-menu-button","tabindex","-1",1,"absolute","right-0","z-10","mt-2.5","w-32","origin-top-right","rounded-md","bg-white","py-2","shadow-lg","ring-1","ring-gray-900/5","focus:outline-none"],["routerLinkActive","bg-gray-200","role","menuitem","tabindex","-1","id","user-menu-item-0",1,"block","px-3","py-1","text-sm","leading-6","text-gray-900",3,"routerLink"],["href","#","role","menuitem","tabindex","-1","id","user-menu-item-1",1,"block","px-3","py-1","text-sm","leading-6","text-gray-900",3,"click"]],template:function(t,i){t&1&&ae(0,NV,171,30,"div",0),t&2&&L("ngIf",i.authService.curretUserSig())},dependencies:[Oa,hu,Os,Ob,$e,Ml,dt]})};var VV=(n,e)=>({"bg-green-700 hover:bg-green-600":n,"bg-red-700 hover:bg-red-600":e});function FV(n,e){n&1&&(te(),w(0,"svg",8),j(1,"path",9)(2,"path",10),C())}var cd=class n{constructor(e,t){this.http=e;this.firestoreService=t}authService=N(Ve);instagramService=N(vn);firestore=N(Ye);configId="";error=null;connected=!1;form=new qt({url_api:new nt(""),token:new nt("")});ngOnInit(){this.authService.user$.subscribe(e=>{hr(ht(this.firestore,"users_instagram",e.uid)).then(t=>{this.form.setControl("url_api",new nt(t.data().api.url_api)),this.form.setControl("token",new nt(t.data().api.token)),t.data().api.id&&(console.log(t.data()),this.connected=!0)})})}connect(){this.instagramService.getData(this.form.value.url_api,this.form.value.token).subscribe({next:e=>{console.info("connecting success!"),Cc(ht(this.firestore,"users_instagram",`${this.authService.curretUserSig()?.uid}`),{api:M({url_api:this.form.value.url_api,token:this.form.value.token},e)}).then(()=>{this.connected=!0})},error:e=>{this.error=e.message,console.log(e.message)}})}static \u0275fac=function(t){return new(t||n)(F(Tn),F(Ao))};static \u0275cmp=me({type:n,selectors:[["app-config"]],standalone:!0,features:[ge],decls:16,vars:9,consts:[[3,"formGroup"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["type","text","formControlName","url_api","name","url_api","placeholder","https://graph.facebook.com","aria-describedby","email-description",1,"block","w-full","rounded-md","border-0","px-2","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6",3,"value"],[1,"my-4"],["type","text","formControlName","token","name","token","placeholder","EAAQmakQXRRIBOyxwIKbi2vY8GL...","aria-describedby","email-description",1,"block","w-full","rounded-md","border-0","px-2","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6",3,"value"],["type","button",1,"flex","items-center","gap-x-1.5","rounded-md","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed"],["d","M0 0h24v24H0V0z","fill","none"],["d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"]],template:function(t,i){t&1&&(w(0,"div")(1,"form",0)(2,"div")(3,"label",1),B(4,"Link API"),C(),w(5,"div",2),j(6,"input",3),C()(),w(7,"div",4)(8,"label",1),B(9,"Token API"),C(),w(10,"div",2),j(11,"input",5),C()(),w(12,"div",4)(13,"button",6),Q("click",function(){return i.connect()}),ae(14,FV,3,0,"svg",7),B(15),C()()()()),t&2&&(V(),L("formGroup",i.form),V(5),L("value",i.form.value.url_api),V(5),L("value",i.form.value.token),V(2),L("ngClass",Al(6,VV,i.connected,!i.connected)),V(),L("ngIf",i.connected),V(),Jt(" ",i.connected?"Connected":"Connect"," "))},dependencies:[$e,Ml,dt,si,ri,gn,ni,ii,Mn,On]})};var Gc=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},So=class extends Gc{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},_r=class extends Gc{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Rv=class extends Gc{constructor(e){super(),this.element=e instanceof Re?e.nativeElement:e}},Ro=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof So)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof _r)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Rv)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Hc=class extends Ro{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Pe.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Wc=(()=>{class n extends Ro{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ne,this.attachDomPortal=s=>{this._document;let o=s.element;o.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(c,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(o,c)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||n)(F(na),F(Fn),F(he))}}static{this.\u0275dir=Se({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[St]})}}return n})();var ld=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({})}}return n})();var LV=20,Dv=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new ue,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=LV){return this._platform.isBrowser?new Wt(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(cf(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):J()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ze(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ri(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return af(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(O(re),O(it),O(he,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rA=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new ue,this._elementScrolled=new Wt(o=>this.ngZone.runOutsideAngular(()=>af(this.elementRef.nativeElement,"scroll").pipe(Lt(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=r?t.end:t.start),t.right==null&&(t.right=r?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&Eo()!=Nn.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),Eo()==Nn.INVERTED?t.left=t.right:Eo()==Nn.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;Qh()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",r="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return t=="start"?t=o?r:i:t=="end"&&(t=o?i:r),o&&Eo()==Nn.INVERTED?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Eo()==Nn.NEGATED?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(Dv),F(re),F(Di,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return n})(),UV=20,xv=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new ue,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,c=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:c}}change(t=UV){return t>0?this._change.pipe(cf(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(O(it),O(re),O(he,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ud=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({})}}return n})(),kv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({imports:[gr,ud,gr,ud]})}}return n})();var oA=Qh(),Pv=class{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=rt(-this._previousScrollPosition.left),e.style.top=rt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),oA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),oA&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var Mv=class{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ze(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},hd=class{enable(){}disable(){}attach(){}};function Ov(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,s=n.right<t.left,o=n.left>t.right;return i||r||s||o})}function aA(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,s=n.left<t.left,o=n.right>t.right;return i||r||s||o})}var Nv=class{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Ov(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},BV=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new hd,this.close=o=>new Mv(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Pv(this._viewportRuler,this._document),this.reposition=o=>new Nv(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(i){return new(i||n)(O(Dv),O(xv),O(re),O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ls=class{constructor(e){if(this.scrollStrategy=new hd,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var Vv=class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var fA=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(O(he))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jV=(()=>{class n extends fA{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(O(he),O(re,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zV=(()=>{class n extends fA{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Vn(s)},this._clickListener=s=>{let o=Vn(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let h=l.length-1;h>-1;h--){let f=l[h];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(cA(f.overlayElement,o)||cA(f.overlayElement,c))break;let m=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(O(he),O(it),O(re,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cA(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Do=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Uc()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(t),Uc()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(O(he),O(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xi=class{constructor(e,t,i,r,s,o,c,l,h,f=!1,m){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=h,this._animationsDisabled=f,this._injector=m,this._backdropElement=null,this._backdropClick=new ue,this._attachments=new ue,this._detachments=new ue,this._locationChanges=cn.EMPTY,this._backdropClickHandler=_=>this._backdropClick.next(_),this._backdropTransitionendHandler=_=>{this._disposeBackdrop(_.target)},this._keydownEvents=new ue,this._outsidePointerEvents=new ue,this._renders=new ue,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Un(()=>h0(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Ln(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=M(M({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ee(M({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=rt(this._config.width),e.height=rt(this._config.height),e.minWidth=rt(this._config.minWidth),e.minHeight=rt(this._config.minHeight),e.maxWidth=rt(this._config.maxWidth),e.maxHeight=rt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){let r=To(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Lt(Li(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},lA="cdk-overlay-connected-position-bounding-box",$V=/([A-Za-z%]+)$/,Fv=class{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ue,this._resizeSubscription=cn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(lA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(e,r,c),h=this._getOverlayPoint(l,t,c),f=this._getOverlayFit(h,t,i,c);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(f,h,i)){s.push({position:c,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:h,originPoint:l,position:c,overlayRect:t})}if(s.length){let c=null,l=-1;for(let h of s){let f=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);f>l&&(l=f,c=h)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:c}t.left<0&&(r-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){let s=hA(t),{x:o,y:c}=e,l=this._getOffset(r,"x"),h=this._getOffset(r,"y");l&&(o+=l),h&&(c+=h);let f=0-o,m=o+s.width-i.width,_=0-c,E=c+s.height-i.height,k=this._subtractOverflows(s.width,f,m),P=this._subtractOverflows(s.height,_,E),D=k*P;return{visibleArea:D,isCompletelyWithinViewport:s.width*s.height===D,fitsInViewportVertically:P===s.height,fitsInViewportHorizontally:k==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,s=i.right-t.x,o=uA(this._overlayRef.getConfig().minHeight),c=uA(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,h=e.fitsInViewportHorizontally||c!=null&&c<=s;return l&&h}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=hA(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),c=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),h=Math.max(s.left-i.left-e.x,0),f=0,m=0;return r.width<=s.width?f=h||-o:f=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?m=l||-c:m=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:f,y:m},{x:e.x+f,y:e.y+m}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!qV(this._lastScrollVisibility,i)){let r=new Vv(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(t.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(t.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let E=Math.min(i.bottom-e.y+i.top,e.y),k=this._lastBoundingBoxSize.height;s=E*2,o=e.y-E,s>k&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-k/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,h=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,f,m,_;if(h)_=i.width-e.x+this._viewportMargin*2,f=e.x-this._viewportMargin;else if(l)m=e.x,f=i.right-e.x;else{let E=Math.min(i.right-e.x+i.left,e.x),k=this._lastBoundingBoxSize.width;f=E*2,m=e.x-E,f>k&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-k/2)}return{top:o,left:m,bottom:c,right:_,width:f,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=rt(i.height),r.top=rt(i.top),r.bottom=rt(i.bottom),r.width=rt(i.width),r.left=rt(i.left),r.right=rt(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=rt(s)),o&&(r.maxWidth=rt(o))}this._lastBoundingBoxSize=i,cs(this._boundingBox.style,r)}_resetBoundingBoxStyles(){cs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();cs(i,this._getExactOverlayY(t,e,f)),cs(i,this._getExactOverlayX(t,e,f))}else i.position="static";let c="",l=this._getOffset(t,"x"),h=this._getOffset(t,"y");l&&(c+=`translateX(${l}px) `),h&&(c+=`translateY(${h}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=rt(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=rt(o.maxWidth):s&&(i.maxWidth="")),cs(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=rt(s.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=rt(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aA(e,i),isOriginOutsideView:Ov(e,i),isOverlayClipped:aA(t,i),isOverlayOutsideView:Ov(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&To(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Re)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function cs(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function uA(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split($V);return!t||t==="px"?parseFloat(e):null}return n||null}function hA(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function qV(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var dA="cdk-global-overlay-wrapper",Lv=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(dA),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),h=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),f=this._xPosition,m=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",E="",k="",P="";l?P="flex-start":f==="center"?(P="center",_?k=m:E=m):_?f==="left"||f==="end"?(P="flex-end",E=m):(f==="right"||f==="start")&&(P="flex-start",k=m):f==="left"||f==="start"?(P="flex-start",E=m):(f==="right"||f==="end")&&(P="flex-end",k=m),e.position=this._cssPosition,e.marginLeft=l?"0":E,e.marginTop=h?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":k,t.justifyContent=P,t.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(dA),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},GV=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Lv}flexibleConnectedTo(t){return new Fv(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(O(xv),O(he),O(it),O(Do))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HV=0,kt=(()=>{class n{constructor(t,i,r,s,o,c,l,h,f,m,_,E){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=l,this._document=h,this._directionality=f,this._location=m,this._outsideClickDispatcher=_,this._animationsModuleType=E}create(t){let i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new ls(t);return o.direction=o.direction||this._directionality.value,new xi(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(li))}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=`cdk-overlay-${HV++}`,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Ar)),new Hc(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(O(BV),O(Do),O(na),O(GV),O(jV),O(Pe),O(re),O(he),O(Di),O(di),O(zV),O(wn,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var WV=new K("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(kt);return()=>n.scrollStrategies.reposition()}});function KV(n){return()=>n.scrollStrategies.reposition()}var YV={provide:WV,deps:[kt],useFactory:KV},dd=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({providers:[kt,YV],imports:[gr,ld,kv,kv]})}}return n})();var JV=["mat-menu-item",""],ZV=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],eF=["mat-icon, [matMenuItemIcon]","*"];function tF(n,e){n&1&&(te(),w(0,"svg",2),j(1,"polygon",3),C())}var nF=["*"];function iF(n,e){if(n&1){let t=Te();w(0,"div",0),Q("keydown",function(r){se(t);let s=H();return oe(s._handleKeydown(r))})("click",function(){se(t);let r=H();return oe(r.closed.emit("click"))})("@transformMenu.start",function(r){se(t);let s=H();return oe(s._onAnimationStart(r))})("@transformMenu.done",function(r){se(t);let s=H();return oe(s._onAnimationDone(r))}),w(1,"div",1),ys(2),C()()}if(n&2){let t=H();Cl(t._classList),L("id",t.panelId)("@transformMenu",t._panelAnimationState),Ze("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}var Bv=new K("MAT_MENU_PANEL"),us=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new ue,this._focused=new ue,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(he),F(os),F(Bv,8),F(Bt))}}static{this.\u0275cmp=me({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(i,r){i&1&&Q("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),i&2&&(Ze("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),Xt("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",jt],disableRipple:[2,"disableRipple","disableRipple",jt]},exportAs:["matMenuItem"],standalone:!0,features:[In,ge],attrs:JV,ngContentSelectors:eF,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){i&1&&(sa(ZV),ys(0),w(1,"span",0),ys(2,1),C(),j(3,"div",1),ae(4,tF,2,0,":svg:svg",2)),i&2&&(V(3),L("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),V(),ra(r._triggersSubmenu?4:-1))},dependencies:[QC],encapsulation:2,changeDetection:0})}}return n})();var rF=new K("MatMenuContent");var fd={transformMenu:bf("transformMenu",[wf("void",Es({opacity:0,transform:"scale(0.8)"})),Fl("void => enter",Vl("120ms cubic-bezier(0, 0, 0.2, 1)",Es({opacity:1,transform:"scale(1)"}))),Fl("* => void",Vl("100ms 25ms linear",Es({opacity:0})))]),fadeInItems:bf("fadeInItems",[wf("showing",Es({opacity:1})),Fl("void => *",[Es({opacity:0}),Vl("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Y$=fd.fadeInItems,Q$=fd.transformMenu,sF=0,oF=new K("mat-menu-default-options",{providedIn:"root",factory:aF});function aF(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var vr=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}set panelClass(t){let i=this._previousPanelClass,r=M({},this._classList);i&&i.length&&i.split(" ").forEach(s=>{r[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{r[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,i,r,s){this._elementRef=t,this._changeDetectorRef=s,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new Zo,this._classList={},this._panelAnimationState="void",this._animationDone=new ue,this.closed=new Ne,this.close=this.closed,this.panelId=`mat-menu-panel-${sF++}`,this._injector=N(Pe),this.overlayPanelClass=r.overlayPanelClass||"",this._xPosition=r.xPosition,this._yPosition=r.yPosition,this.backdropClass=r.backdropClass,this.overlapTrigger=r.overlapTrigger,this.hasBackdrop=r.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Zh(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Yt(this._directDescendantItems),st(t=>Li(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(Yt(this._directDescendantItems),st(i=>Li(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let i=t.keyCode,r=this._keyManager;switch(i){case 27:mr(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(t);return}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Ln(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){if(this._baseElevation===null){let c=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(c)}let i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));if(!s||s===this._previousElevation){let o=M({},this._classList);this._previousElevation&&(o[this._previousElevation]=!1),o[r]=!0,this._previousElevation=r,this._classList=o}}setPositionClasses(t=this.xPosition,i=this.yPosition){this._classList=ee(M({},this._classList),{"mat-menu-before":t==="before","mat-menu-after":t==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,t.toState==="enter"&&this._keyManager.activeItemIndex===0&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Yt(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(re),F(oF),F(Bt))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-menu"]],contentQueries:function(i,r,s){if(i&1&&(bs(s,rF,5),bs(s,us,5),bs(s,us,4)),i&2){let o;_t(o=vt())&&(r.lazyContent=o.first),_t(o=vt())&&(r._allItems=o),_t(o=vt())&&(r.items=o)}},viewQuery:function(i,r){if(i&1&&un(zi,5),i&2){let s;_t(s=vt())&&(r.templateRef=s.first)}},hostVars:3,hostBindings:function(i,r){i&2&&Ze("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",jt],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>t==null?null:jt(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[En([{provide:Bv,useExisting:n}]),In,ge],ngContentSelectors:nF,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(i,r){i&1&&(sa(),ae(0,iF,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[fd.transformMenu,fd.fadeInItems]},changeDetection:0})}}return n})(),mA=new K("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(kt);return()=>n.scrollStrategies.reposition()}});function cF(n){return()=>n.scrollStrategies.reposition()}var lF={provide:mA,deps:[kt],useFactory:cF},pA=pr({passive:!0});var pd=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,i,r,s,o,c,l,h,f){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=c,this._dir=l,this._focusMonitor=h,this._ngZone=f,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=cn.EMPTY,this._hoverSubscription=cn.EMPTY,this._menuCloseSubscription=cn.EMPTY,this._changeDetectorRef=N(Bt),this._handleTouchStart=m=>{qc(m)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Ne,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ne,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof vr?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,pA)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,pA),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let t=this.menu;if(this._menuOpen||!t)return;let i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop==null?!this.triggersSubmenu():t.hasBackdrop,i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof vr&&(t._startAnimation(),t._directDescendantItems.changes.pipe(Lt(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;let i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof vr?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(ze(r=>r.toState==="void"),At(1),Lt(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new ls({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{let s=r.connectionPair.overlayX==="start"?"after":"before",o=r.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,i){let[r,s]=t.xPosition==="before"?["end","start"]:["start","end"],[o,c]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[l,h]=[o,c],[f,m]=[r,s],_=0;if(this.triggersSubmenu()){if(m=r=t.xPosition==="before"?"start":"end",s=f=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let E=this._parentMaterialMenu.items.first;this._parentInnerPadding=E?E._getHostElement().offsetTop:0}_=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l=o==="top"?"bottom":"top",h=c==="top"?"bottom":"top");i.withPositions([{originX:r,originY:l,overlayX:f,overlayY:o,offsetY:_},{originX:s,originY:l,overlayX:m,overlayY:o,offsetY:_},{originX:r,originY:h,overlayX:f,overlayY:c,offsetY:-_},{originX:s,originY:h,overlayX:m,overlayY:c,offsetY:-_}])}_menuClosingActions(){let t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:J(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(ze(o=>o!==this._menuItemInstance),ze(()=>this._menuOpen)):J();return Li(t,r,s,i)}_handleMousedown(t){$c(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let i=t.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(ze(t=>t===this._menuItemInstance&&!t.disabled),uf(0,gl)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof vr&&this.menu._isAnimating?this.menu._animationDone.pipe(At(1),uf(0,gl),Lt(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new _r(t.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(i){return new(i||n)(F(kt),F(Re),F(Fn),F(mA),F(Bv,8),F(us,10),F(Di,8),F(os),F(re))}}static{this.\u0275dir=Se({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,r){i&1&&Q("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),i&2&&Ze("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}}return n})(),md=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Me({providers:[lF],imports:[$e,XC,as,dd,ud,as]})}}return n})();var uF=()=>["/base-templates"];function hF(n,e){if(n&1){let t=Te();w(0,"button",21),Q("click",function(){se(t);let r=H();return oe(r.delete())}),te(),w(1,"svg",22),j(2,"path",17)(3,"path",23),C()()}}function dF(n,e){if(n&1){let t=Te();w(0,"button",24),Q("click",function(){se(t);let r=H();return oe(r.save())}),te(),w(1,"svg",25),j(2,"path",17)(3,"path",26),C()()}}function fF(n,e){if(n&1){let t=Te();w(0,"button",21),Q("click",function(){se(t);let r=H();return oe(r.add())}),te(),w(1,"svg",27),j(2,"path",17)(3,"path",18),C()()}}function pF(n,e){if(n&1){let t=Te();w(0,"button",28),Q("click",function(){se(t);let r=H();return oe(r.edit())}),te(),w(1,"svg",27),j(2,"path",17)(3,"path",29),C()()}}function mF(n,e){if(n&1&&(w(0,"span"),B(1),C()),n&2){let t=H();V(),yt(t.callToAction.question)}}function gF(n,e){if(n&1){let t=Te();w(0,"input",30),Q("change",function(r){se(t);let s=H();return oe(s.changeActionName(r))}),C()}if(n&2){let t=H();L("value",t.callToAction.question)}}function _F(n,e){if(n&1&&(w(0,"button",31),B(1," add action "),C()),n&2){H();let t=hn(10);L("matMenuTriggerFor",t)}}function vF(n,e){if(n&1){let t=Te();w(0,"button",32),Q("click",function(){let r=se(t).$implicit,s=H();return oe(s.addAction(r))}),B(1),C()}if(n&2){let t=e.$implicit;V(),yt(t.title)}}function yF(n,e){if(n&1&&(w(0,"button",33),B(1),C()),n&2){let t=e.$implicit;V(),yt(t.title)}}function bF(n,e){if(n&1&&(w(0,"button",33),B(1),C()),n&2){let t=e.$implicit;V(),yt(t.title)}}function wF(n,e){if(n&1&&(w(0,"li",34),B(1),C()),n&2){let t=H();V(),yt(t.callToAction.payload)}}var gd=class n{constructor(e){this.firestore=e}authService=N(Ve);router=N(at);callToAction={};iceBreakerId="";remove=new Ne;templates=[];editElement=!1;baseTemplates=[];textTemplates=[];buttonTemplates=[];ngOnInit(){this.callToAction.id||(this.editElement=!0)}edit(){this.editElement=!0}add(){on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/ice_breakers/${this.iceBreakerId}/call_to_actions`),M({},this.callToAction)).then(e=>{this.callToAction=ee(M({},this.callToAction),{id:e.id})}),this.editElement=!1}save(){this.editElement=!1,lo(ht(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/ice_breakers/${this.iceBreakerId}/call_to_actions/${this.callToAction.id}`),{question:this.callToAction.question,payload:this.callToAction.payload}).then(e=>{})}delete(){Ec(ht(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/ice_breakers/${this.iceBreakerId}/call_to_actions`,`${this.callToAction.id}`)).then(e=>{this.remove.emit()})}changeActionName(e){this.callToAction.question=e.target.value}addAction(e){this.callToAction.payload=`${e.template}-${e.id}`,this.save()}openBase(){mn(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates`)).then(e=>{this.baseTemplates=[],e.docs.forEach(t=>{this.baseTemplates.push({title:t.data().title,id:t.id,template:"base_templates"})})})}openText(){}openButton(){}static \u0275fac=function(t){return new(t||n)(F(Ye))};static \u0275cmp=me({type:n,selectors:[["app-call-to-action"]],inputs:{callToAction:"callToAction",iceBreakerId:"iceBreakerId"},outputs:{remove:"remove"},standalone:!0,features:[ge],decls:33,vars:16,consts:[["menu","matMenu"],["bases","matMenu"],["texts","matMenu"],["buttons","matMenu"],[1,"flex","items-center","gap-1","group"],[3,"click",4,"ngIf"],["class","",3,"click",4,"ngIf"],["class","hidden group-hover:block",3,"click",4,"ngIf"],[1,"rounded-full","border","px-4","py-1","relative","ml-1","cursor-pointer","text-right"],[4,"ngIf"],["class","bg-transparent border-none p-0","type","text",3,"value","change",4,"ngIf"],["mat-button","","class","hidden group-hover:block bg-green-600 hover:bg-green-400 rounded-full px-1 py-0 text-[10px] absolute right-3 bottom-[-9px] z-10 whitespace-nowrap",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"onMenuOpen","matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"routerLink"],[1,"flex","items-center","gap-1"],["xmlns","http://www.w3.org/2000/svg","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed",1,"fill-black"],["d","M0 0h24v24H0V0z","fill","none"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],["mat-menu-item","",4,"ngFor","ngForOf"],["class","border border-white bg-white text-black px-2 py-1 rounded-full",4,"ngIf"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed",1,"fill-red-500"],["d","M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"],[1,"",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed",1,"fill-green-500"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed"],[1,"hidden","group-hover:block",3,"click"],["d","M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"],["type","text",1,"bg-transparent","border-none","p-0",3,"change","value"],["mat-button","",1,"hidden","group-hover:block","bg-green-600","hover:bg-green-400","rounded-full","px-1","py-0","text-[10px]","absolute","right-3","bottom-[-9px]","z-10","whitespace-nowrap",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item",""],[1,"border","border-white","bg-white","text-black","px-2","py-1","rounded-full"]],template:function(t,i){if(t&1){let r=Te();w(0,"li",4),ae(1,hF,4,0,"button",5)(2,dF,4,0,"button",6)(3,fF,4,0,"button",5)(4,pF,4,0,"button",7),w(5,"div",8),ae(6,mF,2,1,"span",9)(7,gF,1,1,"input",10)(8,_F,2,1,"button",11),w(9,"mat-menu",null,0)(11,"button",12),Q("onMenuOpen",function(){return se(r),oe(i.openBase())}),B(12,"Base Templates"),C(),w(13,"button",12),Q("onMenuOpen",function(){return se(r),oe(i.openText())}),B(14,"Text templates"),C(),w(15,"button",12),Q("onMenuOpen",function(){return se(r),oe(i.openButton())}),B(16,"Button Templates"),C()(),w(17,"mat-menu",null,1),ae(19,vF,2,1,"button",13),w(20,"button",14)(21,"span",15),te(),w(22,"svg",16),j(23,"path",17)(24,"path",18),C(),B(25," Create "),C()()(),Ie(),w(26,"mat-menu",null,2),ae(28,yF,2,1,"button",19),C(),w(29,"mat-menu",null,3),ae(31,bF,2,1,"button",19),C()()(),ae(32,wF,2,1,"li",20)}if(t&2){let r=hn(18),s=hn(27),o=hn(30);V(),L("ngIf",i.editElement),V(),L("ngIf",i.editElement&&i.callToAction.id),V(),L("ngIf",!i.callToAction.id),V(),L("ngIf",!i.editElement),V(2),L("ngIf",!i.editElement),V(),L("ngIf",i.editElement),V(),L("ngIf",!i.editElement),V(3),L("matMenuTriggerFor",r),V(2),L("matMenuTriggerFor",s),V(2),L("matMenuTriggerFor",o),V(4),L("ngForOf",i.baseTemplates),V(),L("routerLink",Ut(15,uF)),V(8),L("ngForOf",i.textTemplates),V(3),L("ngForOf",i.buttonTemplates),V(),L("ngIf",i.callToAction.payload)}},dependencies:[$e,Bn,dt,md,vr,us,pd,hu,Os]})};function IF(n,e){if(n&1){let t=Te();w(0,"app-call-to-action",4),Q("remove",function(){let r=se(t).index,s=H(2);return oe(s.deleteCallToAction(r))}),C()}if(n&2){let t=e.$implicit,i=H(2);L("callToAction",t)("iceBreakerId",i.iceBreaker.id)}}function EF(n,e){if(n&1&&(w(0,"ul",2),ae(1,IF,1,2,"app-call-to-action",3),C()),n&2){let t=H();V(),L("ngForOf",t.iceBreaker.call_to_actions)}}function TF(n,e){if(n&1){let t=Te();w(0,"button",5),Q("click",function(){se(t);let r=H();return oe(r.addCallToAction())}),B(1,` Add
`),C()}}var _d=class n{constructor(e){this.firestore=e}authService=N(Ve);iceBreaker={};ngOnInit(){this.iceBreaker.id||on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/ice_breakers`),{locale:"default"}).then(e=>{this.iceBreaker.id=e.id})}addCallToAction(){this.iceBreaker=ee(M({},this.iceBreaker),{call_to_actions:[...this.iceBreaker.call_to_actions,{question:"",payload:"test"}]})}deleteCallToAction(e){this.iceBreaker.call_to_actions?.splice(e,1)}static \u0275fac=function(t){return new(t||n)(F(Ye))};static \u0275cmp=me({type:n,selectors:[["app-ice-breaker"]],inputs:{iceBreaker:"iceBreaker"},standalone:!0,features:[ge],decls:2,vars:2,consts:[["class","flex flex-col items-end gap-3",4,"ngIf"],["class","rounded-full bg-indigo-600 mt-3 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500",3,"click",4,"ngIf"],[1,"flex","flex-col","items-end","gap-3"],["class","contents",3,"callToAction","iceBreakerId","remove",4,"ngFor","ngForOf"],[1,"contents",3,"remove","callToAction","iceBreakerId"],[1,"rounded-full","bg-indigo-600","mt-3","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500",3,"click"]],template:function(t,i){t&1&&ae(0,EF,2,1,"ul",0)(1,TF,2,0,"button",1),t&2&&(L("ngIf",i.iceBreaker.id),V(),L("ngIf",(i.iceBreaker==null||i.iceBreaker.call_to_actions==null?null:i.iceBreaker.call_to_actions.length)<4))},dependencies:[$e,Bn,dt,gd]})};function CF(n,e){if(n&1&&j(0,"app-ice-breaker",1),n&2){let t=e.$implicit;L("iceBreaker",t)}}var vd=class n{data=[];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["app-ice-breakers-body"]],inputs:{data:"data"},standalone:!0,features:[ge],decls:1,vars:1,consts:[["class","contents",3,"iceBreaker",4,"ngFor","ngForOf"],[1,"contents",3,"iceBreaker"]],template:function(t,i){t&1&&ae(0,CF,1,1,"app-ice-breaker",0),t&2&&L("ngForOf",i.data)},dependencies:[$e,Bn,_d]})};var AF=["dynamicComponentContainer"],xo=class n{constructor(e){this.renderer=e}authService=N(Ve);instagramService=N(vn);component;componentData;container;ngOnInit(){if(this.component){this.container.clear();let e=this.container.createComponent(this.component),t=e.hostView.rootNodes[0];this.renderer.addClass(t,"contents"),e.instance.data=this.componentData,e.instance.data=this.componentData}}static \u0275fac=function(t){return new(t||n)(F($i))};static \u0275cmp=me({type:n,selectors:[["app-instagram-template"]],viewQuery:function(t,i){if(t&1&&un(AF,7,Fn),t&2){let r;_t(r=vt())&&(i.container=r.first)}},inputs:{component:"component",componentData:"componentData"},standalone:!0,features:[ge],decls:55,vars:2,consts:[["dynamicComponentContainer",""],[1,"bg-black","text-white","mx-[-16px]","sm:w-[414px]","h-[640px]","flex","flex-col"],[1,"flex","items-center","justify-between","py-4","px-6","bg-purple-800"],[1,"items-center","justify-between","flex","space-x-1"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","#e8eaed"],["d","M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"],[1,"flex","items-center","justify-start","space-x-2"],[1,"rounded-full","w-10","h-10","bg-white","flex-none","overflow-hidden"],["alt","",3,"src"],[1,"flex","flex-col","max-w-full"],[1,"grid","font-bold","max-w-full","text-lg","!mb-0"],[1,"truncate","..."],[1,"text-xs","!mb-0"],[1,"flex","space-x-4"],[1,"text-white"],["aria-label","\u0413\u043E\u043B\u043E\u0441\u043E\u0432\u043E\u0439 \u0437\u0432\u043E\u043D\u043E\u043A","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["d","M18.227 22.912c-4.913 0-9.286-3.627-11.486-5.828C4.486 14.83.731 10.291.921 5.231a3.289 3.289 0 0 1 .908-2.138 17.116 17.116 0 0 1 1.865-1.71 2.307 2.307 0 0 1 3.004.174 13.283 13.283 0 0 1 3.658 5.325 2.551 2.551 0 0 1-.19 1.941l-.455.853a.463.463 0 0 0-.024.387 7.57 7.57 0 0 0 4.077 4.075.455.455 0 0 0 .386-.024l.853-.455a2.548 2.548 0 0 1 1.94-.19 13.278 13.278 0 0 1 5.326 3.658 2.309 2.309 0 0 1 .174 3.003 17.319 17.319 0 0 1-1.71 1.866 3.29 3.29 0 0 1-2.138.91 10.27 10.27 0 0 1-.368.006Zm-13.144-20a.27.27 0 0 0-.167.054A15.121 15.121 0 0 0 3.28 4.47a1.289 1.289 0 0 0-.36.836c-.161 4.301 3.21 8.34 5.235 10.364s6.06 5.403 10.366 5.236a1.284 1.284 0 0 0 .835-.36 15.217 15.217 0 0 0 1.504-1.637.324.324 0 0 0-.047-.41 11.62 11.62 0 0 0-4.457-3.119.545.545 0 0 0-.411.044l-.854.455a2.452 2.452 0 0 1-2.071.116 9.571 9.571 0 0 1-5.189-5.188 2.457 2.457 0 0 1 .115-2.071l.456-.855a.544.544 0 0 0 .043-.41 11.629 11.629 0 0 0-3.118-4.458.36.36 0 0 0-.244-.1Z"],["aria-label","\u0412\u0438\u0434\u0435\u043E\u0432\u044B\u0437\u043E\u0432","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","height","18","rx","3","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","width","16.999","x","1","y","3"],["d","m17.999 9.146 2.495-2.256A1.5 1.5 0 0 1 23 8.003v7.994a1.5 1.5 0 0 1-2.506 1.113L18 14.854","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"p-4","space-y-4","flex-grow","flex","flex-col","overflow-y-auto","items-end","relative"],[1,"flex-1","flex","flex-col","justify-end","items-end","w-full"],[1,"contents"],[1,"flex","items-center","p-4","bg-purple-800","space-x-2"],[1,"rounded-full","bg-slate-800","flex","items-center","space-x-2","p-2","pr-5","flex-1"],[1,"text-pink-500","bg-pink-700","w-10","h-10","flex","items-center","justify-center","rounded-full"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed"],["d","M0 0h24v24H0V0z","fill","none"],["d","M14.12 4l1.83 2H20v12H4V6h4.05l1.83-2h4.24M15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm-3 7c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z"],["type","text","placeholder","\u041D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435...",1,"flex-grow","p-2","rounded","bg-transparent","text-white"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","24px","viewBox","0 0 24 24","width","24px","fill","#e8eaed"],["fill","none","height","24","width","24"],["d","M12,14c1.66,0,3-1.34,3-3V5c0-1.66-1.34-3-3-3S9,3.34,9,5v6C9,12.66,10.34,14,12,14z"],["d","M17,11c0,2.76-2.24,5-5,5s-5-2.24-5-5H5c0,3.53,2.61,6.43,6,6.92V21h2v-3.08c3.39-0.49,6-3.39,6-6.92H17z"],["d","M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"],["d","M7,9.5C7,8.67,7.67,8,8.5,8S10,8.67,10,9.5c0,0.83-0.67,1.5-1.5,1.5S7,10.33,7,9.5z M12,17.5c2.33,0,4.31-1.46,5.11-3.5 H6.89C7.69,16.04,9.67,17.5,12,17.5z M15.5,11c0.83,0,1.5-0.67,1.5-1.5C17,8.67,16.33,8,15.5,8S14,8.67,14,9.5 C14,10.33,14.67,11,15.5,11z M22,1h-2v2h-2v2h2v2h2V5h2V3h-2V1z M20,12c0,4.42-3.58,8-8,8s-8-3.58-8-8c0-4.42,3.58-8,8-8 c1.46,0,2.82,0.4,4,1.08V2.84C14.77,2.3,13.42,2,11.99,2C6.47,2,2,6.48,2,12c0,5.52,4.47,10,9.99,10C17.52,22,22,17.52,22,12 c0-1.05-0.17-2.05-0.47-3h-2.13C19.78,9.93,20,10.94,20,12z"]],template:function(t,i){if(t&1&&(w(0,"div",1)(1,"div",2)(2,"div",3)(3,"div"),te(),w(4,"svg",4),j(5,"path",5),C()(),Ie(),w(6,"div",6)(7,"div",7),j(8,"img",8),C(),w(9,"div",9)(10,"p",10)(11,"span",11),B(12),C()(),w(13,"p",12),B(14,"Company chat"),C()()()(),w(15,"div",13)(16,"button",14),te(),w(17,"svg",15),j(18,"path",16),C()(),Ie(),w(19,"button",14),te(),w(20,"svg",17)(21,"title"),B(22,"\u0412\u0438\u0434\u0435\u043E\u0432\u044B\u0437\u043E\u0432"),C(),j(23,"rect",18)(24,"path",19),C()()()(),Ie(),w(25,"div",20)(26,"div",21),vs(27,22,0),C()(),w(29,"div",23)(30,"div",24)(31,"button",25),te(),w(32,"svg",26),j(33,"path",27)(34,"path",28),C()(),Ie(),j(35,"input",29),w(36,"button",14),te(),w(37,"svg",30)(38,"g"),j(39,"rect",31)(40,"rect",31)(41,"rect",31),C(),w(42,"g"),j(43,"g"),w(44,"g"),j(45,"path",32)(46,"path",33),C()()()(),Ie(),w(47,"button",14),te(),w(48,"svg",26),j(49,"path",27)(50,"path",34),C()(),Ie(),w(51,"button",14),te(),w(52,"svg",30),j(53,"rect",31)(54,"path",35),C()()()()()),t&2){let r,s;V(8),L("src",(r=i.authService.curretUserSig())==null||r.api==null||r.api.picture==null||r.api.picture.data==null?null:r.api.picture.data.url,Cr),V(4),yt((s=i.authService.curretUserSig())==null||s.api==null?null:s.api.name)}}})};function SF(n,e){if(n&1){let t=Te();w(0,"div")(1,"p"),B(2,"Introductory phrases doesn't exist yet. But you can create it."),C(),w(3,"button",3),Q("click",function(){se(t);let r=H();return oe(r.createIceBreaker())}),B(4,"Create Ice Breaker"),C()()}}function RF(n,e){if(n&1){let t=Te();w(0,"button",9),Q("click",function(){se(t);let r=H(2);return oe(r.activate())}),te(),w(1,"svg",10),j(2,"path",11)(3,"path",12),C(),B(4," Deactivate"),C()}}function DF(n,e){if(n&1){let t=Te();w(0,"button",13),Q("click",function(){se(t);let r=H(2);return oe(r.deactivate())}),te(),w(1,"svg",10),j(2,"path",11)(3,"path",14),C(),B(4," Activate "),C()}}function xF(n,e){n&1&&(w(0,"span",15),B(1,"Introductory phrases not activated"),C())}function kF(n,e){n&1&&(w(0,"span",16),B(1,"Introductory phrases activated"),C())}function PF(n,e){if(n&1&&(w(0,"div",4),ae(1,RF,5,0,"button",5)(2,DF,5,0,"button",6)(3,xF,2,0,"span",7)(4,kF,2,0,"span",8),C()),n&2){let t=H();V(),L("ngIf",!t.activated),V(),L("ngIf",t.activated),V(),L("ngIf",!t.activated),V(),L("ngIf",t.activated)}}function MF(n,e){if(n&1&&j(0,"app-instagram-template",17),n&2){let t=H();L("componentData",t.iceBreakers)("component",t.iceBreakersBodyComponent)}}var yd=class n{constructor(e,t){this.http=e;this.firestore=t}iceBreakersBodyComponent=vd;authService=N(Ve);instagramService=N(vn);iceBreakers=[];activated=!1;ngOnInit(){this.authService.user$.subscribe(e=>v(this,null,function*(){mn(Qe(this.firestore,`users_instagram/${e.uid}/ice_breakers`)).then(t=>{t.docs.forEach(i=>v(this,null,function*(){let r=[];(yield mn(Qe(this.firestore,`users_instagram/${e.uid}/ice_breakers/${i.id}/call_to_actions`))).forEach(s=>{r.push(ee(M({},s.data()),{id:s.id}))}),this.iceBreakers.push(ee(M({},i.data()),{id:i.id,call_to_actions:r}))}))}),hr(ht(this.firestore,"users_instagram",e.uid)).then(t=>{this.http.get(`${t.data().api.url_api}/v11.0/me/messenger_profile?fields=ice_breakers&platform=instagram&access_token=${t.data().api.token}`).subscribe(i=>{i.data.length?this.activated=!0:this.activated=!1})})}))}activate(){this.activated=!this.activated;let e={platform:"instagram",ice_breakers:[...this.iceBreakers.reduce((t,i)=>[...t,{call_to_actions:i.call_to_actions.reduce((r,s)=>[...r,{question:s.question,payload:s.payload}],[]),locale:i.locale}],[])]};this.http.post(`${this.authService.curretUserSig()?.api?.url_api}/v20.0/me/messenger_profile?access_token=${this.authService.curretUserSig()?.api?.token}`,e).subscribe(t=>{this.activated=!0})}deactivate(){this.http.delete(`${this.authService.curretUserSig()?.api?.url_api}/v11.0/me/messenger_profile?fields=["ice_breakers"]&platform=instagram&access_token=${this.authService.curretUserSig()?.api?.token}`).subscribe(e=>{this.activated=!1})}createIceBreaker(){this.iceBreakers=[...this.iceBreakers,{locale:"default",id:"",call_to_actions:[]}]}static \u0275fac=function(t){return new(t||n)(F(Tn),F(Ye))};static \u0275cmp=me({type:n,selectors:[["app-ice-breakers"]],standalone:!0,features:[ge],decls:4,vars:3,consts:[[4,"ngIf"],["class","flex gap-2 items-center mb-3",4,"ngIf"],["class","contents",3,"componentData","component",4,"ngIf"],["type","button",1,"rounded-md","bg-indigo-600","my-3","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[1,"flex","gap-2","items-center","mb-3"],["class","inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",3,"click",4,"ngIf"],["class","inline-flex items-center gap-x-1.5 rounded-md bg-green-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",3,"click",4,"ngIf"],["class","text-red-700 m-0",4,"ngIf"],["class","text-green-700 m-0",4,"ngIf"],[1,"inline-flex","items-center","gap-x-1.5","rounded-md","bg-red-600","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-red-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-red-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed"],["d","M0 0h24v24H0V0z","fill","none"],["d","M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"],[1,"inline-flex","items-center","gap-x-1.5","rounded-md","bg-green-600","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-green-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-green-600",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"],[1,"text-red-700","m-0"],[1,"text-green-700","m-0"],[1,"contents",3,"componentData","component"]],template:function(t,i){t&1&&(w(0,"div"),ae(1,SF,5,0,"div",0),C(),ae(2,PF,5,4,"div",1)(3,MF,1,2,"app-instagram-template",2)),t&2&&(V(),L("ngIf",!i.iceBreakers.length),V(),L("ngIf",i.iceBreakers.length),V(),L("ngIf",i.iceBreakers.length))},dependencies:[$e,dt,xo]})};function OF(n,e){}var hs=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var zv=(()=>{class n extends Ro{constructor(t,i,r,s,o,c,l,h){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=c,this._overlayRef=l,this._focusMonitor=h,this._platform=N(it),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=N(Bt),this._injector=N(Pe),this._isDestroyed=!1,this.attachDomPortal=f=>{this._portalOutlet.hasAttached();let m=this._portalOutlet.attachDomPortal(f);return this._contentAttached(),m},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||Ln(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Lc(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let t=this._elementRef.nativeElement,i=Lc();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Lc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(nd),F(he,8),F(hs),F(zc),F(re),F(xi),F(os))}}static{this.\u0275cmp=me({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&un(Wc,7),i&2){let s;_t(s=vt())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&Ze("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[St,ge],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&ae(0,OF,0,0,"ng-template",0)},dependencies:[Wc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})(),Yc=class{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new ue,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!mr(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},NF=new K("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=N(kt);return()=>n.scrollStrategies.block()}}),VF=new K("DialogData"),FF=new K("DefaultDialogConfig");var LF=0,_A=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,c){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ue,this._afterOpenedAtThisLevel=new ue,this._ariaHiddenElements=new Map,this.afterAllClosed=Tr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Yt(void 0))),this._scrollStrategy=c}open(t,i){let r=this._defaultOptions||new hs;i=M(M({},r),i),i.id=i.id||`cdk-dialog-${LF++}`,i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),o=this._overlay.create(s),c=new Yc(o,i),l=this._attachContainer(o,c,i);return c.containerInstance=l,this._attachDialogContent(t,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){jv(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){jv(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),jv(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new ls({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){let s=r.injector||r.viewContainerRef?.injector,o=[{provide:hs,useValue:r},{provide:Yc,useValue:i},{provide:xi,useValue:t}],c;r.container?typeof r.container=="function"?c=r.container:(c=r.container.type,o.push(...r.container.providers(r))):c=zv;let l=new So(c,r.viewContainerRef,Pe.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){if(t instanceof zi){let o=this._createInjector(s,i,r,void 0),c={$implicit:s.data,dialogRef:i};s.templateContext&&(c=M(M({},c),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new _r(t,null,c,o))}else{let o=this._createInjector(s,i,r,this._injector),c=r.attachComponentPortal(new So(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(t,i,r,s){let o=t.injector||t.viewContainerRef?.injector,c=[{provide:VF,useValue:t.data},{provide:Yc,useValue:i}];return t.providers&&(typeof t.providers=="function"?c.push(...t.providers(i,t,r)):c.push(...t.providers)),t.direction&&(!o||!o.get(Di,null,{optional:!0}))&&c.push({provide:Di,useValue:{value:t.direction,change:J()}}),Pe.create({parent:o||s,providers:c})}_removeOpenDialog(t,i){let r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(O(kt),O(Pe),O(FF,8),O(n,12),O(Do),O(NF))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jv(n,e){let t=n.length;for(;t--;)e(n[t])}function UF(n,e){}var Qc=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},$v="mdc-dialog--open",vA="mdc-dialog--opening",yA="mdc-dialog--closing",BF=150,jF=75,zF=(()=>{class n extends zv{constructor(t,i,r,s,o,c,l,h,f){super(t,i,r,s,o,c,l,f),this._animationMode=h,this._animationStateChanged=new Ne,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?wA(this._config.enterAnimationDuration)??BF:0,this._exitAnimationDuration=this._animationsEnabled?wA(this._config.exitAnimationDuration)??jF:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(bA,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(vA,$v)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add($v),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove($v),this._animationsEnabled?(this._hostElement.style.setProperty(bA,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(yA)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(vA,yA)}_waitForAnimationToComplete(t,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static{this.\u0275fac=function(i){return new(i||n)(F(Re),F(nd),F(he,8),F(Qc),F(zc),F(re),F(xi),F(wn,8),F(os))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(vf("id",r._config.id),Ze("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Xt("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[St,ge],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(w(0,"div",0)(1,"div",1),ae(2,UF,0,0,"ng-template",2),C()())},dependencies:[Wc],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}}return n})(),bA="--mat-dialog-transition-duration";function wA(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?jc(n.substring(0,n.length-2)):n.endsWith("s")?jc(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var bd=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(bd||{}),ki=class{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new ue,this._beforeClosed=new ue,this._state=bd.OPEN,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(ze(r=>r.state==="opened"),At(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(ze(r=>r.state==="closed"),At(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Li(this.backdropClick(),this.keydownEvents().pipe(ze(r=>r.keyCode===27&&!this.disableClose&&!mr(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),IA(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ze(t=>t.state==="closing"),At(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=bd.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=bd.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function IA(n,e,t){return n._closeInteractionType=e,n.close(t)}var Xc=new K("MatMdcDialogData"),$F=new K("mat-mdc-dialog-default-options"),qF=new K("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(kt);return()=>n.scrollStrategies.block()}});var GF=0,wd=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,c,l,h){this._overlay=t,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ue,this._afterOpenedAtThisLevel=new ue,this.dialogConfigClass=Qc,this.afterAllClosed=Tr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Yt(void 0))),this._dialog=i.get(_A),this._dialogRefConstructor=ki,this._dialogContainerType=zF,this._dialogDataToken=Xc}open(t,i){let r;i=M(M({},this._defaultOptions||new Qc),i),i.id=i.id||`mat-mdc-dialog-${GF++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(t,ee(M({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:hs,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,c,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static{this.\u0275fac=function(i){return new(i||n)(O(kt),O(Pe),O(di,8),O($F,8),O(qF),O(n,12),O(Do),O(wn,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Id=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=EA(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){let i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){IA(this.dialogRef,t.screenX===0&&t.screenY===0?"keyboard":"mouse",this.dialogResult)}static{this.\u0275fac=function(i){return new(i||n)(F(ki,8),F(Re),F(wd))}}static{this.\u0275dir=Se({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){i&1&&Q("click",function(o){return r._onButtonClick(o)}),i&2&&Ze("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[Qt]})}}return n})(),HF=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=EA(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(i){return new(i||n)(F(ki,8),F(Re),F(wd))}}static{this.\u0275dir=Se({type:n,standalone:!0})}}return n})();var Ed=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Se({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[l0([rA])]})}}return n})(),Td=(()=>{class n extends HF{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ui(n)))(r||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,r){i&2&&Xt("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},standalone:!0,features:[St]})}}return n})();function EA(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}var Jc=class n{constructor(e){this.formBuilder=e}dialogRef=N(ki);data=N(Xc);form=new qt({});ngOnInit(){this.form=this.formBuilder.group({title:new nt(this.data?this.data.form.title:"",[Pn.required]),url:new nt(this.data?this.data.form.url:"",[Pn.required])})}add(){this.form.invalid||this.dialogRef.close(ee(M({},this.form.value),{id:this.data?this.data.form.id:""}))}static \u0275fac=function(t){return new(t||n)(F(Io))};static \u0275cmp=me({type:n,selectors:[["app-add-button"]],standalone:!0,features:[ge],decls:17,vars:2,consts:[[3,"formGroup"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["type","text","formControlName","title","name","title","id","title","placeholder","name",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","px-3"],[1,"mt-3"],["type","text","formControlName","url","name","url","id","url","placeholder","https://",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","px-3"],[1,"bg-indigo-600","flex","!items-stretch","!p-0","text-white"],["mat-button","","mat-dialog-close","",1,"flex-1","hover:bg-indigo-500"],["mat-button","",1,"flex-1","hover:bg-indigo-500",3,"click"]],template:function(t,i){t&1&&(w(0,"mat-dialog-content")(1,"form",0)(2,"div")(3,"label",1),B(4,"Button name"),C(),w(5,"div",2),j(6,"input",3),C()(),w(7,"div",4)(8,"label",1),B(9,"URL"),C(),w(10,"div",2),j(11,"input",5),C()()()(),w(12,"mat-dialog-actions",6)(13,"button",7),B(14," Cancel "),C(),w(15,"button",8),Q("click",function(){return i.add()}),B(16),C()()),t&2&&(V(),L("formGroup",i.form),V(15),Jt(" ",i.data?"Save":"Add"," "))},dependencies:[Td,Id,Ed,si,ri,gn,ni,ii,Mn,On],changeDetection:0})};var Cd=class n{constructor(e){this.formBuilder=e}dialogRef=N(ki);data=N(Xc);form=new qt({});ngOnInit(){console.log(this.data),this.form=this.formBuilder.group({title:new nt(this.data?this.data.form.title:"",[Pn.required]),text:new nt(this.data?this.data.form.text:"",[Pn.required])})}add(){console.log(this.form.value),!this.form.invalid&&this.dialogRef.close(M({},this.form.value))}static \u0275fac=function(t){return new(t||n)(F(Io))};static \u0275cmp=me({type:n,selectors:[["app-dialog-add-text"]],standalone:!0,features:[ge],decls:17,vars:2,consts:[[3,"formGroup"],["for","title",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["type","text","formControlName","title","name","title","id","title","placeholder","name",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","px-3"],[1,"mt-3"],["for","text",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["type","text","rows","4","formControlName","text","name","text","id","text","placeholder","Your text ...",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","px-3"],[1,"bg-indigo-600","flex","!items-stretch","!p-0","text-white"],["mat-button","","mat-dialog-close","",1,"flex-1","hover:bg-indigo-500"],["mat-button","",1,"flex-1","hover:bg-indigo-500",3,"click"]],template:function(t,i){t&1&&(w(0,"mat-dialog-content")(1,"form",0)(2,"div")(3,"label",1),B(4,"Button name"),C(),w(5,"div",2),j(6,"input",3),C()(),w(7,"div",4)(8,"label",5),B(9,"Text"),C(),w(10,"div",2),j(11,"textarea",6),C()()()(),w(12,"mat-dialog-actions",7)(13,"button",8),B(14," Cancel "),C(),w(15,"button",9),Q("click",function(){return i.add()}),B(16),C()()),t&2&&(V(),L("formGroup",i.form),V(15),Jt(" ",i.data?"Save":"Add"," "))},dependencies:[Td,Id,Ed,si,ri,gn,ni,ii,Mn,On],changeDetection:0})};function WF(n,e){if(n&1&&j(0,"img",24),n&2){let t=H();L("src",t.card.image_url?t.card.image_url:t.imageUrl,Cr)}}function KF(n,e){n&1&&(te(),w(0,"svg",25),j(1,"path",26)(2,"path",27),C())}function YF(n,e){if(n&1){let t=Te();w(0,"button",28),Q("click",function(){se(t);let r=H();return oe(r.editCard())}),te(),w(1,"svg",29),j(2,"path",26)(3,"path",30),C()()}}function QF(n,e){if(n&1){let t=Te();w(0,"button",28),Q("click",function(){se(t);let r=H();return oe(r.addCard())}),te(),w(1,"svg",29),j(2,"path",26)(3,"path",31),C()()}}function XF(n,e){if(n&1){let t=Te();w(0,"button",32),Q("click",function(){se(t);let r=H();return oe(r.saveCard())}),te(),w(1,"svg",29),j(2,"path",26)(3,"path",33),C()()}if(n&2){let t=H();L("disabled",t.form.invalid)}}function JF(n,e){if(n&1){let t=Te();w(0,"button",28),Q("click",function(){se(t);let r=H();return oe(r.deleteCard())}),te(),w(1,"svg",29),j(2,"path",26)(3,"path",34),C()()}}function ZF(n,e){if(n&1&&(w(0,"b"),B(1),C()),n&2){let t=H();V(),yt(t.form.value.title)}}function eL(n,e){if(n&1&&j(0,"input",35),n&2){let t=H();L("value",t.form.value.title)}}function tL(n,e){n&1&&(w(0,"div",36),B(1," Title is required. "),C())}function nL(n,e){if(n&1&&(w(0,"span"),B(1),C()),n&2){let t=H();V(),yt(t.form.value.subtitle)}}function iL(n,e){if(n&1&&j(0,"input",37),n&2){let t=H();L("value",t.form.value.subtitle)}}function rL(n,e){n&1&&(w(0,"div",36),B(1," Subtitle is required. "),C())}function sL(n,e){if(n&1&&(w(0,"button",43),B(1),C()),n&2){let t=H().$implicit;V(),Jt(" ",t.title," ")}}function oL(n,e){if(n&1&&(w(0,"a",44),B(1),C()),n&2){let t=H().$implicit;L("href",t.url,Cr),V(),Jt(" ",t.title," ")}}function aL(n,e){if(n&1){let t=Te();w(0,"div",38)(1,"button",39),Q("click",function(){let r=se(t).$implicit,s=H();return oe(s.editButton(r.id))}),te(),w(2,"svg",29),j(3,"path",26)(4,"path",30),C()(),ae(5,sL,2,1,"button",40)(6,oL,2,2,"a",41),Ie(),w(7,"button",42),Q("click",function(){let r=se(t).$implicit,s=H();return oe(s.deleteButton(r.id))}),te(),w(8,"svg",29),j(9,"path",26)(10,"path",34),C()()()}if(n&2){let t=e.$implicit;V(5),L("ngIf",t.type==="postback"),V(),L("ngIf",t.type==="web_url")}}function cL(n,e){if(n&1){let t=Te();w(0,"div")(1,"button",45),B(2," Add Button "),C(),w(3,"mat-menu",null,0)(5,"button",46),Q("click",function(){se(t);let r=H();return oe(r.addButton("url"))}),B(6,"Button URL"),C(),w(7,"button",47),B(8,"Template"),C()(),w(9,"mat-menu",null,1)(11,"button",47),B(12,"Text"),C(),w(13,"button",47),B(14,"Button"),C()(),w(15,"mat-menu",null,2)(17,"button",48),Q("click",function(){se(t);let r=H();return oe(r.addTextTemplate("postback"))}),w(18,"span",49),te(),w(19,"svg",29),j(20,"path",26)(21,"path",50),C(),B(22," add new "),C()()(),Ie(),w(23,"mat-menu",null,3)(25,"button",51),B(26,"Button"),C()()()}if(n&2){let t=hn(4),i=hn(10),r=hn(16),s=hn(24);V(),L("matMenuTriggerFor",t),V(6),L("matMenuTriggerFor",i),V(4),L("matMenuTriggerFor",r),V(2),L("matMenuTriggerFor",s)}}var Ad=class n{constructor(e){this.formBuilder=e}authService=N(Ve);firestore=N(Ye);storage=N(ns);dialog=N(wd);index=0;card={};templateId="";remove=new Ne;edit=!1;form=new qt({});selectedFile=null;downloadURL=null;imageUrl="";ngOnInit(){this.form=this.formBuilder.group({title:new nt(this.card.title,[Pn.required]),subtitle:new nt(this.card.subtitle,[Pn.required])}),this.card.id||(this.edit=!0)}editCard(){this.edit=!0}deleteCard(){Ec(ht(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements`,`${this.card.id}`)).then(e=>{this.remove.emit();let t=iv(this.storage,this.card.image_url);nC(t).then(()=>{console.log("\u0424\u0430\u0439\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D!")}).catch(i=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0444\u0430\u0439\u043B\u0430: ",i)})})}addCard(){this.form.invalid||on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements`),{title:this.form.value.title,subtitle:this.form.value.subtitle,image_url:this.card.image_url,order:this.index}).then(e=>{if(this.card.id=e.id,this.saveImage(),!this.card.buttons?.length&&!e.id)return;let t=IT(this.firestore),i=Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements/${e.id}/buttons`);this.card.buttons?.forEach((r,s)=>{let o=ht(i);t.set(o,ee(M({},r),{order:s}))}),t.commit().then(()=>{this.edit=!1}).catch(r=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432: ",r)})})}saveCard(){this.form.invalid||Cc(ht(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements`,`${this.card.id}`),{title:this.form.value.title,subtitle:this.form.value.subtitle,image_url:this.card.image_url}).then(e=>{this.edit=!1})}onFileSelected(e){this.selectedFile=e.target.files[0],this.imageUrl=URL.createObjectURL(e.target.files[0]),this.saveImage()}saveImage(){if(this.selectedFile&&this.card.id){let e=`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements/${this.card.id}.${this.getFileExtension(this.selectedFile.name)}`,t=iv(this.storage,e);sC(t,this.selectedFile).then(i=>{iC(i.ref).then(r=>{this.card.image_url=r,this.saveCard()})})}}getFileExtension(e){return e.split(".").pop()||""}editButton(e){this.dialog.open(Jc,{width:"100%",maxWidth:"450px",data:{form:this.card.buttons?.find(i=>i.id===e)}}).afterClosed().subscribe(i=>{i&&Cc(ht(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements/${this.card.id}/buttons`,`${i.id}`),i).then(r=>{this.card.buttons.find(s=>s.id===i.id).title=i.title,this.card.buttons.find(s=>s.id===i.id).url=i.url})})}deleteButton(e){Ec(ht(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements/${this.card.id}/buttons`,`${e}`)).then(t=>{this.card.buttons=this.card.buttons.filter(i=>i.id!==e)})}addButton(e){this.dialog.open(Jc,{width:"100%",maxWidth:"450px"}).afterClosed().subscribe(i=>{if(i){if(this.card=ee(M({},this.card),{buttons:[...this.card.buttons?this.card.buttons:[],{type:"web_url",title:i.title,url:i.url}]}),!this.card.id)return;on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements/${this.card.id}/buttons`),{type:"web_url",title:i.title,url:i.url,order:this.card.buttons.length-1}).then(r=>{})}})}addTextTemplate(e){this.dialog.open(Cd,{width:"100%",maxWidth:"450px"}).afterClosed().subscribe(i=>{if(i){let r=i.text.replace(/\n\n/g,"\\n\\n").replace(/\n/g,"\\n");on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/text_templates`),{title:i.title,text:r}).then(s=>{this.card.id&&on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates/${this.templateId}/elements/${this.card.id}/buttons`),{type:"postback",title:i.title,payload:`text_templates-${s.id}`,order:this.card.buttons.length}).then(o=>{this.card=ee(M({},this.card),{buttons:[...this.card.buttons?this.card.buttons:[],{type:"postback",title:i.title,payload:`text_templates-${o.id}`}]})})})}})}static \u0275fac=function(t){return new(t||n)(F(Io))};static \u0275cmp=me({type:n,selectors:[["app-card"]],inputs:{index:"index",card:"card",templateId:"templateId"},outputs:{remove:"remove"},standalone:!0,features:[ge],decls:24,vars:15,consts:[["menu","matMenu"],["template","matMenu"],["text","matMenu"],["button","matMenu"],[1,"rounded-lg","shadow-lg","mb-8","overflow-hidden","w-[280px]","flex-none","bg-white","text-black","box-border","group"],[3,"formGroup"],[1,"min-h-[280px]","bg-slate-400","relative","flex","items-stretch","justify-stretch"],[1,"w-full","flex","items-center","justify-center","flex-1","relative"],["type","file",1,"absolute","left-0","top-0","right-0","bottom-0","cursor-pointer","opacity-0",3,"change"],["class","w-full","alt","",3,"src",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","48px","viewBox","0 0 24 24","width","48px","fill","#e8eaed",4,"ngIf"],[1,"hidden","group-hover:block","absolute","left-0","bottom-0","px-2"],["type","button","class","hover:bg-slate-300/30 rounded-md",3,"click",4,"ngIf"],["type","button","class","hover:bg-slate-300/30 rounded-md",3,"disabled","click",4,"ngIf"],["class","hover:bg-slate-300/30 rounded-md","type","button",3,"click",4,"ngIf"],[1,"px-4","py-3"],[1,"relative"],[4,"ngIf"],["class","w-full","type","text","placeholder","Title","id","title","formControlName","title","name","title",3,"value",4,"ngIf"],["class","text-xs text-red-500",4,"ngIf"],[1,"text-xs","relative"],["class","w-full","type","text","placeholder","Sub Title","formControlName","subtitle","name","subtitle",3,"value",4,"ngIf"],[1,"flex","gap-1","flex-col","mt-3","text-center"],["class","flex flex-col gap-2 relative",4,"ngFor","ngForOf"],["alt","",1,"w-full",3,"src"],["xmlns","http://www.w3.org/2000/svg","height","48px","viewBox","0 0 24 24","width","48px","fill","#e8eaed"],["d","M0 0h24v24H0V0z","fill","none"],["d","M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"],["type","button",1,"hover:bg-slate-300/30","rounded-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","20px","viewBox","0 0 24 24","width","20px","fill","#e8eaed"],["d","M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],["type","button",1,"hover:bg-slate-300/30","rounded-md",3,"click","disabled"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"],["d","M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"],["type","text","placeholder","Title","id","title","formControlName","title","name","title",1,"w-full",3,"value"],[1,"text-xs","text-red-500"],["type","text","placeholder","Sub Title","formControlName","subtitle","name","subtitle",1,"w-full",3,"value"],[1,"flex","flex-col","gap-2","relative"],[1,"absolute","top-0","left-0","bottom-0","px-1","rounded-md","hover:bg-slate-500","hidden","group-hover:block",3,"click"],["type","button","class","bg-slate-700 text-white font-bold py-1 px-2 rounded-md flex-1",4,"ngIf"],["type","button","target","_blank","class","bg-slate-700 text-white font-bold py-1 px-2 rounded-md flex-1",3,"href",4,"ngIf"],[1,"absolute","top-0","right-0","bottom-0","px-1","rounded-md","hover:bg-slate-500","hidden","group-hover:block",3,"click"],["type","button",1,"bg-slate-700","text-white","font-bold","py-1","px-2","rounded-md","flex-1"],["type","button","target","_blank",1,"bg-slate-700","text-white","font-bold","py-1","px-2","rounded-md","flex-1",3,"href"],["type","button","mat-button","",1,"rounded-full","bg-indigo-600","mt-3","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","w-full",3,"matMenuTriggerFor"],["mat-raised-button","","mat-menu-item","",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"flex","gap-2","items-center"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"],["mat-menu-item",""]],template:function(t,i){if(t&1&&(w(0,"div",4)(1,"form",5)(2,"div",6)(3,"div",7)(4,"input",8),Q("change",function(s){return i.onFileSelected(s)}),C(),ae(5,WF,1,1,"img",9)(6,KF,3,0,"svg",10),C(),w(7,"div",11),ae(8,YF,4,0,"button",12)(9,QF,4,0,"button",12)(10,XF,4,1,"button",13)(11,JF,4,0,"button",14),C()(),w(12,"div",15)(13,"div",16),ae(14,ZF,2,1,"b",17)(15,eL,1,1,"input",18)(16,tL,2,0,"div",19),C(),w(17,"div",20),ae(18,nL,2,1,"span",17)(19,iL,1,1,"input",21)(20,rL,2,0,"div",19),C(),w(21,"div",22),ae(22,aL,11,2,"div",23)(23,cL,27,4,"div",17),C()()()()),t&2){let r,s;V(),L("formGroup",i.form),V(4),L("ngIf",i.card.image_url||i.selectedFile),V(),L("ngIf",!i.card.image_url),V(2),L("ngIf",!i.edit),V(),L("ngIf",i.edit&&!i.card.id),V(),L("ngIf",i.edit&&i.card.id),V(),L("ngIf",i.edit&&i.card.id),V(3),L("ngIf",!i.edit),V(),L("ngIf",i.edit),V(),L("ngIf",((r=i.form.get("title"))==null?null:r.invalid)&&((r=i.form.get("title"))==null?null:r.touched)),V(2),L("ngIf",!i.edit),V(),L("ngIf",i.edit),V(),L("ngIf",((s=i.form.get("subtitle"))==null?null:s.invalid)&&((s=i.form.get("subtitle"))==null?null:s.touched)),V(2),L("ngForOf",i.card.buttons),V(),L("ngIf",i.edit)}},dependencies:[$e,Bn,dt,si,ri,gn,ni,ii,Mn,On,md,vr,us,pd]})};var lL=["scrollContainer"];function uL(n,e){if(n&1){let t=Te();w(0,"app-card",6),Q("remove",function(){let r=se(t).index,s=H(2);return oe(s.deleteCard(r))}),C()}if(n&2){let t=e.$implicit,i=e.index,r=H(2);L("templateId",r.data.id)("card",t)("index",i)}}function hL(n,e){if(n&1&&(w(0,"div",3,0)(2,"div",4),ae(3,uL,1,3,"app-card",5),C()()),n&2){let t=H();V(3),L("ngForOf",t.data.elements)}}var Sd=class n{scrollContainer;authService=N(Ve);firestore=N(Ye);data={};ngOnInit(){this.authService.user$.subscribe(e=>v(this,null,function*(){let t=Qe(this.firestore,`users_instagram/${e.uid}/base_templates/${this.data.id}/elements`);mn(Tc(t,U_("order","asc"))).then(i=>{i.docs.forEach(r=>{let s=Qe(this.firestore,`users_instagram/${e.uid}/base_templates/${this.data.id}/elements/${r.id}/buttons`);mn(Tc(s,U_("order","asc"))).then(o=>{let c=[];o.docs.forEach(l=>{c.push(ee(M({},l.data()),{id:l.id}))}),this.data.elements?.push(ee(M({},r.data()),{id:r.id,buttons:c}))})})})}))}addCard(){this.data=ee(M({},this.data),{elements:[...this.data.elements,{title:"",image_url:"",subtitle:"",buttons:[]}]}),Xy(100).subscribe(()=>{this.scrollContainer.nativeElement.scrollTo({left:this.scrollContainer.nativeElement.scrollWidth,behavior:"smooth"})})}deleteCard(e){this.data.elements?.splice(e,1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["app-base-template"]],viewQuery:function(t,i){if(t&1&&un(lL,5),t&2){let r;_t(r=vt())&&(i.scrollContainer=r.first)}},inputs:{data:"data"},standalone:!0,features:[ge],decls:3,vars:1,consts:[["scrollContainer",""],["class","overflow-x-auto w-full",4,"ngIf"],[1,"rounded-full","bg-indigo-600","mt-3","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","absolute","bottom-2","right-2",3,"click"],[1,"overflow-x-auto","w-full"],[1,"flex","gap-2","pr-2"],["class","contents",3,"templateId","card","index","remove",4,"ngFor","ngForOf"],[1,"contents",3,"remove","templateId","card","index"]],template:function(t,i){t&1&&(ae(0,hL,4,1,"div",1),w(1,"button",2),Q("click",function(){return i.addCard()}),B(2,` Add
`),C()),t&2&&L("ngIf",i.data.elements==null?null:i.data.elements.length)},dependencies:[$e,Bn,dt,Ad]})};function dL(n,e){if(n&1){let t=Te();w(0,"div")(1,"p"),B(2,"Base Template doesn't exist yet. But you can create it."),C(),w(3,"button",3),Q("click",function(){se(t);let r=H();return oe(r.createBaseTemplates())}),B(4,"Create Base Template"),C()()}}function fL(n,e){if(n&1&&(w(0,"h1",4),B(1),C()),n&2){let t=H();V(),yt(t.baseTemplates[t.baseTemplateIndex].title)}}function pL(n,e){if(n&1&&j(0,"app-instagram-template",5),n&2){let t=H();L("componentData",t.baseTemplates[t.baseTemplateIndex])("component",t.baseTemplateComponent)}}var Rd=class n{constructor(e,t){this.http=e;this.firestore=t}authService=N(Ve);baseTemplateComponent=Sd;baseTemplateIndex=0;baseTemplates=[];ngOnInit(){this.authService.user$.subscribe(e=>v(this,null,function*(){mn(Qe(this.firestore,`users_instagram/${e.uid}/base_templates`)).then(t=>{t.docs.forEach(i=>{this.baseTemplates.push(ee(M({},i.data()),{elements:i.data().elements?i.data().elements:[],id:i.id,title:i.data().title}))})})}))}createBaseTemplates(){this.baseTemplates=[...this.baseTemplates,{template_type:"generic",elements:[],title:"Name Template"}],on(Qe(this.firestore,`users_instagram/${this.authService.curretUserSig()?.uid}/base_templates`),{template_type:"generic",user_id:this.authService.curretUserSig()?.uid,title:"Name Template"}).then(e=>{this.baseTemplates[this.baseTemplates.length-1].id=e.id})}static \u0275fac=function(t){return new(t||n)(F(Tn),F(Ye))};static \u0275cmp=me({type:n,selectors:[["app-base-templates"]],standalone:!0,features:[ge],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3 text-2xl font-bold",4,"ngIf"],["class","contents",3,"componentData","component",4,"ngIf"],["type","button",1,"rounded-md","bg-indigo-600","my-3","px-2.5","py-1.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[1,"mb-3","text-2xl","font-bold"],[1,"contents",3,"componentData","component"]],template:function(t,i){t&1&&ae(0,dL,5,0,"div",0)(1,fL,2,1,"h1",1)(2,pL,1,2,"app-instagram-template",2),t&2&&(L("ngIf",!i.baseTemplates.length),V(),L("ngIf",i.baseTemplates.length),V(),L("ngIf",i.baseTemplates.length))},dependencies:[$e,dt,xo]})};var TA=[{path:"login",component:rd},{path:"",component:ad,canActivate:[sd],children:[{path:"base-templates",component:Rd},{path:"ice-breakers",component:yd},{path:"config",component:cd}]},{path:"**",redirectTo:"login"}];var mL="@",gL=(()=>{class n{constructor(t,i,r,s,o){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=N(c0,{optional:!0}),this.loadingSchedulerFn=N(_L,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-CJVMWEMH.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new Be(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new qv(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){El()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),qv=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(mL)}},_L=new K("");function CA(n="animations"){return mf("NgAsyncAnimations"),Ot([{provide:Tl,useFactory:(e,t,i)=>new gL(e,t,i,n),deps:[he,ql,re]},{provide:wn,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Gt={production:!0,firebase:{EMULATOR_PUBLIC_HOST:"127.0.0.1",apiKey:"AIzaSyC8wG4PIep1zeyWLzi3KOIXm0RP59RTqgI",authDomain:"alesiafitness-firebase.firebaseapp.com",projectId:"alesiafitness-firebase",storageBucket:"alesiafitness-firebase.appspot.com",messagingSenderId:"896740365955",appId:"1:896740365955:web:4401b81df23bd56cf52db6",measurementId:"G-97YJRHQTFD"}};var AA={providers:[p0({eventCoalescing:!0}),Vb(TA),L0(),fw(()=>pw({apiKey:Gt.firebase.apiKey,authDomain:Gt.firebase.authDomain,projectId:Gt.firebase.projectId,storageBucket:Gt.firebase.storageBucket,messagingSenderId:Gt.firebase.messagingSenderId,appId:Gt.firebase.appId,measurementId:Gt.firebase.measurementId})),fI(()=>{let n=gI();return Gt.production||mI(n,`http://${Gt.firebase.EMULATOR_PUBLIC_HOST}:9099`),n}),CA(),vT(()=>{let n=bT();return Gt.production||yT(n,Gt.firebase.EMULATOR_PUBLIC_HOST,8080),n}),eC(()=>{let n=rC();return Gt.production||tC(n,Gt.firebase.EMULATOR_PUBLIC_HOST,9199),n})]};var Dd=class n{constructor(e){this.firestore=e}authService=N(Ve);instagramService=N(vn);router=N(at);ngOnInit(){this.authService.user$.subscribe(e=>{e?hr(ht(this.firestore,"users_instagram",e.uid)).then(t=>{t.data()===void 0&&lo(ht(this.firestore,"users_instagram",e.uid),{email:e.email,displayName:e.displayName,api:{url_api:"",token:"",id:"",name:""}}).then(i=>{this.authService.curretUserSig.set({email:e.email,displayName:e.displayName,uid:e.uid,api:{url_api:"",token:"",id:"",name:""}})}),this.authService.curretUserSig.set({email:e.email,displayName:e.displayName,uid:e.uid,api:t.data().api?t.data().api:{url_api:"",token:"",id:"",name:""}})}):this.authService.curretUserSig.set(null)})}static \u0275fac=function(t){return new(t||n)(F(Ye))};static \u0275cmp=me({type:n,selectors:[["app-root"]],standalone:!0,features:[ge],decls:2,vars:0,template:function(t,i){t&1&&(w(0,"div"),j(1,"router-outlet"),C())},dependencies:[Oa],encapsulation:2})};G0(Dd,AA).catch(n=>console.error(n));
